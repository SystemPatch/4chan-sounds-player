// ==UserScript==
// @name         4chan sounds player
// @version      3.4.0-380d280
// @namespace    rccom
// @description  A player designed for 4chan sounds threads.
// @author       RCC
// @match        *://boards.4chan.org/*
// @match        *://boards.4channel.org/*
// @match        *://desuarchive.org/*
// @match        *://arch.b4k.co/*
// @match        *://archived.moe/*
// @match        *://warosu.org/*
// @grant        GM.getValue
// @grant        GM.setValue
// @grant        GM.xmlHttpRequest
// @grant        GM_addValueChangeListener
// @connect      4chan.org
// @connect      4channel.org
// @connect      a.4cdn.org
// @connect      desu-usergeneratedcontent.xyz
// @connect      arch-img.b4k.co
// @connect      4cdn.org
// @connect      a.pomf.cat
// @connect      pomf.cat
// @connect      files.catbox.moe
// @connect      catbox.moe
// @connect      share.dmca.gripe
// @connect      z.zz.ht
// @connect      zz.ht
// @connect      too.lewd.se
// @connect      lewd.se
// @connect      *
// @run-at       document-start
// @require      https://gitcdn.xyz/repo/richtr/NoSleep.js/07fcee254724ab1b79076fbc22f3dd447649a2eb/dist/NoSleep.min.js
// @require      https://gitcdn.xyz/repo/Stuk/jszip/7bbcb3873db23f6d27550cdbb6c4cc2bdeb32194/dist/jszip.js
// @updateURL    https://raw.githubusercontent.com/rcc11/4chan-sounds-player/master/dist/4chan-sounds-player-beta.meta.js
// @downloadURL  https://raw.githubusercontent.com/rcc11/4chan-sounds-player/master/dist/4chan-sounds-player-beta.user.js
// ==/UserScript==


!function(e){var t={};function n(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(a,l,function(t){return e[t]}.bind(null,l));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){const n=e.exports;function a(e,t){const n=Math.max(0,t-e);return[n%60,Math.floor(n/60)%60,Math.floor(n/60/60)%24,Math.floor(n/60/60/24)%7,Math.floor(n/60/60/24/7)]}e.exports.set=function(e,t,n){const a=t.split("."),l=a.pop(),r=a.reduce((e,t)=>e[t]||(e[t]={}),e);return r&&(r[l]=n),e},e.exports.get=function(e,t,n){if("string"!=typeof t)return n;if(""===t)return e;const a=t.split("."),l=a.pop(),r=a.reduce((e,t)=>e&&e[t],e);return r&&l in r?r[l]:n},e.exports.isEqual=function e(t,a,l=!0){if(typeof t!=typeof a)return!1;if(Array.isArray(t,a))return t===a||t.length===a.length&&t.every((t,n)=>e(t,a[n]));if(t&&a&&"object"==typeof t&&t!==a){const e=Object.keys(t);return e.push(...Object.keys(a).filter(t=>!e.includes(t))),e.every(e=>n.isEqual(t[e],a[e]))}return l?t===a:t==a},e.exports.toDuration=function(e){e=Math.floor(e||0);let[t,n,l]=a(0,e);return t<10&&(t="0"+t),(l?l+":":"")+n+":"+t},e.exports.timeAgo=function(e){const[t,n,l,r,s]=a(Math.floor(e),Math.floor(Date.now()/1e3));return s>1?s+" weeks ago":r>0?r+(1===r?" day":" days")+" ago":l>0?l+(1===l?" hour":" hours")+" ago":n>0?n+(1===n?" minute":" minutes")+" ago":t+(1===t?" second":" seconds")+" ago"},e.exports.element=function(e,t){const a=document.createElement("div");a.innerHTML=e;const l=a.children[0];return t&&t.appendChild(l),n.elementHandler(l),l},e.exports.elementBefore=function(e,t){const a=n.element(e);return t.parentNode.insertBefore(a,t),a},e.exports.elementHTML=function(e,t){e.innerHTML=t,n.elementHandler(e)},e.exports.elementHandler=function(e){e.querySelectorAll(`.${ns}-expander`).forEach(e=>{e.classList.add("no-touch-action"),Player.events.set(e,"pointdragstart","position.initResize"),Player.events.set(e,"pointdrag","position.doResize:unbound"),Player.events.set(e,"pointdragend","position.stopResize")});e.querySelectorAll(`.${ns}-popover`).forEach(e=>{e.addEventListener("mouseenter",Player.display._popoverMouseEnter),e.addEventListener("mouseleave",Player.display._popoverMouseLeave),e.addEventListener("click",Player.display._popoverClick)}),Player.events.apply(e)},e.exports.escAttr=function(e,t){return e.replace(/'/g,"&#39;").replace(/"/g,t?"\\&#34;":"&#34;")}},function(e,t,n){e.exports={fcSounds:'<svg width="452" height="257" xmlns="http://www.w3.org/2000/svg"><g><text font-weight="bold" font-style="italic" font-family="Helvetica, Arial, sans-serif" font-size="250" y="197" fill-opacity="0.05" fill="#000000">4sp</text></g></svg>',arrowClockwise:n(21).default,arrowsCollapse:n(22).default,arrowDown:n(23).default,arrowsExpand:n(24).default,arrowRepeat:n(25).default,arrowUp:n(26).default,boxArrowInLeft:n(27).default,boxArrowRight:n(28).default,chatRightQuote:n(29).default,checkSquare:n(30).default,chevronDown:n(31).default,chevronUp:n(32).default,close:n(33).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),gear:n(34).default,fileEarmarkImage:n(35).default,fileEarmarkMusic:n(36).default,filter:n(37).default,fullscreen:n(38).default,fullscreenExit:n(39).default,github:n(40).default,image:n(41).default,infoCircle:n(42).default,layoutTextWindow:n(43).default,link:n(44).default,musicNoteList:n(45).default,play:n(46).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),playFill:n(47).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),pause:n(48).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),pauseFill:n(49).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),plus:n(50).default,reboot:n(51).default,search:n(52).default,shuffle:n(53).default,skipEnd:n(54).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipEndFill:n(55).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipStart:n(56).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipStartFill:n(57).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),soundwave:n(58).default,square:n(59).default,tools:n(60).default,trash:n(61).default,volumeMute:n(62).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeMuteFill:n(63).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeUp:n(64).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeUpFill:n(65).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"')}},function(e,t){e.exports={"4chan":{postIdPrefix:"p",posts:".post",filename:{".fileText .file-info .fnfull":"textContent",".fileText .file-info > a":"textContent",".fileText > a":"title",".fileText":"textContent"},thumb:".fileThumb",expandedImage:isChanX?".full-image":".expanded-thumb, .expandedWebm",hoverImage:isChanX?"#ihover":"#image-hover",playLink:{class:ns+"-play-link",text:"play",relative:".fileText",prependText:" "},styleFetcher:"post reply style-fetcher",limitWidthOf:".thread > .postContainer"},FoolFuuka:{postIdPrefix:"",posts:"article",filename:{".thread_image_box .post_file_filename":"textContent",".post_file_filename":"title"},thumb:".thread_image_link",playLink:{class:ns+"-play-link btnr",text:"Play",relative:".post_controls"},styleFetcher:"post_wrapper style-fetcher",limitWidthOf:".posts > article.post"},Fuuka:{postIdPrefix:"p",posts:".content > div, td.reply",filename:{":scope > span":"textContent"},filenameParser:e=>e.split(", ").slice(2).join(", "),thumb:".thumb",playLink:{class:ns+"-play-link",text:"play",relative:"br:nth-of-type(2)",before:!0,prependText:" [",appendText:"]"},styleFetcher:"reply style-fetcher",limitWidthOf:".content > div, .content > table"}}[Site]},function(e,t,n){e.exports=[...n(10),...n(11),...n(12),...n(13),...n(14),...n(16),{property:"viewStyle",default:"playlist"},{property:"showPlaylistSearch",default:!0},{property:"offsetTop",default:"0"},{property:"offsetBottom",default:"0"}]},function(e,t,n){(function(t){const a=n(2),l=/^(https?:)?\/\//,r=/(.*?)[[({](?:audio|sound)[ =:|$](.*?)[\])}]/gi;let s=0;function o(e,n){try{let l=e.parentElement,r=l&&l.parentElement;if(e.classList.contains("style-fetcher")||r&&"qp"===r.id||l&&l.classList.contains("noFile"))return;let s=e.querySelector(`.${ns}-play-link`);if(s){const e=s.getAttribute("data-id");return void(s.onclick=()=>Player.play(Player.sounds.find(t=>t.id===e)))}let o=null,c=a.filename;if(Object.keys(c).some((function(t){const n=e.querySelector(t);return n&&(o=n[c[t]])})),!o)return;a.filenameParser&&(o=a.filenameParser(o));const p=e.id.slice(a.postIdPrefix.length),u=e.querySelector(a.thumb).closest("a"),y=u&&u.href,h=u&&u.querySelector("img"),g=h&&h.src,f="Fuuka"===Site?e.querySelector(":scope > a:nth-of-type(3)").href.split("/").pop():h&&h.getAttribute("data-md5"),m=d(o,y,p,g,f);if(!m.length)return;const v=m[0].id,P=a.playLink,$=`<a href="javascript:;" class="${P.class}" data-id="${v}">${P.text}</a>`,w=P.relative&&e.querySelector(P.relative);return P.prependText&&i(P.prependText,P.before,w),s=P.before?t.elementBefore($,w):t.element($,w),P.appendText&&i(P.appendText,P.before,w),s.onclick=()=>Player.play(m[0]),m.forEach(e=>Player.add(e,n)),m.length>0}catch(t){Player.logError("There was an issue parsing the files. Please check the console for details.",t),console.log("[4chan sounds player]",e)}}function i(e,t,n){const a=e&&document.createTextNode(e);t?n.parentNode.insertBefore(a,n):n.appendChild(a)}function d(e,t,n,a,o,i){if(!e)return[];const d=t.endsWith("webm")?a:t,c=[];let p;for(;null!==(p=r.exec(e));)c.push(p);c.length||"always"!==Player.config.addWebm&&("soundBoards"!==Player.config.addWebm||"gif"!==Board&&"wsg"!==Board)||!e.endsWith(".webm")||c.push([null,e.slice(0,-5),t]);const u=c[0]&&c[0][1]||n||"Local Sound "+s;return c.length&&!n&&s++,c.reduce((r,p,y)=>{let h=p[2];const g=(n||"local"+s)+":"+y,f=p[1].trim(),m=f||u+(c.length>1?` (${y+1})`:""),v=h===t;try{h.includes("%")&&(h=decodeURIComponent(h)),h.startsWith("blob:")||null!==h.match(l)||(h=location.protocol+"//"+h)}catch(e){return r}const P={src:h,id:g,title:m,name:f,post:n,image:t,imageOrThumb:d,filename:e,thumb:a,imageMD5:o,standaloneVideo:v};return(i||Player.acceptedSound(P))&&r.push(P),r},[])}e.exports={parseFiles:function(e,t){let n=!1;(e.classList.contains("post")?[e]:e.querySelectorAll(a.posts)).forEach(e=>o(e,t)&&(n=!0)),n&&t&&Player.container&&Player.playlist.render()},parsePost:o,parseFileName:d}}).call(this,n(0))},function(e,t){window.ns="fcsp",window.is4chan=location.hostname.includes("4chan.org")||location.hostname.includes("4channel.org"),window.isChanX=document.documentElement&&document.documentElement.classList.contains("fourchan-x"),window.Board=location.pathname.split("/")[1],window.Site=is4chan?"4chan":((document.head.querySelector('meta[name="generator"]')||{}).content||"").includes("FoolFuuka")?"FoolFuuka":((document.head.querySelector('meta[name="description"]')||{}).content||"").includes("Fuuka")?"Fuuka":"FoolFuuka";class n extends Error{constructor(e,t,n){super(e),this.reason=e,this.type=t,this.error=n}}window.PlayerError=n},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-controls ${ns}-row" data-audio="${e.audioId}">\n\t<div class="${ns}-col-auto">\n\t\t${e.inline&&!e.multiple?"":`\n\t\t\t<div class="${ns}-media-control ${ns}-previous-button ${ns}-hover-fill ${e.inline?"disabled":""}" @click='${e.actions.previous}' data-hide-id="previous">\n\t\t\t\t${t.skipStart} ${t.skipStartFill}\n\t\t\t</div>\n\t\t`}\n\t\t<div class="${ns}-media-control ${ns}-play-button ${ns}-hover-fill ${!e.audio||e.audio.paused?ns+"-play":""}" @click='${e.actions.playPause}' data-audio="${e.audioId}">\n\t\t\t${t.play} ${t.pause} ${t.playFill} ${t.pauseFill}\n\t\t</div>\n\t\t${e.inline&&!e.multiple?"":`\n\t\t\t<div class="${ns}-media-control ${ns}-next-button ${ns}-hover-fill" @click='${e.actions.next}' data-hide-id="next">\n\t\t\t\t${t.skipEnd} ${t.skipEndFill}\n\t\t\t</div>\n\t\t`}\n\t</div>\n\t<div class="${ns}-col" data-hide-id="seek-bar">\n\t\t<div class="${ns}-seek-bar ${ns}-progress-bar" @pointdrag='${e.actions.seek}'>\n\t\t\t<div class="${ns}-full-bar">\n\t\t\t\t<div class="${ns}-loaded-bar"></div>\n\t\t\t\t<div class="${ns}-current-bar"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="${ns}-col-auto" data-hide-id="time">\n\t\t<span>\n\t\t\t<span class="${ns}-current-time" data-audio="${e.audioId}">0:00</span>\n\t\t\t<span class="${ns}-text-muted" data-hide-id="duration">\n\t\t\t\t/ <span class="${ns}-duration" data-audio="${e.audioId}">0:00</span>\n\t\t\t</span>\n\t\t</span>\n\t</div>\n\t<div class="${ns}-col-auto" data-hide-id="mute">\n\t\t<div class="${ns}-media-control ${ns}-volume-button ${ns}-hover-fill up" @click='${e.actions.mute}' data-hide-id="volume-button" data-audio="${e.audioId}">\n\t\t\t${t.volumeMute} ${t.volumeMuteFill}\n\t\t\t${t.volumeUp} ${t.volumeUpFill}\n\t\t</div>\n\t\t<div class="${ns}-volume-bar ${ns}-progress-bar" @pointdrag='${e.actions.volume}' data-hide-id="volume-bar">\n\t\t\t<div class="${ns}-full-bar">\n\t\t\t\t<div class="${ns}-current-bar" style="width: ${100*Player.audio.volume}%"></div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t${e.inline?"":`\n\t\t<div class="${ns}-col-auto" data-hide-id="fullscreen">\n\t\t\t<div class="${ns}-media-control ${ns}-fullscreen-button" @click='${e.actions.fullscreen}'>\n\t\t\t\t${t.fullscreen} ${t.fullscreenExit}\n\t\t\t</div>\n\t\t</div>\n\t`}\n</div>`}).call(this,n(1))},function(e,t,n){"use strict";async function a(){n(5);const e=n(8),{parseFiles:t}=n(4);await e.initialize(),t(document.body,!0);new MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&e.addedNodes.forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&t(e)}))}))})).observe(document.body,{childList:!0,subtree:!0})}document.addEventListener("4chanXInitFinished",a),setTimeout((function(){n(5),isChanX||("loading"!==document.readyState?a():document.addEventListener("DOMContentLoaded",a))}),0)},function(e,t,n){(function(t){const a={settings:n(9),events:n(71),actions:n(72),colorpicker:n(73),controls:n(75),display:n(76),footer:n(82),header:n(83),hotkeys:n(84),inline:n(85),minimised:n(86),playlist:n(87),position:n(91),theme:n(92),threads:n(96),tools:n(101),userTemplate:n(109)},l=window.Player=e.exports={ns:ns,components:a,audio:new Audio,sounds:[],isHidden:!0,container:null,ui:{},_public:[],config:{},$:(...e)=>l.container&&l.container.querySelector(...e),$all:(...e)=>l.container&&l.container.querySelectorAll(...e),initialize:async function(){if(!l.initialized){l.initialized=!0;try{l.audio.dataset.id="main",l.sounds=[];for(let e in a)a[e].initialize&&await a[e].initialize();l.display.createPlayerButton(),await l.display.render(),document.addEventListener("PlayerEvent",e=>{if(e.detail.action&&l._public.includes(e.detail.action))return t.get(l,e.detail.action).apply(window,e.detail.arguments)})}catch(e){throw l.logError("There was an error initialzing the sound player. Please check the console for details.",e),e}}},getHandler:function(e){return"string"==typeof e?t.get(l,e):e},compareIds:function(e,t){const[n,a]=e.split(":"),[l,r]=t.split(":"),s=n-l;return 0!==s?s:a-r},acceptedSound:function({src:e,imageMD5:t}){try{const n=new URL(e),a=n.hostname.toLowerCase();return!l.config.filters.find(e=>e===t||e===a+n.pathname)&&l.config.allow.find(e=>a===e||a.endsWith("."+e))}catch(e){return!1}},syncTab:(e,t)=>"undefined"!=typeof GM_addValueChangeListener&&GM_addValueChangeListener(e,(e,n,a,l)=>{l&&t(a,n)}),logError:function(e,t,n){console.error("[4chan sounds player]",e,t),t instanceof PlayerError&&(t.error&&console.error("[4chan sound player]",t.error),e=t.reason,n=t.type||n),l.alert(e,n||"error",5)},alert:function(e,n="info",a=5){isChanX?(e=t.element(`<span>${e}</span`),document.dispatchEvent(new CustomEvent("CreateNotification",{bubbles:!0,detail:{content:e,type:n,lifetime:a}}))):"undefined"!=typeof Feedback&&Feedback.showMessage(e,"info"===n?"notify":"error",1e3*a)}};for(let e in a)l[e]=a[e],(l[e].atRoot||[]).forEach(t=>l[t]=l[e][t]),(l[e].public||[]).forEach(t=>{l._public.push((l[e].atRoot||[]).includes(t)?t:`${e}.${t}`)})}).call(this,n(0))},function(e,t,n){(function(t){const a=n(3),l=n(17),r=n(18);e.exports={atRoot:["set"],public:["set","export","import","reset","load"],hosts:r,template:n(20),settingTemplate:n(66),inputTemplates:{checkbox:n(67),input:n(68),select:n(69),textarea:n(70)},changelog:"https://github.com/rcc11/4chan-sounds-player/releases",groups:a.reduce((e,t)=>(t.displayGroup&&(e[t.displayGroup]||(e[t.displayGroup]=[]),e[t.displayGroup].push(t)),e),{}),initialize:async function(){Player.settings.view="Display",Player.theme.applyBoardTheme({bypassRender:!0}),await Player.settings.load(await GM.getValue("settings")||{},{applyDefault:!0,bypassAll:!0}),Player.config.showUpdatedNotification&&Player.config.VERSION&&"3.4.0-380d280"!==Player.config.VERSION&&Player.alert(`4chan Sounds Player has been updated to <a href="${Player.settings.changelog}" target="_blank">version 3.4.0-380d280</a>.`),Player.on("hide",(function(){Player.config.pauseOnHide&&Player.pause()})),Player.syncTab("settings",e=>Player.settings.load(e,{bypassSave:!0,applyDefault:!0,ignore:["viewStyle"]})),Player.on("rendered",Player.settings.setChangeListeners)},render:function(){const e=Player.$(`.${ns}-settings`);t.elementHTML(e,Player.settings.template()),Player.settings.setChangeListeners()},renderSetting:function(e){const n=Player.$(`.${ns}-setting[data-property="${e.property}"]`),a=t.elementBefore(Player.settings.settingTemplate(e),n);n.parentNode.removeChild(n),Player.settings.setChangeListeners(a)},set:function(e,n,{bypassAll:a,bypassValidation:l,bypassSave:r,bypassRender:s,silent:o,bypassStylesheet:i,settingConfig:d}={}){d=d||Player.settings.findDefault(e);const c=t.get(Player.config,e);if(l||!t.isEqual(c,n))return t.set(Player.config,e,n),a||(!i&&d&&d.updateStylesheet&&Player.display.updateStylesheet(),!o&&Player.trigger("config",e,n,c),!o&&Player.trigger("config:"+e,n,c),!r&&Player.settings.save(),!s&&d.displayGroup&&Player.settings.renderSetting(d),(!s||"self"===s)&&d.dependentRender&&d.dependentRender.forEach(e=>Player.settings.renderSetting(Player.settings.findDefault(e)))),[c,n]},reset:function(e,t){let n=Player.settings.findDefault(e);Player.set(e,n.default,{...t,settingConfig:n})},load:async function(e,n={}){"string"==typeof e&&(e=JSON.parse(e));const l={};a.forEach((function a(r){if(r.settings)return r.settings.forEach(e=>a({property:r.property,default:r.default,...e}));if(n.ignore&&n.ignore.includes(r.property))return;let s=t.get(e,r.property,n.applyDefault?r.default:void 0);if(void 0!==s){r.mix&&(s={...r.default,...s||{}});const e=Player.set(r.property,s,{bypassAll:!0,settingConfig:r});e&&(l[r.property]=e)}})),Object.entries(await Player.settings.migrate(e.VERSION)).forEach(([e,[t,n]])=>{l[e]=[l[e]?l[e][1]:t,n]}),n.bypassAll||(!n.bypassStylesheet&&Player.display.updateStylesheet(),!n.silent&&Object.entries(l).forEach(([e,[t,n]])=>{Player.trigger("config",e,n,t),Player.trigger("config:"+e,n,t)}),!n.bypassSave&&Player.settings.save(),!n.bypassRender&&Player.settings.render())},save:function(){try{const e=a.reduce((function e(n,a){if(a.settings)a.settings.forEach(t=>e(n,{property:a.property,default:a.default,...t}));else{let e=t.get(Player.config,a.property);void 0===e||t.isEqual(e,a.default)||(a.mix&&(e=Object.keys(e).reduce((n,l)=>(t.isEqual(a.default[l],e[l])||(n[l]=e[l]),n),{})),t.set(n,a.property,e))}return n}),{});return e.viewStyle=Player.playlist._lastView,e.VERSION="3.4.0-380d280",GM.setValue("settings",JSON.stringify(e))}catch(e){Player.logError("There was an error saving the sound player settings.",e)}},migrate:async function(e){if(!e||"3.4.0-380d280"===e)return{};const t={};for(let n=0;n<l.length;n++){let a=l[n];if(Player.settings.compareVersions(e,a.version)<0)try{console.log("[4chan sound player] Migrate:",a.name),Object.entries(await a.run()).forEach(([e,[n,a]])=>{t[e]=[n,t[e]?t[e][1]:a]})}catch(e){console.error(e)}}return t},compareVersions:function(e,t){const[n,a]=e.split("-"),[l,r]=t.split("-"),s=n.split("."),o=l.split(".");for(let e=0;e<3;e++){if(+s[e]>+o[e])return 1;if(+s[e]<+o[e])return-1}return a!==r},findDefault:function(e){let t;return a.find((function(n){if(n.property===e)return t=n;if(n.settings){let a=n.settings.find(t=>t.property===e);return a&&(t={...n,actions:null,settings:null,description:null,...a,isSubSetting:!0})}return!1})),t||{property:e}},toggle:function(e){let t=Player.$(`.${ns}-settings :focus`);if(t&&t.blur(),!e&&"settings"===Player.config.viewStyle)return Player.playlist.restore();"settings"!==Player.config.viewStyle&&Player.display.setViewStyle("settings"),e&&e!==Player.settings.view&&Player.settings.showGroup(e)},showGroup:function(e){Player.settings.view=e;const t=Player.$(`.${ns}-settings-group.active`),n=Player.$(`.${ns}-settings-tab.active`);t&&t.classList.remove("active"),n&&n.classList.remove("active"),Player.$(`.${ns}-settings-group[data-group="${e}"]`).classList.add("active"),Player.$(`.${ns}-settings-tab[data-group="${e}"]`).classList.add("active")},import:async function(){const e=t.element('<input type="file">'),n=async()=>{let t;try{t=await(await fetch(URL.createObjectURL(e.files[0]))).json()}catch(t){Player.logError(`Expected a JSON config file and got ${e.files[0].type}.`,t,"warning")}e.removeEventListener("change",n),Player.settings.load(t)};e.addEventListener("change",n),e.click()},export:async function(e){const n=e&&e.shiftKey?JSON.stringify(Player.config,null,4):await GM.getValue("settings")||"{}",a=new Blob([n],{type:"application/json"}),l=t.element(`<a href="${URL.createObjectURL(a)}" download="4chan-sp-config.json" rel="noopener" target="_blank"></a>`);l.click(),URL.revokeObjectURL(l.href)},setChangeListeners:function(e){const t=e||Player.$(`.${ns}-settings`);t.querySelectorAll(`.${ns}-settings input, .${ns}-settings textarea`).forEach(e=>{e.addEventListener("focusout",Player.settings.handleChange)}),t.querySelectorAll(`.${ns}-settings input[type=checkbox], .${ns}-settings select`).forEach(e=>{e.addEventListener("change",Player.settings.handleChange)})},handleChange:function(e){try{const n=e.currentTarget,a=n.getAttribute("data-property");if(!a)return;let l=Player.settings.findDefault(a);const r=t.get(Player.config,a);let s=n["checkbox"===n.getAttribute("type")?"checked":"value"];l.parse&&(s=Player.getHandler(l.parse)(s,r,e)),t.isEqual(r,s,!l.looseCompare)||Player.set(a,s,{bypassValidation:!0,bypassRender:"self",settingConfig:l})}catch(e){Player.logError("There was an error updating the setting.",e)}},handleKeyChange:function(e){e.preventDefault(),"Shift"!==e.key&&"Control"!==e.key&&"Meta"!==e.key&&(e.currentTarget.value=Player.hotkeys.stringifyKey(e))}}}).call(this,n(0))},function(e,t){e.exports=[{property:"autoshow",default:!0,title:"Autoshow",description:"Automatically show the player when the thread contains sounds.",displayGroup:"Display"},{property:"pauseOnHide",default:!0,title:"Pause On Hide",description:"Pause the player when it's hidden.",displayGroup:"Display",allowInTheme:!0},{property:"showUpdatedNotification",default:!0,title:"Show Update Notifications",description:"Show notifications when the player is successfully updated.",displayGroup:"Display"},{property:"hoverImages",title:"Hover Images",default:!1,allowInTheme:!0},{title:"Controls",displayGroup:"Display",allowInTheme:!0,settings:[{property:"preventControlWrapping",title:"Prevent Wrapping",description:"Hide controls to prevent wrapping when the player is too small",default:!0},{property:"controlsHideOrder",title:"Hide Order",description:"Order controls are hidden in to prevent wrapping. Available controls are previous, next, seek-bar, time, duration, volume, mute, volume-bar, and fullscreen.",default:["fullscreen","duration","volume-bar","seek-bar","time","previous"],displayMethod:"textarea",inlineTextarea:!0,format:e=>e.join("\n"),parse:e=>e.split(/\s+/)}]},{title:"Minimised Display",description:"Optional displays for when the player is minimised.",displayGroup:"Display",allowInTheme:!0,settings:[{property:"pip",title:"Thumbnail",description:"Display a fixed thumbnail of the playing sound in the bottom right of the thread.",default:!0},{property:"maxPIPWidth",title:"Max Width",description:"Maximum width for the thumbnail.",default:"150px",updateStylesheet:!0},{property:"chanXControls",title:"4chan X Header Controls",description:"Show playback controls in the 4chan X header. The display can be customised in Settings>Theme.",displayMethod:isChanX||null,default:"closed",options:{always:"Always",closed:"Only with the player closed",never:"Never"}}]},{title:"Thread",displayGroup:"Display",allowInTheme:!0,settings:[{property:"autoScrollThread",description:"Automatically scroll the thread to posts as sounds play.",title:"Auto Scroll",default:!1},{property:"limitPostWidths",description:"Limit the width of posts so they aren't hidden under the player.",title:"Limit Post Widths",default:!0},{property:"minPostWidth",title:"Minimum Width",default:"50%"}]},{property:"threadsViewStyle",title:"Threads View",description:"How threads in the threads view are listed.",settings:[{title:"Display",default:"table",options:{table:"Table",board:"Board"}}]},{title:"Colors",displayGroup:"Display",property:"colors",updateStylesheet:!0,allowInTheme:!0,class:ns+"-colorpicker-input",attrs:'@focusout="colorpicker._updatePreview" @click="colorpicker.create:prevent:stop"',displayMethod:({value:e,attrs:t})=>`<div class="${ns}-col">\n\t\t\t\t<input type="text" ${t} value="${e}">\n\t\t\t\t<div class="${ns}-cp-preview" style="background: ${e}" @click="colorpicker.create:prevent:stop"></div>\n\t\t\t</div>`,actions:[{title:"Match Theme",handler:"theme.forceBoardTheme:prevent"}],settings:[{property:"colors.text",default:"#000000",title:"Text"},{property:"colors.background",default:"#d6daf0",title:"Background"},{property:"colors.border",default:"#b7c5d9",title:"Border"},{property:"colors.odd_row",default:"#d6daf0",title:"Odd Row"},{property:"colors.even_row",default:"#b7c5d9",title:"Even Row"},{property:"colors.playing",default:"#98bff7",title:"Playing Row"},{property:"colors.dragging",default:"#c396c8",title:"Dragging Row"},{property:"colors.controls_background",default:"#3f3f44",title:"Controls Background",description:"The controls container element background.",actions:[{title:"Reset",handler:'settings.reset("colors.controls_background"):prevent'}]},{property:"colors.controls_inactive",default:"#FFFFFF",title:"Control Items",description:"The playback controls and played bar.",actions:[{title:"Reset",handler:'settings.reset("colors.controls_inactive"):prevent'}]},{property:"colors.controls_active",default:"#00b6f0",title:"Focused Control Items",description:"The control items when hovered.",actions:[{title:"Reset",handler:'settings.reset("colors.controls_active"):prevent'}]},{property:"colors.controls_empty_bar",default:"#131314",title:"Volume/Seek Bar Background",decscription:"The background of the volume and seek bars.",actions:[{title:"Reset",handler:'settings.reset("colors.controls_empty_bar"):prevent'}]},{property:"colors.controls_loaded_bar",default:"#5a5a5b",title:"Loaded Bar Background",description:"The loaded bar within the seek bar.",actions:[{title:"Reset",handler:'settings.reset("colors.controls_loaded_bar"):prevent'}]},{property:"colors.page_background",default:"rgb(238, 242, 255)",displayMethod:null,allowInTheme:!1}]}]},function(e,t){e.exports=[{property:"shuffle",title:"Shuffle",displayGroup:"Playback",default:!1},{property:"repeat",title:"Repeat",displayGroup:"Playback",default:"all",options:{all:"All",one:"One",none:"None"}},{property:"preventSleep",title:"Prevent Sleep",displayGroup:"Playback",description:"Prevent sleeping while audio is playing. This only works when the browser and tab are in the foreground.",default:!0},{title:"Inline Player",displayGroup:"Playback",settings:[{property:"playExpandedImages",title:"Expanded Image",description:"Play audio when sound images are expanded.",default:!0,dependentRender:["expandedControls"]},{property:"expandedControls",title:"Expanded Controls",description:"Show playback controls for expanded image audio.",default:!0,attrs:()=>Player.config.playExpandedImages?"":"disabled"},{property:"playHoveredImages",title:"Hover Image",description:"Play audio when sound hover images are shown. This applies to hover images displayed by the native extention or 4chan X.",default:!0}]}]},function(e,t){e.exports=[{property:"addWebm",title:"Include WebM",description:"Whether to add all WebM files regardless of a sound filename.",default:"soundBoards",displayGroup:"Filter",options:{always:"Always",soundBoards:"Boards with sound",never:"Never"}},{property:"allow",title:"Allowed Hosts",description:"Which domains sounds are allowed to be loaded from.",default:["4cdn.org","catbox.moe","dmca.gripe","lewd.se","pomf.cat","zz.ht"],actions:[{title:"Reset",handler:'settings.reset("allow"):prevent'}],displayGroup:"Filter",displayMethod:"textarea",format:e=>e.join("\n"),parse:e=>e.split("\n")},{property:"filters",default:["# Image MD5 or sound URL"],title:"Filters",description:"List of URLs or image MD5s to filter, one per line.\nLines starting with a # will be ignored.",actions:[{title:"Reset",handler:'settings.reset("filters"):prevent'}],displayGroup:"Filter",displayMethod:"textarea",format:e=>e.join("\n"),parse:e=>e.split("\n")}]},function(e,t){const n="mediaSession"in navigator,a={displayGroup:"Keybinds",format:"hotkeys.stringifyKey",parse:"hotkeys.parseKey",attrs:'@keydown="settings.handleKeyChange"',property:"hotkey_bindings",allowInTheme:!0};e.exports=[{title:"Keybinds",displayGroup:"Keybinds",settings:[{property:"hotkeys",default:"open",title:"Enabled",options:{always:"Always",open:"Only with the player open",never:"Never"}},{property:"hardwareMediaKeys",title:"Hardware Media Keys",displayGroup:"Keybinds",description:"Enable playback control via hardware media keys."+(n?"":" Your browser does not support this feature."),default:n,attrs:!n&&"disabled"}]},{title:"Playback",themeFieldTitle:"Playback Keybinds",...a,settings:[{property:"hotkey_bindings.playPause",title:"Play/Pause",keyHandler:"togglePlay",ignoreRepeat:!0,default:{key:" "}},{property:"hotkey_bindings.previous",title:"Previous",keyHandler:()=>Player.previous({force:!0}),ignoreRepeat:!0,default:{key:"arrowleft"}},{property:"hotkey_bindings.next",title:"Next",keyHandler:()=>Player.next({force:!0}),ignoreRepeat:!0,default:{key:"arrowright"}},{property:"hotkey_bindings.previousGroup",title:"Previous Group",keyHandler:()=>Player.previous({force:!0,group:!0}),ignoreRepeat:!0,default:{shiftKey:!0,key:"arrowleft"}},{property:"hotkey_bindings.nextGroup",title:"Next Group",keyHandler:()=>Player.next({force:!0,group:!0}),ignoreRepeat:!0,default:{shiftKey:!0,key:"arrowright"}},{property:"hotkey_bindings.volumeUp",title:"Volume Up",keyHandler:"actions.volumeUp",default:{shiftKey:!0,key:"arrowup"}},{property:"hotkey_bindings.volumeDown",title:"Volume Down",keyHandler:"actions.volumeDown",default:{shiftKey:!0,key:"arrowdown"}}]},{title:"Display",themeFieldTitle:"Display Keybinds",...a,settings:[{property:"hotkey_bindings.closePlayer",title:"Close",keyHandler:"display.close",default:{key:""}},{property:"hotkey_bindings.togglePlayer",title:"Show/Hide",keyHandler:"display.toggle",default:{key:"h"}},{property:"hotkey_bindings.toggleFullscreen",title:"Toggle Fullscreen",keyHandler:"display.toggleFullScreen",default:{key:""}},{property:"hotkey_bindings.togglePlaylist",title:"Toggle Playlist",keyHandler:"playlist.toggleView",default:{key:""}},{property:"hotkey_bindings.toggleSearch",title:"Toggle Playlist Search",keyHandler:()=>Player.set("showPlaylistSearch",!Player.config.showPlaylistSearch),default:{key:""}},{property:"hotkey_bindings.scrollToPlaying",title:"Jump To Playing",keyHandler:()=>Player.playlist.scrollToPlaying(),default:{key:""}},{property:"hotkey_bindings.toggleHoverImages",title:"Toggle Hover Images",keyHandler:"playlist.toggleHoverImages",default:{key:""}},{property:"hotkey_bindings.toggleAutoScroll",title:"Toggle Thread Scroll",keyHandler:()=>Player.set("autoScrollThread",!Player.config.autoScrollThread),default:{key:""}}]},{title:"Theme",themeFieldTitle:"Theme Keybinds",...a,settings:[{property:"hotkey_bindings.nextTheme",title:"Next Theme",keyHandler:"theme.next",default:{key:""}},{property:"hotkey_bindings.previousTheme",title:"Previous Theme",keyHandler:"theme.previous",default:{key:""}},{property:"hotkey_bindings.switchTheme",title:"Select Theme",keyHandler:"theme.handleSwitch",default:[],displayMethod:"theme.themeKeybindsTemplate",parse:"theme.parseSwitch",format:null}]}]},function(e,t,n){e.exports=[{property:"savedThemes",title:"Saved Themes",actions:[{title:"Restore Defaults",handler:"theme.restoreDefaults:prevent"},{title:"Save Current",handler:"theme.showSaveOptions:prevent:stop"}],displayGroup:"Theme",displayMethod:"theme.savedThemesTemplate",mix:!0,default:n(15)},{property:"savedThemesOrder",default:[]},{property:"selectedTheme",default:"Default"},{property:"headerTemplate",title:"Header",actions:[{title:"Reset",handler:'settings.reset("headerTemplate"):prevent'}],default:"repeat-button shuffle-button hover-images-button playlist-button\nsound-title-marquee\nview-menu-button add-button theme-menu-button close-button",displayGroup:"Theme",displayMethod:"textarea",themeField:!0},{property:"rowTemplate",title:"Row",actions:[{title:"Reset",handler:'settings.reset("rowTemplate"):prevent'}],default:"sound-title h:{menu-button}",displayGroup:"Theme",displayMethod:"textarea",themeField:!0},{property:"footerTemplate",title:"Footer",actions:[{title:"Reset",handler:'settings.reset("footerTemplate"):prevent'}],default:`playing-button:"sound-index /&nbsp;" sound-count sounds\n<div class="fcsp-col"></div>\np:{\n\t\tpost-link\n\t\tOpen [ image-link sound-link ]\n\t\tDownload [ dl-image-button dl-sound-button ]\n}\n<div class="${ns}-expander" data-direction="se"></div>\n`,displayGroup:"Theme",displayMethod:"textarea",attrs:'style="height:9em;"',themeField:!0},{property:"chanXTemplate",title:"4chan X Header",default:'p:{\n\tpost-link:"sound-title"\n\tprev-button\n\tplay-button\n\tnext-button\n\tsound-current-time / sound-duration\n}',actions:[{title:"Reset",handler:'settings.reset("chanXTemplate"):prevent'}],displayGroup:"Theme",displayMethod:"textarea",attrs:'style="height:9em;"',themeField:!0},{property:"customCSS",title:"Custom CSS",default:"",displayGroup:"Theme",displayMethod:"textarea",attrs:'style="height:9em"',themeField:!0}]},function(e,t){e.exports={"Fixed Playlist":{chanXControls:"always",headerTemplate:'<div class="playlist-resizer fcsp-expander" data-direction="w" data-bypass-save="true" data-bypass-position="true" data-allow-offscreen="true"></div>\nrepeat-button shuffle-button hover-images-button playlist-button\nsound-title-marquee\nview-menu-button add-button theme-menu-button close-button',rowTemplate:'sound-title\np:{<img class="fcsp-row-image" src="sound-imageOrThumb">}\n<img class="fcsp-row-thumb" src="sound-thumb">',customCSS:'/* Fix the player to the right at full height (minus the 4chan X header) */\n#fcsp-container[data-view-style="playlist"] {\n\t/* Fixed width *\\/\n\twidth: 25rem !important;/**/\n\theight: auto !important;\n\ttop: $config[offsetTop] !important;\n\tright: 0px !important;\n\tbottom: $config[offsetBottom] !important;\n\tleft: auto !important;\n\theight: auto !important;\n\tmax-height: calc(100% - 24px);\n\tbackground: none !important;\n\tborder: none !important;\n}\n\n/* Hide things when the playlist is open */\n/* Hide the image with the playlist open, unless it\'s a webm.\n * To show gifs as well change playing-video to playing-animated. */\n#fcsp-container[data-view-style="playlist"]:not(.playing-video) .fcsp-image-link,/**/ \n#fcsp-container[data-view-style="playlist"] .fcsp-controls,\n#fcsp-container[data-view-style="playlist"] .fcsp-hover-image,\n#fcsp-container[data-view-style="playlist"] .fcsp-footer,\n#fcsp-container[data-view-style="fullscreen"] .fcsp-row-thumb,\n#fcsp-container[data-view-style="fullscreen"] .fcsp-row-image {\n\tdisplay: none !important;\n}\n/* Header is shown with adjustments to handle the changed container style */\n/* Opacity and absolute position are used to auto hide the header */\n#fcsp-container[data-view-style="playlist"] .fcsp-header {\n\tposition: absolute !important;\n\topacity: 0;\n\tz-index: 9;\n\tcursor: inherit;\n\tbackground: $config[colors.background];\n\tborder-width: 0 1px 1px 0;\n\ttransition: all .3s ease;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-header:hover {\n\topacity: 1;\n}\n\n/* Don\'t show a scrollbar for the playlist for aesthetic reasons */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-container {\n\tscrollbar-width: none;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-list-container::-webkit-scrollbar {\n\tdisplay: none;\n}\n\n/* Chunky playlist items, with no background and a squared thumbnail image. */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item {\n\tbackground: none !important;\n\theight: auto !important;\n\ttext-align: right;\n\talign-items: center;\n\ttransition: all .5s ease;\n\tfont-size: 1rem;\n\tcolor: $config[colors.text];\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-row-thumb, #fcsp-container[data-view-style="playlist"] .fcsp-row-image {\n\theight: 3rem;\n\twidth: 3rem;\n\tobject-fit: cover;\n\ttransition: all .5s ease;\n}\n/* Show a gradient background and increase the size of list items when you hover over them. */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item:hover {\n\tline-height: calc(1.5rem + 4px);\n\tfont-size: 1.5rem;\n\tfont-weight: bold;\n\tbackground-image: radial-gradient(circle at -50%, #0000 70%, $config[colors.odd_row]) !important;\n\tcolor: $config[colors.background];\n\t-webkit-text-stroke: 1px black;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item:hover .fcsp-row-thumb {\n\theight: 4rem;\n\twidth: 4rem;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-row-image {\n\theight: 7rem;\n\twidth: 7rem;\n}\n/* Add a gradient background to the playing item, make the text bigger, and style the text. */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item.playing {\n\tbackground-image: radial-gradient(circle at -50%, #0000 70%, $config[colors.playing]) !important;\n\tpadding-left: 2px;\n\tfont-weight: bold;\n\tfont-size: 1.5rem;\n\tcolor: $config[colors.page_background];\n\t-webkit-text-stroke: 1px black;\n\ttext-shadow: 0 0 2px $config[colors.border];\n}\n/* Swap the thumb image with the full image for the playing item. */\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item:not(.playing) .fcsp-row-image {\n\tdisplay: none;\n}\n#fcsp-container[data-view-style="playlist"] .fcsp-list-item.playing .fcsp-row-thumb {\n\tdisplay: none;\n}\n/* Same gradient background style for dragging items. */\n#fcsp-container[data-view-style="playlist"] .fcsp-dragging {\n\tbackground-image: radial-gradient(circle at -50%, #0000 70%, $config[colors.dragging]) !important\n}\n\n/* Add a resizer to the left of the header when the playlist is open. */\n.playlist-resizer {\n\topacity: 1 !important;\n\tmargin: 0 !important;\n\twidth: .25rem !important;\n\theight: auto !important;\n\tbackground-color: $config[colors.border] !important;\n\tposition: absolute;\n\tleft: -.25rem !important;\n\ttop: 0 !important;\n\tbottom: 0 !important;\n\tborder-radius: 100% 0 0 100%;\n\tcursor: ew-resize !important;\n\tdisplay: none;\n\ttransition: all .5s ease;\n}\n.playlist-resizer:hover {\n\twidth: .4rem !important;\n\tleft: -.4rem !important;\n}\n#fcsp-container[data-view-style="playlist"] .playlist-resizer {\n\tdisplay: block;\n}\n/* Hide the default resizers */\n#fcsp-container[data-view-style="playlist"] .fcsp-expander:not(.playlist-resizer) {\n\tdisplay: none;\n}\n'}}},function(e,t){e.exports=[{property:"defaultUploadHost",default:"catbox",parse:"settings.hosts.setDefault"},{property:"uploadHosts",title:"Hosts",actions:[{title:"Add",handler:"settings.hosts.add:prevent"},{title:"Restore Defaults",handler:"settings.hosts.restoreDefaults:prevent"}],displayGroup:"Hosts",displayMethod:()=>`<div class="${ns}-host-inputs">${Object.entries(Player.config.uploadHosts).map(Player.settings.hosts.template).join("")}</div>`,parse:"settings.hosts.parse",looseCompare:!0,dismissTextId:"uplodHostSettings",dismissRestoreText:"Show Help",text:"Properties<br><strong>Name</strong>: A unique identifier.<br><strong>URL</strong>: The URL to post the file to.<br><strong>Response Path/Match</strong>: A key path or regular expression to locate the uploaded filename in the response.<br><strong>File URL Format</strong>: The URL format for uploaded sounds. %s is replaced with the result of response path/match if given or the full response.<br><strong>Data</strong>: The form data for the upload (as JSON). Specify the file using $file.",mix:!0,default:{catbox:{default:!0,url:"https://catbox.moe/user/api.php",data:{reqtype:"fileupload",fileToUpload:"$file",userhash:null},filenameLength:29},pomf:{url:"https://pomf.cat/upload.php",data:{"files[]":"$file"},responsePath:"files.0.url",filenameLength:23},zz:{url:"https://zz.ht/api/upload",responsePath:"files.0.url",data:{"files[]":"$file"},headers:{token:null},filenameLength:19},lewd:{url:"https://lewd.se/upload",data:{file:"$file"},headers:{token:null,shortUrl:!0},responsePath:"data.link",filenameLength:30}}}]},function(e,t){e.exports=[{version:"3.0.0",name:"hosts-filename-length",async run(){const e=Player.settings.findDefault("uploadHosts").default;return Object.keys(e).forEach(t=>{Player.config.uploadHosts[t].filenameLength=e[t].filenameLength}),{}}},{version:"3.3.0",name:"sound-name-title-swap",async run(){const e=Player.config,t={};return["headerTemplate","rowTemplate","footerTemplate","chanXTemplate","customCSS"].forEach(n=>{/sound-name/.test(e[n])&&(t[n]=[e[n],e[n]=e[n].replace(/sound-name/g,"sound-title")])}),t}},{version:"3.4.0",name:"disable-inline-player-for-existing-users",run:async()=>(Player.config.playExpandedImages=!1,Player.config.playHoveredImages=!1,{playExpandedImages:[!0,!1],playHoveredImages:[!0,!1]})}]},function(e,t,n){(function(t){const a=n(19);e.exports={template:a,fields:{name:"Name",url:"URL",responsePath:"Response Path",responseMatch:"Response Match",soundUrl:"File URL Format"},parse:function(e,t,n){t={...t};const a=n.currentTarget.closest(`.${ns}-host-input`);let l=a.getAttribute("data-host-name"),r=t[l]={...t[l]};const s=n.currentTarget.getAttribute("name");try{if("name"===s&&e!==l){if(!e||t[e])throw new PlayerError("A unique name for the host is required.","warning");a.setAttribute("data-host-name",e),t[e]=r,delete t[l],l=e}if("url"===s||"soundUrl"===s)try{("url"===s||e)&&new URL(e)}catch(e){throw new PlayerError("The value must be a valid URL.","warning")}if("data"===s)try{e=JSON.parse(e)}catch(e){throw new PlayerError("The data must be valid JSON.","warning")}if("headers"===s)try{e=e?JSON.parse(e):void 0}catch(e){throw new PlayerError("The headers must be valid JSON.","warning")}}catch(e){throw r.invalid=!0,a.classList.add("invalid"),e}void 0===e?delete r[s]:r[s]=e;try{const e=a.querySelector("[name=soundUrl]").value,t=a.querySelector("[name=headers]").value;!(l&&JSON.parse(a.querySelector("[name=data]").value)&&new URL(a.querySelector("[name=url]").value))||e&&!new URL(e)||t&&!JSON.parse(t)||(delete r.invalid,a.classList.remove("invalid"))}catch(e){}return t},add:function(){const e=Player.config.uploadHosts,n=Player.$(`.${ns}-host-inputs`);let l="New Host",r=1;for(;Player.config.uploadHosts[l];)l=l+" "+ ++r;e[l]={invalid:!0,data:{file:"$file"}},n.children[0]?t.elementBefore(a([l,e[l]]),n.children[0]):t.element(a([l,e[l]]),n),Player.settings.set("uploadHosts",e,{bypassValidation:!0,bypassRender:!0,silent:!0})},remove:function(e){const t=Player.config.uploadHosts,n=e.currentTarget.closest(`.${ns}-host-input`),a=n.getAttribute("data-host-name");Player.settings.findDefault("uploadHosts").default[a]?t[a]=null:delete t[a],n.parentNode.removeChild(n),Player.settings.set("uploadHosts",t,{bypassValidation:!0,bypassRender:!0})},setDefault:function(e,t,n){const a=n.currentTarget.closest(`.${ns}-host-input`).getAttribute("data-host-name");return a===Player.config.defaultUploadHost||Object.keys(Player.config.uploadHosts).forEach(e=>{const t=Player.$(`.${ns}-host-input[data-host-name="${e}"] input[data-property="defaultUploadHost"]`);t&&(t.checked=e===a)}),a},restoreDefaults:function(){Object.assign(Player.config.uploadHosts,Player.settings.findDefault("uploadHosts").default),Player.set("uploadHosts",Player.config.uploadHosts,{bypassValidation:!0})}}}).call(this,n(0))},function(e,t){e.exports=(e={})=>e[1]?`\n<div class="${ns}-row ${ns}-col ${ns}-host-input ${e[1].invalid?"invalid":""}" data-host-name="${e[0]}">\n\t<div class="${ns}-row ${ns}-host-controls">\n\t\t<div class="${ns}-col-auto">\n\t\t\t<label>\n\t\t\t\t<input\n\t\t\t\t\ttype="checkbox"\n\t\t\t\t\tdata-property="defaultUploadHost"\n\t\t\t\t\t${Player.config.defaultUploadHost===e[0]?"checked":""}\n\t\t\t\t/>\n\t\t\t\tDefault\n\t\t\t</label>\n\t\t</div>\n\t\t<div class="${ns}-col-auto">\n\t\t\t<a href="#" class="${ns}-heading-action" @click="settings.hosts.remove:prevent">\n\t\t\t\tRemove\n\t\t\t</a>\n\t\t</div>\n\t</div>\n\t<div class="${ns}-row">\n\t\t${Object.entries(Player.settings.hosts.fields).map(([t,n])=>`\n\t\t\t<div class="${ns}-col">\n\t\t\t\t<input\n\t\t\t\t\ttype="text"\n\t\t\t\t\tdata-property="uploadHosts"\n\t\t\t\t\tname="${t}"\n\t\t\t\t\tvalue="${("name"===t?e[0]:e[1][t])||""}"\n\t\t\t\t\tplaceholder="${n}"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t`).join("")}\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col">\n\t\t\t<textarea data-property="uploadHosts" name="data" placeholder="Data (JSON)">${JSON.stringify(e[1].data,null,4)}</textarea>\n\t\t</div>\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col">\n\t\t\t<textarea data-property="uploadHosts" name="headers" placeholder="Headers (JSON)">${e[1].headers?JSON.stringify(e[1].headers,null,4):""}</textarea>\n\t\t</div>\n\t</div>\n</div>`:""},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-settings-tabs ${ns}-row">\n\t<div class="${ns}-settings-tab-group ${ns}-col-auto">\n\t\t<a href="#" class="${ns}-settings-reset-all ${ns}-settings-tab"\n\t\t\t@click='settings.load({},{"applyDefault":true,"ignore":["viewStyle"]}):prevent'\n\t\t\ttitle="Reset all settings to their default values.">\n\t\t\t${t.reboot}\n\t\t</a>\n\t\t<a href="#" class="${ns}-settings-export ${ns}-settings-tab"\n\t\t\t@click="settings.export:prevent"\n\t\t\ttitle="Export. Shift click to export all settings. Otherwise only modified settings are included in the export.">\n\t\t\t${t.boxArrowRight}\n\t\t</a>\n\t\t<a href="#" class="${ns}-settings-import ${ns}-settings-tab"\n\t\t\t@click="settings.import:prevent"\n\t\t\ttitle="Import. Settings not included in the import will be left as their current value.">\n\t\t\t${t.boxArrowInLeft}\n\t\t</a>\n\t\t<a href="${Player.settings.changelog}" class="${ns}-settings-tab" target="_blank" title="v3.4.0-380d280">\n\t\t\t${t.github}\n\t\t</a>\n\t</div>\n\t<div class="${ns}-settings-tab-group ${ns}-col-auto">\n\t\t${Object.keys(Player.settings.groups).map(e=>`<a href="#" class="${ns}-settings-tab ${Player.settings.view!==e?"":"active"}"\n\t\t\t\t@click='settings.showGroup("${e}"):prevent'\n\t\t\t\tdata-group="${e}">\n\t\t\t\t${e}\n\t\t\t</a>`).join(" | ")}\n\t</div>\n</div>\n${Object.entries(Player.settings.groups).map(([e,t])=>`\n\t<div class="${ns}-settings-group ${Player.settings.view!==e?"":"active"}" data-group="${e}">\n\t\t${t.map(Player.settings.settingTemplate).join("")}\n\t</div>\n`).join("")}`}).call(this,n(1))},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-clockwise" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>\n  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-collapse" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707l-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-expand" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-repeat" viewBox="0 0 16 16">\n  <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>\n  <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>\n  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>\n  <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-right-quote" viewBox="0 0 16 16">\n  <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"/>\n  <path d="M7.066 4.76A1.665 1.665 0 0 0 4 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112zm4 0A1.665 1.665 0 0 0 8 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n  <path d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.235.235 0 0 1 .02-.022z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-up" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M7.646 4.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 5.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">\n  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-gear" viewBox="0 0 16 16">\n  <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"/>\n  <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-image" viewBox="0 0 16 16">\n  <path d="M6.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>\n  <path d="M14 14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5L14 4.5V14zM4 1a1 1 0 0 0-1 1v10l2.224-2.224a.5.5 0 0 1 .61-.075L8 11l2.157-3.02a.5.5 0 0 1 .76-.063L13 10V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-earmark-music" viewBox="0 0 16 16">\n  <path d="M11 6.64a1 1 0 0 0-1.243-.97l-1 .25A1 1 0 0 0 8 6.89v4.306A2.572 2.572 0 0 0 7 11c-.5 0-.974.134-1.338.377-.36.24-.662.628-.662 1.123s.301.883.662 1.123c.364.243.839.377 1.338.377.5 0 .974-.134 1.338-.377.36-.24.662-.628.662-1.123V8.89l2-.5V6.64z"/>\n  <path d="M14 14V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2zM9.5 3A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5v2z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-filter" viewBox="0 0 16 16">\n  <path d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-fullscreen" viewBox="0 0 16 16">\n  <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-fullscreen-exit" viewBox="0 0 16 16">\n  <path d="M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-github" viewBox="0 0 16 16">\n  <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-image" viewBox="0 0 16 16">\n  <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n  <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">\n  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n  <path d="M8.93 6.588l-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-layout-text-window" viewBox="0 0 16 16">\n  <path d="M3 6.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"/>\n  <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v1H1V2a1 1 0 0 1 1-1h12zm1 3v10a1 1 0 0 1-1 1h-2V4h3zm-4 0v11H2a1 1 0 0 1-1-1V4h10z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-link-45deg" viewBox="0 0 16 16">\n  <path d="M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.001 1.001 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>\n  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 0 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 0 0-4.243-4.243L6.586 4.672z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-music-note-list" viewBox="0 0 16 16">\n  <path d="M12 13c0 1.105-1.12 2-2.5 2S7 14.105 7 13s1.12-2 2.5-2 2.5.895 2.5 2z"/>\n  <path fill-rule="evenodd" d="M12 3v10h-1V3h1z"/>\n  <path d="M11 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 16 2.22V4l-5 1V2.82z"/>\n  <path fill-rule="evenodd" d="M0 11.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 .5 7H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 .5 3H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play" viewBox="0 0 16 16">\n  <path d="M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">\n  <path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause" viewBox="0 0 16 16">\n  <path d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">\n  <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">\n  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-bootstrap-reboot" viewBox="0 0 16 16">\n  <path d="M1.161 8a6.84 6.84 0 1 0 6.842-6.84.58.58 0 0 1 0-1.16 8 8 0 1 1-6.556 3.412l-.663-.577a.58.58 0 0 1 .227-.997l2.52-.69a.58.58 0 0 1 .728.633l-.332 2.592a.58.58 0 0 1-.956.364l-.643-.56A6.812 6.812 0 0 0 1.16 8z"/>\n  <path d="M6.641 11.671V8.843h1.57l1.498 2.828h1.314L9.377 8.665c.897-.3 1.427-1.106 1.427-2.1 0-1.37-.943-2.246-2.456-2.246H5.5v7.352h1.141zm0-3.75V5.277h1.57c.881 0 1.416.499 1.416 1.32 0 .84-.504 1.324-1.386 1.324h-1.6z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">\n  <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-shuffle" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"/>\n  <path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-end" viewBox="0 0 16 16">\n  <path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.713 3.31 4 3.655 4 4.308v7.384c0 .653.713.998 1.233.696L11.5 8.752V12a.5.5 0 0 0 1 0V4zM5 4.633L10.804 8 5 11.367V4.633z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-end-fill" viewBox="0 0 16 16">\n  <path d="M12.5 4a.5.5 0 0 0-1 0v3.248L5.233 3.612C4.693 3.3 4 3.678 4 4.308v7.384c0 .63.692 1.01 1.233.697L11.5 8.753V12a.5.5 0 0 0 1 0V4z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-start" viewBox="0 0 16 16">\n  <path d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.52-.302 1.233.043 1.233.696v7.384c0 .653-.713.998-1.233.696L5 8.752V12a.5.5 0 0 1-1 0V4zm7.5.633L5.696 8l5.804 3.367V4.633z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-skip-start-fill" viewBox="0 0 16 16">\n  <path d="M4 4a.5.5 0 0 1 1 0v3.248l6.267-3.636c.54-.313 1.232.066 1.232.696v7.384c0 .63-.692 1.01-1.232.697L5 8.753V12a.5.5 0 0 1-1 0V4z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-soundwave" viewBox="0 0 16 16">\n  <path fill-rule="evenodd" d="M8.5 2a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5zm-2 2a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm-6 1.5A.5.5 0 0 1 5 6v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm8 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm-10 1A.5.5 0 0 1 3 7v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5zm12 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-square" viewBox="0 0 16 16">\n  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-tools" viewBox="0 0 16 16">\n  <path d="M1 0L0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.356 3.356a1 1 0 0 0 1.414 0l1.586-1.586a1 1 0 0 0 0-1.414l-3.356-3.356a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0zm9.646 10.646a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708zM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16">\n  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n  <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-mute" viewBox="0 0 16 16">\n  <path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zM6 5.04L4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96V5.04zm7.854.606a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-mute-fill" viewBox="0 0 16 16">\n  <path d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708L12.207 8l1.647 1.646a.5.5 0 0 1-.708.708L11.5 8.707l-1.646 1.647a.5.5 0 0 1-.708-.708L10.793 8 9.146 6.354a.5.5 0 1 1 .708-.708L11.5 7.293l1.646-1.647a.5.5 0 0 1 .708 0z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-up" viewBox="0 0 16 16">\n  <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>\n  <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>\n  <path d="M10.025 8a4.486 4.486 0 0 1-1.318 3.182L8 10.475A3.489 3.489 0 0 0 9.025 8c0-.966-.392-1.841-1.025-2.475l.707-.707A4.486 4.486 0 0 1 10.025 8zM7 4a.5.5 0 0 0-.812-.39L3.825 5.5H1.5A.5.5 0 0 0 1 6v4a.5.5 0 0 0 .5.5h2.325l2.363 1.89A.5.5 0 0 0 7 12V4zM4.312 6.39L6 5.04v5.92L4.312 9.61A.5.5 0 0 0 4 9.5H2v-3h2a.5.5 0 0 0 .312-.11z"/>\n</svg>'},function(e,t,n){"use strict";n.r(t),t.default='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-volume-up-fill" viewBox="0 0 16 16">\n  <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>\n  <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>\n  <path d="M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707zM6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z"/>\n</svg>'},function(e,t,n){(function(t,n){e.exports=(e={})=>null===e.displayMethod?"":`\n<div class="${ns}-row ${ns}-align-start ${ns}-setting ${e.isSubSetting?ns+"-sub-settings":""}" data-property="${e.property}">\n\t<div class="${ns}-col ${ns}-heading">\n\t\t<span>\n\t\t\t${e.title}\n\t\t\t${e.description?`<i class="${ns}-info-circle ${ns}-popover" data-content="${e.description}">${t.infoCircle}</i>`:""}\n\t\t</span>\n\t\t${e.actions&&e.actions.length?`<div style="display: inline-block; margin: 0 .25rem">\n\t\t\t${(e.actions||[]).map(e=>`\n\t\t\t\t<a href="#" class="${ns}-heading-action" @click='${e.handler}'>${e.title}</a>\n\t\t\t`).join(" ")}\n\t\t</div>`:""}\n\t</div>\n\n\t${e.dismissTextId?`<div class="${ns}-col" style="min-width: 100%">\n\t\t\t${Player.display.ifNotDismissed(e.dismissTextId,e.dismissRestoreText,`<div data-dismiss-id="${e.dismissTextId}">\n\t\t\t\t\t${e.text}\n\t\t\t\t\t<a href="#" @click='display.dismiss("${e.dismissTextId}"):prevent' style="display:block; margin-top:.25rem">\n\t\t\t\t\t\tDismiss\n\t\t\t\t\t</a>\n\t\t\t\t</div>`)}\n\t\t</div>`:e.text?e.text:""}\n\n\t${(()=>{if(e.settings)return e.settings.map(t=>Player.settings.settingTemplate({...e,actions:null,settings:null,description:null,...t,isSubSetting:!0})).join("");value=n.get(Player.config,e.property,e.default),attrs=("function"==typeof e.attrs?e.attrs():e.attrs||"")+(e.class?` class="${e.class}"`:"")+` data-property="${e.property}"`,e.format&&(value=Player.getHandler(e.format)(value));let t=typeof value;return"object"===t&&(value=JSON.stringify(value,null,4)),inputTemplate="function"==typeof e.displayMethod&&e.displayMethod||n.get(Player,e.displayMethod)||e.displayMethod&&Player.settings.inputTemplates[e.displayMethod]||"boolean"===t&&Player.settings.inputTemplates.checkbox||"object"===t&&Player.settings.inputTemplates.textarea||e.options&&Player.settings.inputTemplates.select||Player.settings.inputTemplates.input,inputTemplate({value:value,attrs:attrs,setting:e})})()}\n</div>`}).call(this,n(1),n(0))},function(e,t){e.exports=(e={})=>`<div class="${ns}-col ${ns}-align-center">\n\t<input type="checkbox" ${e.attrs} ${e.value?"checked":""} />\n</div>`},function(e,t){e.exports=(e={})=>`<div class="${ns}-col ${ns}-align-center">\n\t<input type="text" ${e.attrs} value="${e.value}"/>\n</div>`},function(e,t){e.exports=(e={})=>`<div class="${ns}-col ${ns}-align-center">\n\t<select ${e.attrs}>\n\t\t${Object.keys(e.setting.options).map(t=>`<option value="${t}" ${e.value===t?"selected":""}>\n\t\t\t${e.setting.options[t]}\n\t\t</option>`).join("")}\n\t</select>\n</div>`},function(e,t){e.exports=(e={})=>`<div class="${ns}-col ${e.setting.inlineTextarea?"":ns+"-row"} ${ns}-align-center">\n\t<textarea ${e.attrs}>${e.value}</textarea>\n</div>`},function(e,t,n){(function(t){const n=["change","focus","blur","focusin","focusout","reset","submit","fullscreenchange","fullscreenerror","resize","scroll","keydown","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseup","pointdrag","pointdragstart","pointdragend","touchcancel","touchend","touchmove","touchstart","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","canplay","canplaythrough","complete","duration-change","emptied","ended","loadeddata","loadedmetadata","pause","play","playing","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"].map(e=>`[\\@${e}]`).join(",");e.exports={atRoot:["on","off","trigger"],_events:{},initialize:function(){const e={Player:Player,...Player.components},t=[];for(let n of Object.values(e))n.audioEvents&&t.push(n.audioEvents);document.body.addEventListener("pointerup",Player.events.clearMousedown),document.body.addEventListener("pointercancel",Player.events.clearMousedown),Player.on("rendered",(function(){for(let e of t)for(let t in e){(Array.isArray(e[t])?e[t]:[e[t]]).forEach(e=>Player.audio.addEventListener(t,Player.getHandler(e)))}}))},apply:function(e){const t=Array.from(e.querySelectorAll(n));e.matches(n)&&t.unshift(e),t.forEach(e=>{for(let{name:t,value:n}of e.attributes){const a="@"===t[0]&&t.slice(1);a&&Player.events.set(e,a,n)}})},set(e,n,a){let l=e._eventListeners||(e._eventListeners={});l[n]||(l[n]=[]),l[n].forEach(t=>e.removeEventListener(n,t));for(let r of a.split(/\s*;\s*/)){const[a,s,o,i]=r.match(/^([^(:]+)?(\(.*\))?(?::(.*))?$/),d=i&&i.split(":").reduce((e,t)=>{const n="["===t[0];return e[n?"args":t]=n?JSON.parse(t):t,e},{})||{},c=o&&JSON.parse("["+o.slice(1,-1)+"]"),p=(c||[]).reduce((e,t,n)=>e.concat(t.startsWith&&t.startsWith("evt")?[[n,t.slice(4)]]:[]),[]),u=s&&Player.getHandler(s.trim()),y=d.prevent||d.stop||d.disabled||c?e=>{d.disabled&&e.currentTarget.classList.contains("disabled")||(d.prevent&&e.preventDefault(),d.stop&&e.stopPropagation(),p.forEach(([n,a])=>c.splice(n,1,t.get(e,a))),u&&u.apply(null,c||[e]))}:u;if((!y||s&&!u)&&console.error("[4chan sounds player] Invalid event",n,r,e),"pointdrag"===n){const t=t=>{e._pointdragstart&&e._pointdragstart(t),t.preventDrag||(e.setPointerCapture(t.pointerId),Player._mousedown=e,Player._mousedownListener=y,Player._mousedownMoveEl=d.unbound?document.documentElement:e,Player._mousedownMoveEl.addEventListener("pointermove",y,d),e.addEventListener("pointerleave",y,d),d.boxed&&e.addEventListener("pointerleave",Player.events.clearMousedown),!d.move&&y(t))};e.addEventListener("pointerdown",t),l.pointerdown||(l.pointerdown=[]),l.pointerdown.push(t)}else"pointdragstart"===n||"pointdragend"===n?e["_"+n]=y:(e.addEventListener(n,y,d),l[n].push(y))}},on:function(e,t){Player.events._events[e]||(Player.events._events[e]=[]),Player.events._events[e].push(t)},off:function(e,t){const n=Player.events._events[e]&&Player.events._events[e].indexOf(t);n>-1&&Player.events._events[e].splice(n,1)},trigger:async function(e,...t){const n=Player.events._events[e]||[];for(let e of n)await e(...t)},clearMousedown:function(e){Player._mousedown&&(Player._mousedown.releasePointerCapture(e.pointerId),Player._mousedownMoveEl.removeEventListener("pointermove",Player._mousedownListener),Player._mousedown.removeEventListener("pointerleave",Player._mousedownListener),Player._mousedown._pointdragend&&Player._mousedown._pointdragend(e),Player._mousedown=Player._mousedownListener=null)}}}).call(this,n(0))},function(e,t){e.exports={atRoot:["togglePlay","play","pause","next","previous","stop","toggleMute","volumeUp","volumeDown"],public:["togglePlay","play","pause","next","previous","stop","toggleMute","volumeUp","volumeDown"],initialize:function(){Player.controls._audio=Player.audio},togglePlay:function(){Player.audio.paused?Player.play():Player.pause()},play:async function(e,{paused:t}={}){try{if(e||Player.playing||!Player.sounds.length||(e=Player.sounds[0]),e&&e!==Player.playing){Player.playing&&(Player.playing.playing=!1),Player.video.removeEventListener("canplaythrough",Player.actions.playOnceLoaded),Player.audio.removeEventListener("canplaythrough",Player.actions.playOnceLoaded);const t=Player.controls.audioEvents;for(let n in t){(Array.isArray(t[n])?t[n]:[t[n]]).forEach(t=>{const a=Player.getHandler(t);Player.video.removeEventListener(n,a),e.standaloneVideo&&Player.video.addEventListener(n,a)})}e.playing=!0,Player.playing=e,Player.audio.src=e.src,Player.isVideo=e.image.endsWith(".webm")||"video/webm"===e.type,Player.isStandalone=e.standaloneVideo,Player.audio=e.standaloneVideo?Player.video:Player.controls._audio,Player.audio._linked=Player.isVideo&&!Player.isStandalone&&Player.video,Player.video._linked=Player.isVideo&&!Player.isStandalone&&Player.audio,Player.container.classList[Player.isVideo?"add":"remove"]("playing-video"),Player.container.classList[Player.isVideo||e.image.endsWith("gif")?"add":"remove"]("playing-animated"),await Player.trigger("playsound",e)}t||(!Player.isStandalone&&Player.isVideo&&(Player.video.readyState<3||Player.audio.readyState<3)?(Player.video.addEventListener("canplaythrough",Player.actions.playOnceLoaded),Player.audio.addEventListener("canplaythrough",Player.actions.playOnceLoaded)):Player.audio.play())}catch(e){Player.logError("There was an error playing the sound. Please check the console for details.",e)}},playOnceLoaded:function(e){e.currentTarget.readyState>3&&e.currentTarget._linked.readyState>3&&(e.currentTarget.removeEventListener("canplaythrough",Player.actions.playOnceLoaded),e.currentTarget._linked.removeEventListener("canplaythrough",Player.actions.playOnceLoaded),e.currentTarget._linked.play(),e.currentTarget.play())},pause:function(){Player.audio&&Player.audio.pause()},stop:function(){Player.audio.src=null,Player.playing=null,Player.isVideo=!1,Player.isStandalone=!1,Player.trigger("stop")},next:function(e){Player.actions._movePlaying(1,e)},previous:function(e){Player.audio.currentTime>3?Player.audio.currentTime=0:Player.actions._movePlaying(-1,e)},_movePlaying:function(e,{force:t,group:n,paused:a}={}){if(!Player.sounds.length)return;const l=Player.sounds.indexOf(Player.playing);if(-1===l)return Player.play(Player.sounds[0]);let r;if(t||"one"!==Player.config.repeat){let t=l;do{t="all"===Player.config.repeat?(t+e+Player.sounds.length)%Player.sounds.length:t+e,r=Player.sounds[t]}while(n&&r&&t!==l&&(!r.post||r.post===Player.playing.post))}else r=Player.sounds[l];r&&Player.play(r,{paused:a})},volumeUp:function(){Player.audio.volume=Math.min(Player.audio.volume+.05,1)},volumeDown:function(){Player.audio.volume=Math.max(Player.audio.volume-.05,0)},toggleMute:function(){Player.audio.volume=(Player._lastVolume||.5)*!Player.audio.volume}}},function(e,t,n){(function(t){const a=n(74);e.exports={initialize:function(){Player.on("menu-close",e=>e._input&&delete e._input._colorpicker)},create:function(e){const n=e.currentTarget.parentNode,l="INPUT"===e.currentTarget.nodeName?e.currentTarget:n.querySelector("input"),r=n.querySelector(`.${ns}-cp-preview`);if(!l||l._colorpicker)return;Player.display.closeDialogs();const s=window.getComputedStyle(r).backgroundColor.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/),o=[+s[1],+s[2],+s[3],isNaN(+s[4])?1:s[4]],i=t.element(a({HEIGHT:200,WIDTH:200,rgb:o}),n);Player.position.showRelativeTo(i,l),l._colorpicker=i,i._input=l,i._colorpicker={hsv:[0,1,1,1],rgb:o},Player.colorpicker.updateOutput(i)},hueMove:function(e){const t=e.currentTarget.closest(`.${ns}-colorpicker`),n=Math.max(0,e.clientY-e.currentTarget.getBoundingClientRect().top);t._colorpicker.hsv[0]=n/200;const a=Player.colorpicker.hsv2rgb(t._colorpicker.hsv[0],1,1,1);t.querySelector(`.${ns}-cp-saturation`).style.background=`linear-gradient(to right, white, rgb(${a[0]}, ${a[1]}, ${a[2]}))`,e.currentTarget.querySelector(".position").style.top=Math.max(-3,n-6)+"px",Player.colorpicker.updateOutput(t,!0)},satMove:function(e){const t=e.currentTarget.closest(`.${ns}-colorpicker`),n=e.currentTarget.querySelector(".position"),a=Math.max(0,e.clientX-e.currentTarget.getBoundingClientRect().left),l=Math.max(0,e.clientY-e.currentTarget.getBoundingClientRect().top);t._colorpicker.hsv[1]=a/200,t._colorpicker.hsv[2]=1-l/200,n.style.top=Math.min(197,Math.max(-3,l-6))+"px",n.style.left=Math.min(197,Math.max(-3,a-5))+"px",Player.colorpicker.updateOutput(t,!0)},inputRGBA:function(e){const t=e.currentTarget.closest(`.${ns}-colorpicker`);t._colorpicker.rgb[+e.currentTarget.getAttribute("data-color")]=e.currentTarget.value,Player.colorpicker.updateOutput(t)},updateOutput:function(e,t){const n=t?["hsv","rgb"]:["rgb","hsv"];e._colorpicker[n[1]]=Player.colorpicker[`${n[0]}2${n[1]}`](...e._colorpicker[n[0]]);const[a,l,r,s]=e._colorpicker.rgb;if(t)e.querySelector(`.${ns}-rgb-input[data-color="0"]`).value=a,e.querySelector(`.${ns}-rgb-input[data-color="1"]`).value=l,e.querySelector(`.${ns}-rgb-input[data-color="2"]`).value=r,e.querySelector(`.${ns}-rgb-input[data-color="3"]`).value=s;else{const[t,n,a]=e._colorpicker.hsv,l=e.querySelector(`.${ns}-cp-hue .position`),r=e.querySelector(`.${ns}-cp-saturation .position`),s=Player.colorpicker.hsv2rgb(t,1,1,1);e.querySelector(`.${ns}-cp-saturation`).style.background=`linear-gradient(to right, white, rgb(${s[0]}, ${s[1]}, ${s[2]}))`,l.style.top=200*t-3+"px",r.style.left=200*n-3+"px",r.style.top=200*(1-a)-3+"px"}e.querySelector(".output-color").style.background=`rgb(${a}, ${l}, ${r}, ${s})`},apply:function(e){const t=e.currentTarget.closest(`.${ns}-colorpicker`),[n,a,l,r]=t._colorpicker.rgb,s=t._input;s.value=`rgb(${n}, ${a}, ${l}, ${r})`,delete s._colorpicker,t.parentNode.removeChild(t),s.focus(),s.blur()},hsv2rgb:function(e,t,n,a){const l=Math.floor(6*e),r=6*e-l,s=n*(1-t),o=n*(1-r*t),i=n*(1-(1-r)*t),d=l%6,c=[n,o,s,s,i,n][d],p=[i,n,n,o,s,s][d],u=[s,s,i,n,n,o][d];return[Math.round(255*c),Math.round(255*p),Math.round(255*u),a]},rgb2hsv:function(e,t,n,a){const l=Math.max(e,t,n),r=Math.min(e,t,n),s=l-r,o=0===l?0:s/l,i=l/255;let d;switch(l){case r:d=0;break;case e:d=t-n+s*(t<n?6:0),d/=6*s;break;case t:d=n-e+2*s,d/=6*s;break;case n:d=e-t+4*s,d/=6*s}return[d,o,i,a]},_updatePreview:function(e){const t=e.currentTarget.value;e.currentTarget.parentNode.querySelector(`.${ns}-cp-preview`).style.background=t}}}).call(this,n(0))},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-colorpicker ${ns}-dialog dialog" data-allow-click="true" style="top: 0px; left: 0px;">\n\t<div class="${ns}-cp-saturation" @pointdrag="colorpicker.satMove" style="height: ${e.HEIGHT}px; width: ${e.WIDTH}px;">\n\t\t<div class="position" style="left: ${e.WIDTH-3}px; top: -3px;"></div>\n\t</div>\n\t<div class="${ns}-cp-hue" @pointdrag="colorpicker.hueMove" style="height: ${e.HEIGHT}px">\n\t\t<div class="position"></div>\n\t</div>\n\t<div class="${ns}-output" style="text-align: right;">\n\t\t<a href="#" class="${ns}-close-colorpicker" @click="display.closeDialogs():prevent">${t.close}</a>\n\t\t<div class="output-color" style="background: rgb(${e.rgb[0]}, ${e.rgb[1]}, ${e.rgb[2]});"></div>\n\n\t\t<table>\n\t\t\t${["R","G","B","A"].map((t,n)=>`\n\t\t\t\t<tr>\n\t\t\t\t\t<td>${t}:</td>\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\t\tclass="${ns}-rgb-input"\n\t\t\t\t\t\t\t@change="colorpicker.inputRGBA"\n\t\t\t\t\t\t\tdata-color="${n}"\n\t\t\t\t\t\t\tvalue="${e.rgb[n]}"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</td>\n\t\t\t\t</tr>\n\t\t\t`).join("")}\n\t\t</table>\n\n\t\t<button @click="colorpicker.apply:prevent:stop">Apply</button><br>\n\t</div>\n</div>`}).call(this,n(1))},function(e,t,n){(function(t){e.exports={template:n(6),audioEvents:{ended:()=>Player.next(),pause:"controls.handleMediaEvent",play:"controls.handleMediaEvent",seeked:"controls.handleMediaEvent",waiting:"controls.handleMediaEvent",timeupdate:"controls.updateDuration",loadedmetadata:["controls.updateDuration","controls.preventWrapping"],durationchange:"controls.updateDuration",volumechange:"controls.updateVolume",loadstart:"controls.pollForLoading",error:"controls.handleAudioError"},actions:{previous:'previous({ "force": true })',playPause:"togglePlay",next:'next({ "force": true })',seek:'controls.handleSeek("evt", "main"):prevent',mute:"toggleMute",volume:'controls.handleVolume("evt", "main"):prevent',fullscreen:"display.toggleFullScreen"},initialize:async function(){GM.getValue("volume").then(e=>e>=0&&e<=1&&(Player.audio.volume=e)),Player.on("show",()=>Player._hiddenWhilePolling&&Player.controls.pollForLoading()),Player.on("hide",()=>{Player._hiddenWhilePolling=!!Player._loadingPoll,Player.controls.stopPollingForLoading()}),Player.on("rendered",()=>{Player.audio.volumeBar=Player.$(`.${ns}-volume-bar .${ns}-current-bar`),Player.audio.currentTimeBar=Player.$(`.${ns}-seek-bar .${ns}-current-bar`),Player.audio.loadedBar=Player.$(`.${ns}-seek-bar .${ns}-loaded-bar`),Player.controls.updateDuration({currentTarget:Player.audio}),Player.controls.updateVolume({currentTarget:Player.audio}),Player.controls.preventWrapping()}),Player.on("config:preventControlsWrapping",e=>!e&&Player.controls.showAllControls()),Player.on("config:controlsHideOrder",()=>{Player.controls.setHideOrder(),Player.controls.preventWrapping()})},handleAudioError:function(e){Player.playing&&(Player.logError(`Failed to play ${Player.playing.title}. Please check the console for details.`,e,"warning"),Player.next())},handleMediaEvent:function(e){const t=e.currentTarget._inlineAudio||e.currentTarget;Player.controls.sync(e.currentTarget),Player.controls.updateDuration(e),document.querySelectorAll(`.${ns}-play-button[data-audio="${t.dataset.id}"]`).forEach(e=>{e.classList[t.paused?"add":"remove"](ns+"-play")})},sync:function(e){const t=e._linked;e&&e.readyState>3&&t&&t.readyState>3&&(t.currentTime=e.currentTime%t.duration,t[e.paused?"pause":"play"]())},pollForLoading:function(){Player._loadingPoll=Player._loadingPoll||setInterval(Player.controls.updateLoaded,1e3)},stopPollingForLoading:function(){Player._loadingPoll&&clearInterval(Player._loadingPoll),Player._loadingPoll=null},updateLoaded:function(){const e=Player.audio.buffered.length,t=e>0?Player.audio.buffered.end(e-1)/Player.audio.duration*100:0;100===t&&Player.controls.stopPollingForLoading(),Player.audio.loadedBar.style.width=t+"%"},updateDuration:function(e){const n=e.currentTarget,a=n._inlineAudio||n,l=n._inlineAudio?a._inlinePlayer.controls:document,r=t.toDuration(n.currentTime),s=t.toDuration(n.duration),o=a.dataset.id;l&&l.querySelectorAll(`.${ns}-current-time[data-audio="${o}"]`).forEach(e=>e.childNodes[0].textContent=r),l&&l.querySelectorAll(`.${ns}-duration[data-audio="${o}"]`).forEach(e=>e.childNodes[0].textContent=s),Player.controls.updateProgressBarPosition(a.currentTimeBar,n.currentTime,n.duration)},updateVolume:function(e){const t=e.currentTarget._inlineAudio||e.currentTarget,n=t._inlinePlayer?t._inlinePlayer.controls:Player.container,a=t.volume;t===Player.audio&&(a>0&&(Player._lastVolume=a),GM.setValue("volume",a)),n&&n.querySelectorAll(`.${ns}-volume-button[data-audio="${t.dataset.id}"]`).forEach(e=>{e.classList[0===a?"add":"remove"]("mute"),e.classList[a>0?"add":"remove"]("up")}),Player.controls.updateProgressBarPosition(t.volumeBar,t.volume,1)},updateProgressBarPosition:function(e,t,n){if(!e)return;t||(t=0),n||(n=0);const a=n?Math.max(0,Math.min((t||0)/n,1)):0;e.style.width=`calc(${100*a}% - ${.8*a-.4}rem)`},handleSeek:function(e,t){const n="main"===t?Player.audio:Player.inline.audio[t]._inlinePlayer.master;n&&n.duration&&n.duration!==1/0&&(n.currentTime=n.duration*Player.controls._getBarXRatio(e))},handleVolume:function(e,t){("main"===t?Player.audio:Player.inline.audio[t]).volume=Player.controls._getBarXRatio(e)},_getBarXRatio:function(e){const t=.4*Player.remSize,n=e.offsetX||e.targetTouches[0].pageX-e.currentTarget.getBoundingClientRect().left;return Math.max(0,Math.min(1,(n-t)/(parseInt(getComputedStyle(e.currentTarget).width,10)-2*t)))},showAllControls:function(){Player.$all(`.${ns}-controls [data-hide-id]`).forEach(e=>e.style.display=null)},preventWrapping:function(){if(!Player.config.preventControlWrapping)return;const e=Player.$(`.${ns}-controls`),t=parseFloat(window.getComputedStyle(e).paddingTop),n=Player.controls.hideOrder||Player.controls.setHideOrder();let a=Array.prototype.slice.call(e.children),l=a.pop(),r=0;for(Player.controls.showAllControls();l.offsetTop>t&&r<n.length;){const e=n[r++];e.style.display="none",a=a.filter(t=>t!==e),e===l&&(l=a.pop())}},setHideOrder:function(){Array.isArray(Player.config.controlsHideOrder)||Player.settings.reset("controlsHideOrder");const e=Player.$(`.${ns}-controls`);return Player.controls.hideOrder=Player.config.controlsHideOrder.map(t=>e.querySelector(`[data-hide-id="${t}"]`)).filter(e=>e).sort((e,t)=>e.dataset.hideOrder-t.dataset.hideOrder)}}}).call(this,n(0))},function(e,t,n){(function(t){const a=n(77),l=n(78),r={themes:n(79),views:n(80)},s={},o={},i="function"==typeof NoSleep&&new NoSleep;e.exports={atRoot:["show","hide"],public:["show","hide"],template:n(81),_noSleepEnabled:!1,initialize:async function(){try{Player.display.dismissed=(await GM.getValue("dismissed")).split(",")}catch(e){Player.display.dismissed=[]}Player.on("playsound",()=>{Player.display._marquees={},!Player.display._marqueeTO&&Player.display.runTitleMarquee()}),Player.remSize=parseFloat(getComputedStyle(document.documentElement).fontSize),Player.on("config:preventSleep",Player.display._initNoSleep),Player.display._initNoSleep(Player.config.preventSleep),document.body.addEventListener("click",Player.display.closeDialogs),document.body.addEventListener("keydown",e=>"Escape"===e.key&&Player.display.closeDialogs(e))},createPlayerButton:function(){if("FoolFuuka"===Site){const e=document.querySelector(".navbar-inner .nav:nth-child(2)");t.element('<li><a href="javascript:;">Sounds</a></li>',e).children[0].addEventListener("click",Player.display.toggle)}else if("Fuuka"===Site){const e=document.querySelector("body > div > br");e.parentNode.insertBefore(document.createTextNode("["),e),t.elementBefore('<a href="#" @click="display.toggle:prevent">Sounds</a>',e),e.parentNode.insertBefore(document.createTextNode("]"),e)}else isChanX?t.elementBefore('<span id="shortcut-sounds" class="shortcut brackets-wrap" data-index="0">\n\t\t\t\t<a href="#" @click="display.toggle:prevent" title="Sounds" class="fa fa-play-circle">Sounds</a>\n\t\t\t</span>',document.getElementById("shortcut-settings")):document.querySelectorAll("#settingsWindowLink, #settingsWindowLinkBot").forEach((function(e){t.elementBefore('<a href="#" @click="display.toggle:prevent">Sounds</a>',e),e.parentNode.insertBefore(document.createTextNode("] ["),e)}))},render:async function(){try{Player.container&&(document.body.removeChild(Player.container),document.head.removeChild(Player.stylesheet)),Player.display.updateStylesheet();const e=document.body.classList.contains("is_thread")&&!isChanX&&document.body.querySelector(".board")||document.body;Player.container=t.element(Player.display.template(),e),await Player.trigger("rendered")}catch(e){throw Player.logError("There was an error rendering the sound player.",e),e}},updateStylesheet:function(){Player.stylesheet=Player.stylesheet||t.element('<style id="sound-player-css"></style>',document.head),Player.stylesheet.innerHTML=(isChanX?"":"/* 4chanX Polyfill */\n\n"+l())+"\n\n/* Sounds Player CSS */\n\n"+a()},setViewStyle:async function(e){const t=Player.config.viewStyle;if("fullscreen"!==e&&document.fullscreenElement&&document.exitFullscreen(),Player.set("viewStyle",e),Player.container.setAttribute("data-view-style",e),"playlist"!==e&&"image"!==e||Player.controls.preventWrapping(),"fullscreen"!==t||"fullscreen"===e){const[e,t]=(await GM.getValue("size")||"").split(":");e&&t&&Player.position.resize(parseInt(e,10),parseInt(t,10)),Player.position.setPostWidths()}Player.trigger("view",e,t)},toggle:function(){"none"===Player.container.style.display?Player.show():Player.hide()},hide:function(){Player.container.style.display="none",Player.isHidden=!0,Player.trigger("hide")},show:async function(){Player.container.style.display&&(Player.container.style.display=null,Player.isHidden=!1,await Player.trigger("show"))},close:async function(){Player.stop(),Player.hide()},toggleFullScreen:async function(){document.fullscreenElement?document.exitFullscreen&&(document.exitFullscreen(),document.body.removeEventListener("pointermove",Player.display._fullscreenMouseMove)):(Player.isHidden&&Player.show(),Player.$(`.${ns}-player`).requestFullscreen(),document.body.addEventListener("pointermove",Player.display._fullscreenMouseMove),Player.display._fullscreenMouseMove())},_fullscreenMouseMove:function(){Player.container.classList.remove("cursor-inactive"),Player.display.fullscreenCursorTO&&clearTimeout(Player.display.fullscreenCursorTO),Player.display.fullscreenCursorTO=setTimeout((function(){Player.container.classList.add("cursor-inactive")}),2e3)},_handleFullScreenChange:function(){document.fullscreenElement?(Player.display.setViewStyle("fullscreen"),document.querySelector(`.${ns}-image-link`).removeAttribute("href")):(Player.playing&&(document.querySelector(`.${ns}-image-link`).href=Player.playing.image),Player.playlist.restore()),Player.controls.preventWrapping()},restore:async function(e){const n=Player.display.dismissed.indexOf(e);e&&n>-1&&(Player.display.dismissed.splice(n,1),Player.$all(`[\\@click^='display.restore("${e}")']`).forEach(n=>{t.elementBefore(s[e],n),n.parentNode.removeChild(n)}),await GM.setValue("dismissed",Player.display.dismissed.join(",")))},dismiss:async function(e){e&&!Player.display.dismissed.includes(e)&&(Player.display.dismissed.push(e),Player.$all(`[data-dismiss-id="${e}"]`).forEach(n=>{t.elementBefore(`<a href="#" @click='display.restore("${e}"):prevent'>${o[e]}</a>`,n),n.parentNode.removeChild(n)}),await GM.setValue("dismissed",Player.display.dismissed.join(",")))},ifNotDismissed:function(e,t,n){return s[e]=n,o[e]=t,Player.display.dismissed.includes(e)?`<a href="#" @click='display.restore("${e}"):prevent'>${t}</a>`:n},showMenu:function(e,n,a){const l="string"==typeof n?t.element(r[n]()):n;Player.display.closeDialogs(),a||(a=Player.container),a.appendChild(l),Player.position.showRelativeTo(l,e),l.querySelectorAll(".entry").forEach(e=>{e.addEventListener("mouseenter",Player.display._setFocusedMenuItem)}),l._keepOpenFor=Array.from(l.querySelectorAll(".entry.has-submenu")),l._closeFor=Array.from(l.querySelectorAll(".submenu")),Player.trigger("menu-open",l)},_setFocusedMenuItem:function(e){const t=e.currentTarget.querySelector(".submenu");e.currentTarget.closest(".dialog").querySelectorAll(".focused").forEach(e=>e.classList.remove("focused")),e.currentTarget.classList.add("focused"),t&&t.getBoundingClientRect().right>document.documentElement.clientWidth&&(t.style.inset="0px 100% auto auto")},closeDialogs:function(e){document.querySelectorAll(`.${ns}-dialog`).forEach(t=>{const n=(t._keepOpenFor||[]).concat(t.dataset.allowClick?t:[]);(!e||!n.find(t=>t===e.target||t.contains(e.target))||(t._closeFor||[]).find(t=>t===e.target||t.contains(e.target)))&&(t.parentNode.removeChild(t),Player.trigger("menu-close",t))})},runTitleMarquee:async function(){Player.display._marqueeTO=setTimeout(Player.display.runTitleMarquee,1e3),document.querySelectorAll(`.${ns}-title-marquee`).forEach(e=>{const t=e.parentNode.getBoundingClientRect().width-(e.scrollWidth+1),n=e.getAttribute("data-location");if(t>=0)return e.style.marginLeft=null;const a=Player.display._marquees[n]=Player.display._marquees[n]||{direction:1,position:parseInt(e.style.marginLeft,10)||0};a.pause>0?a.pause--:(a.position-=20*a.direction,(a.position>0||a.position<t)&&(a.position=Math.min(0,Math.max(a.position,t)),a.direction*=-1,a.pause=1),e.style.marginLeft=a.position+"px")})},_popoverMouseEnter:e=>{const n=e.currentTarget;n.infoEl&&Player.container.contains(n.infoEl)||(n.infoEl=t.element(`<div class="${ns}-popover-body ${ns}-dialog dialog">${n.dataset.content}</div>`,Player.container),n.infoEl._keepOpenFor=[n],Player.position.showRelativeTo(n.infoEl,n))},_popoverMouseLeave:e=>{const t=e.currentTarget;t.infoEl&&!t.infoEl._clicked&&(t.infoEl.parentNode.removeChild(t.infoEl),delete t.infoEl)},_popoverClick:e=>{const t=e.currentTarget;t.infoEl&&Player.container.contains(t.infoEl)?(t.infoEl._clicked=!t.infoEl._clicked)||Player.display._popoverMouseLeave(e):Player.display._popoverMouseEnter(e)},_initNoSleep:e=>{const t=e?"addEventListener":"removeEventListener";i&&!!e!==Player.display._noSleepEnabled&&(Player.audio[t]("play",i.enable),Player.audio[t]("pause",i.disable),Player.audio[t]("ended",i.disable),Player.display._noSleepEnabled=!!e,Player.audio.paused||i[e?"enable":"disable"]())}}}).call(this,n(0))},function(e,t){e.exports=(e={})=>`.${ns}-colorpicker{position:fixed;padding:.25rem;white-space:nowrap;z-index:999}.${ns}-colorpicker .${ns}-cp-saturation{display:inline-block;position:relative}.${ns}-colorpicker .${ns}-cp-saturation .position{width:5px}.${ns}-colorpicker .${ns}-cp-saturation::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background:#000;-webkit-mask-image:linear-gradient(#0000, #000);mask-image:linear-gradient(#0000, #000)}.${ns}-colorpicker .${ns}-cp-hue{margin-left:.5rem;display:inline-block;position:relative;width:30px;background:linear-gradient(to bottom, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)}.${ns}-colorpicker .${ns}-cp-hue .position{top:-3px;left:-1px;right:-1px}.${ns}-colorpicker .${ns}-cp-saturation .position,.${ns}-colorpicker .${ns}-cp-hue .position{position:absolute;height:5px;border-radius:1rem}.${ns}-colorpicker .${ns}-output{vertical-align:top;margin-left:1rem;display:inline-block}.${ns}-colorpicker .${ns}-output .${ns}-rgb-input{width:2rem}.${ns}-colorpicker .${ns}-output .output-color{height:40px;margin:.25rem 0}.${ns}-cp-preview,.${ns}-cp-saturation .position,.${ns}-cp-hue .position,.${ns}-output .output-color{border:solid 1px #000;box-shadow:inset 0 0 0 1px #eee}.${ns}-cp-preview{height:1em;width:1em;margin-left:.125rem}.${ns}-text-muted{color:#909090}[\\@pointdrag],.no-touch-action{touch-action:none}.${ns}-truncate-text{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.${ns}-align-center{align-items:center;align-content:center;align-self:center}.${ns}-align-start{align-items:start;align-content:start;align-self:start}.${ns}-space-between{justify-content:space-between}.${ns}-controls{align-items:center;padding:.5rem 0;position:relative;background:${Player.config.colors.controls_background};justify-content:space-between}.${ns}-controls>div{margin:0 .5rem}.${ns}-controls .${ns}-current-time{color:${Player.config.colors.controls_inactive}}.${ns}-controls .${ns}-media-control{width:1.5rem;height:1.5rem;font-size:1rem;color:${Player.config.colors.controls_inactive}}.${ns}-controls .${ns}-media-control.disabled{cursor:inherit;filter:brightness(0.5) grayscale(1)}.${ns}-controls .${ns}-media-control:hover:not(.disabled){color:${Player.config.colors.controls_active}}.${ns}-media-control{display:flex;justify-content:center;align-items:center;cursor:pointer}.${ns}-media-control.${ns}-hover-fill svg[class$=-fill],.${ns}-media-control.${ns}-hover-fill svg[class*="-fill "]{display:none}.${ns}-media-control.${ns}-hover-fill:hover:not(.disabled) svg{display:none}.${ns}-media-control.${ns}-hover-fill:hover:not(.disabled) svg[class$=-fill],.${ns}-media-control.${ns}-hover-fill:hover:not(.disabled) svg[class*="-fill "]{display:block}.${ns}-media-control.${ns}-play-button:not(.${ns}-play) svg.bi-play-fill,.${ns}-media-control.${ns}-play-button:not(.${ns}-play) svg.bi-play{display:none !important}.${ns}-media-control.${ns}-play-button.${ns}-play svg.bi-pause-fill,.${ns}-media-control.${ns}-play-button.${ns}-play svg.bi-pause{display:none !important}.${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen-exit{display:none}#${ns}-container[data-view-style=fullscreen] .${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen-exit{display:block}#${ns}-container[data-view-style=fullscreen] .${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen{display:none}.${ns}-media-control.${ns}-volume-button.mute .bi:not(.bi-volume-mute):not(.bi-volume-mute-fill){display:none}.${ns}-media-control.${ns}-volume-button.up .bi:not(.bi-volume-up):not(.bi-volume-up-fill){display:none}.${ns}-progress-bar{min-width:3.5rem;height:1.5rem;display:flex;align-items:center}.${ns}-progress-bar .${ns}-full-bar{height:.3rem;width:100%;background:${Player.config.colors.controls_empty_bar};border-radius:1rem;position:relative}.${ns}-progress-bar .${ns}-full-bar>div{position:absolute;top:0;bottom:0;border-radius:1rem}.${ns}-progress-bar .${ns}-full-bar .${ns}-loaded-bar{background:${Player.config.colors.controls_loaded_bar}}.${ns}-progress-bar .${ns}-full-bar .${ns}-current-bar{display:flex;justify-content:flex-end;align-items:center}.${ns}-progress-bar .${ns}-full-bar .${ns}-current-bar:after{content:"";background:${Player.config.colors.controls_inactive};height:.8rem;min-width:.8rem;border-radius:1rem;box-shadow:rgba(0,0,0,.76) 0 0 3px 0;margin-right:-0.4rem}.${ns}-progress-bar:hover .${ns}-current-bar:after{background:${Player.config.colors.controls_active}}.${ns}-seek-bar .${ns}-current-bar{background:${Player.config.colors.controls_active}}.${ns}-volume-bar .${ns}-current-bar{background:${Player.config.colors.controls_inactive}}.${ns}-chan-x-controls .${ns}-current-time,.${ns}-chan-x-controls .${ns}-duration{margin:0 .25rem}.${ns}-header,.${ns}-footer{text-align:center;padding:.125rem;max-width:100%;line-height:1rem}.${ns}-header:hover .${ns}-hover-display,.${ns}-footer:hover .${ns}-hover-display{display:flex}.${ns}-header .${ns}-expander,.${ns}-footer .${ns}-expander{opacity:0;position:absolute;bottom:-0.25rem;right:-0.25rem;height:.75rem;width:.75rem;cursor:se-resize;background:linear-gradient(to bottom right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 50%, ${Player.config.colors.border} 55%, ${Player.config.colors.border} 100%)}.${ns}-header .${ns}-expander[data-direction=sw],.${ns}-footer .${ns}-expander[data-direction=sw]{left:-0.25rem;right:auto;transform:rotate(90deg);cursor:sw-resize}.${ns}-header .${ns}-expander[data-direction=nw],.${ns}-footer .${ns}-expander[data-direction=nw]{left:-0.25rem;top:-0.25rem;right:auto;bottom:auto;transform:rotate(180deg);cursor:nw-resize}.${ns}-header .${ns}-expander[data-direction=ne],.${ns}-footer .${ns}-expander[data-direction=ne]{right:-0.25rem;top:-0.25rem;bottom:auto;transform:rotate(270deg);cursor:ne-resize}.${ns}-header{cursor:grab;border-bottom:solid 1px ${Player.config.colors.border}}.${ns}-footer{cursor:grab;border-top:solid 1px ${Player.config.colors.border}}.${ns}-title-marquee{transition:margin-left 1s linear}.${ns}-menu svg.bi{margin:0 -0.25rem 0 .25rem}.${ns}-header svg.bi,.${ns}-footer svg.bi{margin:0 .125rem}.muted svg.bi{opacity:.45}svg.bi{overflow:visible;height:1em;width:1em}.${ns}-image-link{text-align:center;display:flex;flex-grow:1;justify-content:center;overflow:hidden;position:relative}.${ns}-image-link.${ns}-show-video .${ns}-video{display:block}.${ns}-image-link.${ns}-show-video .${ns}-image{display:none}.${ns}-image-link.${ns}-pip{position:fixed;right:10px;align-items:end}.${ns}-image-link.${ns}-pip .${ns}-image,.${ns}-image-link.${ns}-pip .${ns}-video{width:auto;height:auto;max-height:${Player.config.maxPIPWidth};max-width:${Player.config.maxPIPWidth};object-fit:contain}.${ns}-image-link .${ns}-video{display:none}.${ns}-image-link .${ns}-image,.${ns}-image-link .${ns}-video{height:100%;width:100%;object-fit:contain}.${ns}-image-link .${ns}-background-image{position:absolute;top:-20px;bottom:-20px;left:-20px;right:-20px;object-fit:cover;object-position:center;height:calc(100% + 40px);width:calc(100% + 40px);filter:blur(10px) brightness(0.7) saturate(0.5) contrast(0.7);z-index:-1}.${ns}-image-link .${ns}-background-image:not([src]){display:none}#${ns}-container[data-view-style=fullscreen].playing-video .${ns}-image-link{background:#000}#${ns}-container[data-view-style=fullscreen].playing-video .${ns}-background-image{display:none}#${ns}-container{position:fixed;display:flex;flex-direction:column;background:${Player.config.colors.background};color:${Player.config.colors.text};border:1px solid ${Player.config.colors.border};box-sizing:border-box;min-width:7rem}#${ns}-container .w-100{width:100%;min-width:100%}#${ns}-container input[type=text],#${ns}-container select,#${ns}-container .${ns}-file-overlay{color:#000;height:1.5rem !important;padding:2px 4px 3px;box-sizing:border-box;margin:0;border-radius:0;border:solid 1px ${Player.config.colors.border};padding:0 .25rem}.${ns}-panel{padding:0 .25rem;height:100%;width:calc(100% - .5rem);overflow:auto}.${ns}-heading{font-weight:600;margin:.5rem 0}.${ns}-heading.lined{border-bottom:solid 1px ${Player.config.colors.border}}.${ns}-heading.lined .${ns}-heading-action{text-decoration:none}.${ns}-heading-action{font-weight:normal;text-decoration:underline;display:inline-flex}.${ns}-row{display:flex;flex-wrap:wrap;min-width:100%;box-sizing:border-box}.${ns}-row.nowrap{flex-wrap:nowrap}.${ns}-col-auto{flex:0 0 auto;width:auto;max-width:100%;display:inline-flex}.${ns}-col{flex-basis:0;flex-grow:1;max-width:100%;width:100%;position:relative}.${ns}-hover-display{display:none}.${ns}-player{display:flex;flex-direction:column;flex-grow:1;overflow:auto}.${ns}-player .${ns}-hover-image{position:fixed;max-height:125px;max-width:125px}.${ns}-player.${ns}-hide-hover-image .${ns}-hover-image{display:none !important}.${ns}-list-container{flex-grow:1;overflow:auto}.${ns}-list-container .${ns}-list-item{list-style-type:none;padding:.15rem .25rem;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;background:${Player.config.colors.odd_row};overflow:hidden;height:1.3rem}.${ns}-list-container .${ns}-list-item:nth-child(2n){background:${Player.config.colors.even_row}}.${ns}-list-container .${ns}-list-item:nth-child(n).playing{background:${Player.config.colors.playing}}.${ns}-list-container .${ns}-list-item .${ns}-item-menu-button{right:.25rem}.${ns}-list-container .${ns}-list-item:hover .${ns}-hover-display{display:flex}.${ns}-list-container .${ns}-list-item.${ns}-dragging{background:${Player.config.colors.dragging}}.${ns}-settings textarea{border:solid 1px ${Player.config.colors.border};min-width:100%;min-height:4rem;box-sizing:border-box;white-space:pre}.${ns}-settings .${ns}-sub-settings .${ns}-heading{font-weight:normal;margin:0;justify-content:space-between}.${ns}-settings .${ns}-sub-settings .${ns}-col{min-height:1.55rem;display:flex;align-items:center;align-content:center;white-space:nowrap}.${ns}-settings .${ns}-settings-tabs{justify-content:space-between;flex-direction:row-reverse;margin:0 -0.25rem}.${ns}-settings .${ns}-settings-tab-group{text-align:center;white-space:nowrap;align-items:center}.${ns}-settings .${ns}-settings-tab{display:flex;margin:.25rem;text-decoration:underline;text-align:center}.${ns}-settings .${ns}-settings-tab.active{font-weight:bold}.${ns}-settings .${ns}-settings-tab svg.bi{margin:0 -0.125rem}.${ns}-settings .${ns}-settings-group{display:none}.${ns}-settings .${ns}-settings-group.active{display:block}.${ns}-settings .${ns}-host-input{margin:.5rem 0;border-top:solid 1px ${Player.config.colors.border}}.${ns}-settings .${ns}-host-input.invalid{border:solid 1px red}.${ns}-settings .${ns}-host-input .${ns}-host-controls{align-items:center;justify-content:space-between;margin:.125rem 0}.${ns}-settings .${ns}-host-input input[type=text]{min-width:100%;box-sizing:border-box}.${ns}-theme-save-options{position:fixed;max-height:20rem;overflow:auto;padding:.25rem}.${ns}-theme-save-options:not(.fields-collapsed) .bi-chevron-down,.${ns}-theme-save-options.fields-collapsed .bi-chevron-up,.${ns}-theme-save-options.fields-collapsed input[type=checkbox]:not(:checked),.${ns}-theme-save-options.fields-collapsed input[type=checkbox]:not(:checked)+label{display:none}.${ns}-info-circle{cursor:pointer}.${ns}-info-circle svg{height:.8em;width:.8em}.${ns}-popover-body{position:fixed;padding:.25rem;max-width:12rem;text-align:center;border-radius:.3rem}.${ns}-threads .${ns}-thread-board-list label{display:inline-block;width:4rem}.${ns}-threads .${ns}-thread-list{margin:.5rem -0.25rem 0;padding:.5rem 1rem;border-top:solid 1px ${Player.config.colors.border}}.${ns}-threads .${ns}-thread-list .boardBanner{margin:1rem 0}.${ns}-threads table{border-top:solid 1px ${Player.config.colors.border};width:100%;margin-top:.5rem;border-collapse:collapse}.${ns}-threads table th{border-bottom:solid 1px ${Player.config.colors.border}}.${ns}-threads table th,.${ns}-threads table td{text-align:left;padding:.25rem}.${ns}-threads table tr{padding:.25rem 0}.${ns}-threads table .${ns}-threads-body tr{background:${Player.config.colors.even_row}}.${ns}-threads table .${ns}-threads-body tr:nth-child(2n){background:${Player.config.colors.odd_row}}.${ns}-download-all-status,.${ns}-create-sound-status{margin-top:.5rem;border:solid 1px ${Player.config.colors.border};border-radius:5px;padding:.25rem}.${ns}-file-overlay,.${ns}-tools input[type=text]{display:flex;align-items:center}.${ns}-file-input.placeholder span,.${ns}-create-sound-form input[type=text]::placeholder{color:#aaa;opacity:1}.${ns}-file-input .${ns}-file-overlay{position:relative;background:#fff}.${ns}-file-input .placeholder-text{display:none}.${ns}-file-input.placeholder .placeholder-text{display:inherit}.${ns}-file-input span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.${ns}-file-input input[type=file]{width:100%;box-sizing:border-box;height:100%;position:absolute;left:0;opacity:0}.${ns}-file-input .overfile{z-index:9999}.${ns}-file-input .${ns}-file-list{padding:0 .25rem}.${ns}-file-input .${ns}-file-list:empty{display:none}.${ns}-input-append{position:absolute;display:flex;align-items:center;background:#fff;padding-left:.25rem;right:.125rem}.${ns}-threads,.${ns}-settings,.${ns}-tools,.${ns}-player{display:none}#${ns}-container[data-view-style=settings] .${ns}-settings{display:block}#${ns}-container[data-view-style=threads] .${ns}-threads{display:block}#${ns}-container[data-view-style=tools] .${ns}-tools{display:block}#${ns}-container[data-view-style=image] .${ns}-player,#${ns}-container[data-view-style=playlist] .${ns}-player,#${ns}-container[data-view-style=fullscreen] .${ns}-player{display:flex}#${ns}-container[data-view-style=image] .${ns}-list-container,#${ns}-container[data-view-style=image] .${ns}-playlist-search{display:none}#${ns}-container[data-view-style=image] .${ns}-image-link{height:auto}#${ns}-container[data-view-style=playlist] .${ns}-image-link{height:125px;max-height:125px;flex-shrink:0}#${ns}-container[data-view-style=fullscreen] .${ns}-player{scrollbar-width:none}#${ns}-container[data-view-style=fullscreen] .${ns}-player::-webkit-scrollbar{display:none}#${ns}-container[data-view-style=fullscreen].cursor-inactive .${ns}-player{cursor:none}#${ns}-container[data-view-style=fullscreen].cursor-inactive .${ns}-controls{opacity:0}#${ns}-container[data-view-style=fullscreen] .${ns}-image-link{height:calc(100% - .4rem) !important}#${ns}-container[data-view-style=fullscreen] .${ns}-controls{position:absolute;left:0;right:0;bottom:0;opacity:.7;transition:opacity .3s ease}#${ns}-container[data-view-style=fullscreen] .${ns}-list-container{position:absolute;top:100%;width:100%}`},function(e,t){e.exports=(e={})=>`.dialog{background:${Player.config.colors.background};background:${Player.config.colors.background};border-color:${Player.config.colors.border};border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.15);border-radius:3px;padding-top:1px;padding-bottom:3px}.entry{position:relative;display:block;padding:.125rem .5rem;min-width:70px;white-space:nowrap}.entry.has-submenu::after{content:"";border-left:.5em solid;border-top:.3em solid transparent;border-bottom:.3em solid transparent;display:inline-block;margin:.35em;position:absolute;right:3px}.entry.focused{background:rgba(255,255,255,.33)}.entry.focused>.submenu{display:block}.submenu{position:absolute;display:none}`},function(e,t){e.exports=(e={})=>`<div class="${ns}-menu ${ns}-dialog dialog" id="menu" tabindex="0" data-type="post" style="position: fixed;">\n\t${["Default"].concat(Player.config.savedThemesOrder).map(e=>`\n\t\t<a class="${ns}-row nowrap ${ns}-align-center entry" href="#" @click='theme.switch("${e}"):prevent;playlist.restore'>\n\t\t\t<span ${Player.config.selectedTheme===e?'style="font-weight: 700;"':""}>${e}</span>\n\t\t</a>\n\t`).join("")}\n</div>`},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-menu ${ns}-dialog dialog" id="menu" tabindex="0" data-type="post" style="position: fixed;">\n\t${["playlist","image"].includes(Player.config.viewStyle)?"":`<a class="${ns}-row nowrap ${ns}-align-center entry" href="#" @click="playlist.restore:prevent"><div class="${ns}-col">Player</div><div class="${ns}-col-auto">${t.musicNoteList}</div></a>`}\n\t${"settings"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center entry" href="#" @click="settings.toggle():prevent"><div class="${ns}-col">Settings</div><div class="${ns}-col-auto">${t.gear}</div></span></a>`}\n\t${"threads"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center entry" href="#" @click="threads.toggle:prevent"><div class="${ns}-col">Threads</div><div class="${ns}-col-auto">${t.search}</div></span></a>`}\n\t${"tools"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center entry" href="#" @click="tools.toggle:prevent"><div class="${ns}-col">Tools</div><div class="${ns}-col-auto">${t.tools}</div></span></a>`}\n</div>`}).call(this,n(1))},function(e,t){e.exports=(e={})=>`<div id="${ns}-container" data-view-style="${Player.config.viewStyle}" @drop='playlist.addFromFiles("evt.dataTransfer.files"):prevent:stop' style="top: 30px; left: 0px; width: 360px; height: 360px; display: none;">\n\t<div class="${ns}-header ${ns}-row ${ns}-align-center" @pointdragstart="position.initMove" @pointdrag="position.doMove:unbound" @pointdragend="position.stopMove">\n\t\t${Player.header.template(e)}\n\t</div>\n\n\t<div class="${ns}-player ${Player.config.hoverImages?"":ns+"-hide-hover-image"}" @fullscreenchange="display._handleFullScreenChange">\n\t\t${Player.playlist.template(e)}\n\t</div>\n\t<div class="${ns}-settings ${ns}-panel">\n\t\t${Player.settings.template(e)}\n\t</div>\n\t<div class="${ns}-threads ${ns}-panel">\n\t\t${Player.threads.template(e)}\n\t</div>\n\t<div class="${ns}-tools ${ns}-panel">\n\t\t${Player.tools.template(e)}\n\t</div>\n\n\t<div class="${ns}-footer ${ns}-row ${ns}-align-center">\n\t\t${Player.footer.template(e)}\n\t</div>\n\t<input class="${ns}-add-local-file-input" type="file" @change='playlist.addFromFiles("evt.currentTarget.files"):prevent' style="display: none" accept="image/*,.webm" multiple>\n</div>`},function(e,t,n){(function(t){e.exports={template:()=>Player.userTemplate.build({template:Player.config.footerTemplate+`<div class="${ns}-expander" data-direction="sw"></div><div class="${ns}-expander" data-direction="se"></div>`,location:"footer",sound:Player.playing,defaultName:"4chan Sounds",outerClass:ns+"-col-auto"}),initialize:function(){Player.userTemplate.maintain(Player.footer,"footerTemplate")},render:function(){t.elementHTML(Player.$(`.${ns}-footer`),Player.footer.template())}}}).call(this,n(0))},function(e,t,n){(function(t){e.exports={template:()=>Player.userTemplate.build({template:Player.config.headerTemplate+`<div class="${ns}-expander" data-direction="nw"></div><div class="${ns}-expander" data-direction="ne"></div>`,location:"header",sound:Player.playing,defaultName:"4chan Sounds",outerClass:ns+"-col-auto"}),initialize:function(){Player.userTemplate.maintain(Player.header,"headerTemplate")},render:function(){t.elementHTML(Player.$(`.${ns}-header`),Player.header.template())}}}).call(this,n(0))},function(e,t,n){const a=n(3);let l;e.exports={_keyMap:{" ":"space",arrowleft:"left",arrowright:"right",arrowup:"up",arrowdown:"down"},initialize:function(){if(Player.on("rendered",Player.hotkeys.apply),Player.on("config:hotkeys",Player.hotkeys.apply),l=a.reduce((e,t)=>("hotkey_bindings"===t.property&&t.settings.forEach(t=>e[t.property.slice(16)]=t),e),{}),"mediaSession"in navigator&&Player.config.hardwareMediaKeys){const e=[["play",()=>Player.play()],["pause",()=>Player.pause()],["stop",()=>Player.pause()],["previoustrack",()=>Player.previous()],["nexttrack",()=>Player.next()],["seekbackward",e=>Player.audio.currentTime-=e.seekOffset||10],["seekforward",e=>Player.audio.currentTime+=e.seekOffset||10],["seekto",e=>Player.audio.currentTime+=e.seekTime]];for(let[t,n]of e)try{navigator.mediaSession.setActionHandler(t,n)}catch(e){}Player.audio.addEventListener("pause",()=>navigator.mediaSession.playbackState="paused"),Player.audio.addEventListener("ended",()=>navigator.mediaSession.playbackState="paused"),Player.audio.addEventListener("play",(function(){navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new MediaMetadata({title:Player.playing.title,artist:"4chan Sounds Player",album:document.title,artwork:[{src:Player.playing.thumb}]})}))}},addHandler:()=>{Player.hotkeys.removeHandler(),document.body.addEventListener("keydown",Player.hotkeys.handle)},removeHandler:()=>{document.body.removeEventListener("keydown",Player.hotkeys.handle)},apply:function(){const e=Player.config.hotkeys;Player.hotkeys.removeHandler(),Player.off("show",Player.hotkeys.addHandler),Player.off("hide",Player.hotkeys.removeHandler),"always"===e?Player.hotkeys.addHandler():"open"===e&&(Player.isHidden||Player.hotkeys.addHandler(),Player.on("show",Player.hotkeys.addHandler),Player.on("hide",Player.hotkeys.removeHandler))},handle:function(e){if(["INPUT","SELECT","TEXTAREA","INPUT"].includes(e.target.nodeName)||Player.isHidden&&("always"!==Player.config.hotkeys||!Player.sounds.length))return;const t=e.key.toLowerCase(),n=Player.config.hotkey_bindings||{};Object.entries(n).find((function n([a,r]){if(Array.isArray(r))return r.find(e=>n([a,e]));const s=t===r.key&&!!r.shiftKey==!!e.shiftKey&&!!r.ctrlKey==!!e.ctrlKey&&!!r.metaKey==!!e.metaKey&&(!r.ignoreRepeat||!e.repeat)&&l[a];return!!s&&(e.preventDefault(),e._binding=r,Player.getHandler(s.keyHandler)(e),!0)}))},stringifyKey:function(e){let t=e.key.toLowerCase();return Player.hotkeys._keyMap[t]&&(t=Player.hotkeys._keyMap[t]),(e.ctrlKey?"Ctrl+":"")+(e.shiftKey?"Shift+":"")+(e.metaKey?"Meta+":"")+t},parseKey:function(e){const t=e.split("+");let n=t.pop();Object.keys(Player.hotkeys._keyMap).find(e=>Player.hotkeys._keyMap[e]===n&&(n=e));const a={key:n};return t.forEach(e=>a[e.toLowerCase()+"Key"]=!0),a}}},function(e,t,n){(function(t){const a=n(2),l=n(6);e.exports={idx:0,audio:{},expandedNodes:[],mediaEvents:{pause:"controls.handleMediaEvent",play:"controls.handleMediaEvent",seeked:"controls.handleMediaEvent",waiting:"controls.handleMediaEvent",timeupdate:"controls.updateDuration",loadedmetadata:"controls.updateDuration",durationchange:"controls.updateDuration",volumechange:"controls.updateVolume"},initialize(){is4chan&&(Player.inline.observer=new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.forEach(Player.inline.handleAddedNode),e.removedNodes.forEach(Player.inline.handleRemovedNode)}))})),Player.on("config:playExpandedImages",Player.inline._handleConfChange),Player.on("config:playHoveredImages",Player.inline._handleConfChange),Player.inline._handleConfChange())},_handleConfChange(){Player.config.playExpandedImages||Player.config.playHoveredImages?Player.inline.start():Player.inline.stop()},handleAddedNode(e){try{if("IMG"!==e.nodeName&&"VIDEO"!==e.nodeName)return;const n=Player.config.playExpandedImages&&e.matches(a.expandedImage),r=Player.config.playHoveredImages&&e.matches(a.hoverImage);if(n||r){const r="VIDEO"===e.nodeName;let s;try{s=isChanX?e.dataset.fileID.split(".")[1]:(n?e:document.querySelector(`a[href$="${e.src.replace(/^https?:/,"")}"]`)).closest(a.posts).id.slice(a.postIdPrefix.length)}catch(e){return}const o=s&&Player.sounds.filter(e=>e.post===s);if(!o.length)return;const i=new Audio(o[0].src),d=i.dataset.id=Player.inline.idx++;if(Player.inline.audio[d]=i,Player.inline.expandedNodes.push(e),e._inlineAudio=i,i._inlinePlayer={master:r?e:i,video:e,sounds:o,index:0},i.src=o[0].src,i.volume=Player.audio.volume,i.currentTime=0,r)e._linked=i,i._linked=e,Player.inline.updateSyncListeners(e,"add");else if(n&&Player.config.expandedControls){Player.inline.updateSyncListeners(i,"add");const n=i._inlinePlayer.controls=t.element(l({audio:i,multiple:o.length>1,audioId:d,inline:!0,actions:{previous:`inline.previous("${d}"):disabled`,playPause:`inline.playPause("${d}")`,next:`inline.next("${d}"):disabled`,seek:`controls.handleSeek("evt", "${d}"):prevent`,mute:`inline.mute("${d}")`,volume:`controls.handleVolume("evt", "${d}"):prevent`}}),e.closest(a.posts));i.volumeBar=n.querySelector(`.${ns}-volume-bar .${ns}-current-bar`),i.currentTimeBar=n.querySelector(`.${ns}-seek-bar .${ns}-current-bar`)}r&&(e.readyState<3||i.readyState<3)?(i.pause(),e.pause(),e.addEventListener("canplaythrough",Player.actions.playOnceLoaded),i.addEventListener("canplaythrough",Player.actions.playOnceLoaded)):i.play()}}catch(e){Player.logError("Failed to play sound.",e)}},handleRemovedNode(e){if(e._inlineAudio){Player.inline.updateSyncListeners(e._inlineAudio._inlinePlayer.master,"remove");const t=e._inlineAudio._inlinePlayer.controls;t&&t.parentNode.removeChild(t),e._inlineAudio.pause(),delete Player.inline.audio[e._inlineAudio.dataset.id],delete e._inlineAudio,Player.inline.expandedNodes=Player.inline.expandedNodes.filter(t=>t!==e)}},updateSyncListeners(e,t){if("VIDEO"===e.nodeName||"AUDIO"===e.nodeName){const n=e._inlineAudio||e;if("remove"===t){n._inlinePlayer.video.removeEventListener("canplaythrough",Player.actions.playOnceLoaded),n.removeEventListener("canplaythrough",Player.actions.playOnceLoaded)}Object.entries(Player.inline.mediaEvents).forEach(([n,a])=>{e[t+"EventListener"](n,Player.getHandler(a))}),"add"===t&&!e._endedListener&&(e._endedListener=()=>Player.inline.next(n.dataset.id)),e[t+"EventListener"]("ended",e._endedListener)}},start(){Player.inline.observer.observe(document.body,{childList:!0,subtree:!0})},stop(){Player.inline.observer.disconnect(),Player.inline.expandedNodes.forEach(e=>{Player.inline.updateSyncListeners(e,"remove"),e._inlineAudio.pause()}),Player.inline.expandedNodes=[]},previous(e){const t=Player.inline.audio[e],n=t&&t._inlinePlayer;n&&n.index>0&&(t.src=n.sounds[--n.index].src,t.play(),n.controls.querySelector(`.${ns}-next-button`).classList.remove("disabled"),0===n.index&&n.controls.querySelector(`.${ns}-previous-button`).classList.add("disabled"))},playPause(e){const t=Player.inline.audio[e];t&&t[t.paused?"play":"pause"]()},next(e){const t=Player.inline.audio[e],n=t&&t._inlinePlayer;n&&n.index<n.sounds.length-1&&(t.src=n.sounds[++n.index].src,t.play(),n.controls.querySelector(`.${ns}-previous-button`).classList.remove("disabled"),n.index===n.sounds.length-1&&n.controls.querySelector(`.${ns}-next-button`).classList.add("disabled"))},mute(e){const t=Player.inline.audio[e];t&&(t.volume=(Player._lastVolume||.5)*!t.volume)}}}).call(this,n(0))},function(e,t,n){(function(t,n){e.exports={_showingPIP:!1,initialize:function(){isChanX&&Player.userTemplate.maintain(Player.minimised,"chanXTemplate",["chanXControls"],["show","hide","stop"]),Player.on("rendered",Player.minimised.render),Player.on("show",Player.minimised.hidePIP),Player.on("hide",Player.minimised.showPIP),Player.on("stop",Player.minimised.hidePIP),Player.on("playsound",Player.minimised.showPIP)},render:function(){if(Player.container&&isChanX){let e=document.querySelector(`.${ns}-chan-x-controls`);if(e||(e=t.elementBefore(`<span class="${ns}-chan-x-controls ${ns}-col-auto ${ns}-align-center"></span>`,document.querySelector("#shortcuts").firstElementChild)),"never"===Player.config.chanXControls||"closed"===Player.config.chanXControls&&!Player.isHidden)return e.innerHTML="";t.elementHTML(e,Player.userTemplate.build({template:Player.config.chanXTemplate,location:"4chan-X-controls",sound:Player.playing,replacements:{"prev-button":`<a href="#" class="${ns}-media-control ${ns}-previous-button ${ns}-hover-fill" @click='previous({"force":true}):prevent'>${n.skipStart} ${n.skipStartFill}</a>`,"play-button":`<a href="#" class="${ns}-media-control ${ns}-play-button ${ns}-hover-fill ${!Player.audio||Player.audio.paused?ns+"-play":""}" @click="togglePlay:prevent">${n.play} ${n.pause} ${n.playFill} ${n.pauseFill}</a>`,"next-button":`<a href="#" class="${ns}-media-control ${ns}-next-button ${ns}-hover-fill" @click='next({"force":true}):prevent'>${n.skipEnd} ${n.skipEndFill} </a>`,"sound-current-time":`<span class="${ns}-current-time">0:00</span>`,"sound-duration":`<span class="${ns}-duration">0:00</span>`}}))}},showPIP:function(){if(!Player.isHidden||!Player.config.pip||!Player.playing||Player.minimised._showingPIP)return;Player.minimised._showingPIP=!0;const e=document.querySelector(`.${ns}-image-link`);document.body.appendChild(e),e.classList.add(ns+"-pip"),e.style.bottom=Player.position.getHeaderOffset().bottom+10+"px",e.addEventListener("click",Player.minimised._handleImageClick)},hidePIP:function(){Player.minimised._showingPIP=!1;const e=document.querySelector(`.${ns}-image-link`),t=Player.$(`.${ns}-controls`);t.parentNode.insertBefore(document.querySelector(`.${ns}-image-link`),t),e.classList.remove(ns+"-pip"),e.style.bottom=null,e.removeEventListener("click",Player.minimised._handleImageClick)},_handleImageClick:e=>{e.preventDefault(),Player.show()}}}).call(this,n(0),n(1))},function(e,t,n){(function(t,a){const{parseFiles:l,parseFileName:r}=n(4),{postIdPrefix:s}=n(2),o=n(88);e.exports={atRoot:["add","remove"],public:["search"],template:n(89),listTemplate:n(90),initialize:function(){Player.playlist._lastView="playlist"===Player.config.viewStyle||"image"===Player.config.viewStyle?Player.config.viewStyle:"playlist",Player.on("view",e=>{"playlist"===e&&Player.playlist.scrollToPlaying(),"playlist"!==e&&"image"!==e||(Player.playlist._lastView=e)}),Player.on("rendered",Player.playlist.afterRender),Player.on("playsound",e=>{Player.playlist.showImage(e),Player.$all(`.${ns}-list-item.playing, .${ns}-list-item[data-id="${Player.playing.id}"]`).forEach(e=>{const n=Player.playlist.listTemplate({sounds:[Player.sounds.find(t=>t.id===e.dataset.id)]});t.elementBefore(n,e),e.parentNode.removeChild(e)}),"fullscreen"!==Player.config.viewStyle&&Player.playlist.scrollToPlaying("nearest"),Player.config.autoScrollThread&&e.post&&(location.href=location.href.split("#")[0]+"#"+s+e.post)}),Player.on("stop",()=>{Player.$all(`.${ns}-list-item.playing`).forEach(e=>e.classList.remove("playing"));const e=Player.$(`.${ns}-image-link`);e.href="#",Player.$(`.${ns}-background-image`).src=Player.video.src="",Player.$(`.${ns}-image`).src="data:image/svg+xml;base64,"+btoa(a.fcSounds),e.classList.remove(ns+"-show-video")}),Player.on("config:filters",Player.playlist.applyFilters),Player.on("config:hoverImages",Player.playlist.setHoverImageVisibility),Player.on("menu-open",Player.playlist.setHoverImageVisibility),Player.on("menu-close",Player.playlist.setHoverImageVisibility),Player.on("config:showPlaylistSearch",Player.playlist.toggleSearch),Player.on("config:shuffle",Player.playlist._handleShuffle),Player.userTemplate.maintain(Player.playlist,"rowTemplate",["shuffle"])},render:function(){t.elementHTML(Player.$(`.${ns}-list-container`),Player.playlist.listTemplate()),Player.playlist.afterRender()},afterRender:function(){Player.playlist.hoverImage=Player.$(`.${ns}-hover-image`),Player.video=Player.$(`.${ns}-video`)},restore:function(){Player.display.setViewStyle(Player.playlist._lastView||"playlist")},showImage:function(e){const t=document.querySelector(`.${ns}-image-link`),n=t.querySelector(`.${ns}-image`),a=t.querySelector(`.${ns}-background-image`);n.src=a.src="",n.src=a.src=e.imageOrThumb,Player.video.src=Player.isVideo?e.image:void 0,"fullscreen"!==Player.config.viewStyle&&(t.href=e.image),t.classList[Player.isVideo?"add":"remove"](ns+"-show-video")},toggleView:function(e){e&&e.preventDefault();let t="playlist"===Player.config.viewStyle?"image":"image"===Player.config.viewStyle?"playlist":Player.playlist._lastView;Player.display.setViewStyle(t)},add:function(e,n){try{const a=e.id;if(Player.sounds.find(e=>e.id===a))return;let l=Player.config.shuffle?Math.floor(Math.random()*Player.sounds.length-1):Player.sounds.findIndex(e=>Player.compareIds(e.id,a)>1);if(l<0&&(l=Player.sounds.length),Player.sounds.splice(l,0,e),Player.container){if(!n){const n=Player.$(`.${ns}-list-container`);let a=t.element(`<div>${Player.playlist.listTemplate({sounds:[e]})}</div>`);if(l<Player.sounds.length-1){const e=Player.$(`.${ns}-list-item[data-id="${Player.sounds[l+1].id}"]`);n.insertBefore(a.children[0],e)}else n.appendChild(a.children[0])}1===Player.sounds.length&&Player.playlist.showImage(e),Player.config.autoshow&&/\/thread\//.test(location.href)&&1===Player.sounds.filter(e=>!e.standaloneVideo).length&&Player.show(),Player.trigger("add",e)}}catch(t){Player.logError("There was an error adding to the sound player. Please check the console for details.",t),console.log("[4chan sounds player]",e)}},addFromFiles:function(e){[...e].forEach(e=>{if(!e.type.startsWith("image")&&"video/webm"!==e.type)return;const t=URL.createObjectURL(e),n=e.type;let a=t;if("video/webm"!==e.type)return i();const l=document.createElement("canvas"),s=document.createElement("video"),o=l.getContext("2d");function i(){r(e.name,t,null,a,null,!0).forEach(e=>Player.add({...e,local:!0,type:n}))}s.addEventListener("loadeddata",(function(){o.drawImage(s,0,0),a=l.toDataURL(),i()})),s.src=t})},selectLocalFiles:function(){Player.$(`.${ns}-add-local-file-input`).click()},remove:function(e){"object"!=typeof e&&(e=Player.sounds.find(t=>t.id===""+e));const t=Player.sounds.indexOf(e);Player.playing===e&&Player.next({force:!0,paused:Player.audio.paused}),t>-1&&Player.sounds.splice(t,1);const n=e&&Player.$(`.${ns}-list-item[data-id="${e.id}"]`);n&&Player.$(`.${ns}-list-container`).removeChild(n),e&&Player.trigger("remove",e)},toggleRepeat:function(){const e=["all","one","none"],t=e.indexOf(Player.config.repeat);Player.set("repeat",e[(t+4)%3])},toggleShuffle:function(){Player.set("shuffle",!Player.config.shuffle)},_handleShuffle:function(){if(Player.config.shuffle){const e=Player.sounds;for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}else Player.sounds.sort((e,t)=>Player.compareIds(e.id,t.id));Player.trigger("order")},handleSelect:function(e){if("A"===e.target.nodeName||e.target.closest("a"))return;const t=e.currentTarget.getAttribute("data-id"),n=t&&Player.sounds.find(e=>e.id===t);n&&Player.play(n)},refresh:function(){l(document.body)},handleItemMenu:function(e,n){const a=Player.sounds.find(e=>e.id===n),l=e.currentTarget.closest(`.${ns}-list-container`)||Player.container,r=o({sound:a,postIdPrefix:s}),i=t.element(r,l),d=e.currentTarget.classList.contains(ns+"-item-menu-button")?e.currentTarget:e;Player.display.showMenu(d,i,l)},toggleHoverImages:function(e){e&&e.preventDefault(),Player.set("hoverImages",!Player.config.hoverImages)},setHoverImageVisibility:function(){const e=Player.$(`.${ns}-player`),t=!Player.config.hoverImages||Player.playlist._dragging||e.querySelector(`.${ns}-menu`);e.classList[t?"add":"remove"](ns+"-hide-hover-image")},updateHoverImage:function(e){const t=e.currentTarget.getAttribute("data-id"),n=Player.sounds.find(e=>e.id===t);Player.playlist.hoverImage.style.display="block",Player.playlist.hoverImage.setAttribute("src",n.thumb),Player.playlist.positionHoverImage(e)},positionHoverImage:function(e){const{width:t,height:n}=Player.playlist.hoverImage.getBoundingClientRect(),a=document.documentElement.clientWidth-t-5;Player.playlist.hoverImage.style.left=Math.min(e.clientX,a)+5+"px",Player.playlist.hoverImage.style.top=e.clientY-n-10+"px"},removeHoverImage:function(){Player.playlist.hoverImage.style.display="none"},handleDragStart:function(e){Player.playlist._dragging=e.currentTarget,Player.playlist.setHoverImageVisibility(),e.currentTarget.classList.add(ns+"-dragging");const t=document.createElement("img");t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.dataTransfer.setDragImage(t,0,0),e.dataTransfer.dropEffect="move",e.dataTransfer.setData("text/plain",e.currentTarget.getAttribute("data-id"))},handleDragEnter:function(e){if(!Player.playlist._dragging)return;const t=Player.playlist._dragging,n=t.getAttribute("data-id");let a=e.target.closest&&e.target.closest(`.${ns}-list-item`);if(!a||t===a)return;const l=Player.sounds.findIndex(e=>e.id===n),r=t.parentNode;if(4&t.compareDocumentPosition(a)&&(a=a.nextSibling),a){const e=a.getAttribute("data-id"),n=Player.sounds.findIndex(t=>t.id===e),s=l<n?n-1:n;r.insertBefore(t,a),Player.sounds.splice(s,0,Player.sounds.splice(l,1)[0])}else Player.sounds.push(Player.sounds.splice(l,1)[0]),r.appendChild(t);Player.trigger("order")},handleDragEnd:function(e){Player.playlist._dragging&&(delete Player.playlist._dragging,e.currentTarget.classList.remove(ns+"-dragging"),Player.playlist.setHoverImageVisibility())},scrollToPlaying:function(e="center"){if(Player.$(`.${ns}-list-container .${ns}-menu`))return;const t=Player.$(`.${ns}-list-item.playing`);t&&t.scrollIntoView({block:e})},applyFilters:function(){Player.sounds.filter(e=>!Player.acceptedSound(e)).forEach(Player.playlist.remove)},addFilter:function(e){e&&Player.set("filters",Player.config.filters.concat(e))},_handleSearch:function(e){Player.playlist.search(e.currentTarget.value.toLowerCase())},search:function(e){const t=Player.playlist._lastSearch;if(Player.playlist._lastSearch=e,e!==t)return e?void Player.sounds.forEach(e=>{const t=Player.$(`.${ns}-list-item[data-id="${e.id}"]`);t&&(t.style.display=Player.playlist.matchesSearch(e)?null:"none")}):Player.$all(`.${ns}-list-item`).forEach(e=>e.style.display=null)},matchesSearch:function(e){const t=Player.playlist._lastSearch;return!t||e.title.toLowerCase().includes(t)||String(e.post.toLowerCase()).includes(t)||String(e.src.toLowerCase()).includes(t)},toggleSearch:function(e){const t=Player.$(`.${ns}-playlist-search`);!e&&Player.playlist._lastSearch&&Player.playlist.search(),t.style.display=e?null:"none",e&&t.focus()}}}).call(this,n(0),n(1))},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-menu dialog ${ns}-dialog" id="menu" tabindex="0" data-type="post" style="position: fixed;">\n\t${e.sound.post?`<a class="entry" href="#${e.postIdPrefix+e.sound.post}">Show Post</a>`:""}\n\t<div class="entry has-submenu">\n\t\tOpen\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t<a class="entry" href="${e.sound.image}" target="_blank">Image</a>\n\t\t\t<a class="entry" href="${e.sound.src}" target="_blank">Sound</a>\n\t\t</div>\n\t</div>\n\t<div class="entry has-submenu">\n\t\tDownload\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t<a class="entry" href="#" @click='tools.download("${e.sound.image}", "${t.escAttr(e.sound.filename,!0)}"):prevent'>Image</a>\n\t\t\t<a class="entry" href="#" @click='tools.download("${e.sound.src}", "${t.escAttr(e.sound.name,!0)}"):prevent'>Sound</a>\n\t\t</div>\n\t</div>\n\t<div class="entry has-submenu">\n\t\tFilter\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t${e.sound.imageMD5?`<a class="entry" href="#" @click='playlist.addFilter("${e.sound.imageMD5}"):prevent'>Image</a>`:""}\n\t\t\t<a class="entry" href="#" @click='playlist.addFilter("${e.sound.src.replace(/^(https?\:)?\/\//,"")}"):prevent'>Sound</a>\n\t\t</div>\n\t</div>\n\t<a class="entry" href="#" @click='remove("${e.sound.id}"):prevent'>Remove</a>\n</div>`}).call(this,n(0))},function(e,t,n){(function(t){e.exports=(e={})=>`<a class="${ns}-image-link" target="_blank">\n\t<img class="${ns}-background-image"></img>\n\t<img id="fcspImage" class="${ns}-image" src="data:image/svg+xml;base64,${btoa(t.fcSounds)}"></img>\n\t<video class="${ns}-video" @play='controls.sync' @pause='controls.sync'></video>\n</a>\n${Player.controls.template({audio:Player.audio,audioId:Player.audio.dataset.id,actions:Player.controls.actions})}\n<input\n\ttype="input"\n\tclass="${ns}-playlist-search"\n\t@keyup="playlist._handleSearch"\n\tstyle="min-width: 100%; box-sizing: border-box; ${Player.config.showPlaylistSearch?"":"display: none;"}"\n\tplaceholder="Search"\n/>\n<div class="${ns}-list-container">\n\t${Player.playlist.listTemplate(e)}\n</div>\n<img class="${ns}-hover-image">`}).call(this,n(1))},function(e,t){e.exports=(e={})=>(e.sounds||Player.sounds).map(e=>`<div\n\t\tclass="${ns}-list-item ${ns}-row ${e.playing?"playing":""}"\n\t\t@click="playlist.handleSelect"\n\t\t@dragstart="playlist.handleDragStart:passive"\n\t\t@dragenter="playlist.handleDragEnter:prevent"\n\t\t@dragend="playlist.handleDragEnd:prevent"\n\t\t@dragover=":prevent"\n\t\t@drop=":prevent"\n\t\t@contextmenu='playlist.handleItemMenu("evt", "${e.id}"):prevent:stop'\n\t\t@mouseenter="playlist.updateHoverImage"\n\t\t@mouseleave="playlist.removeHoverImage"\n\t\t@mousemove="playlist.positionHoverImage:passive"\n\t\tdata-id="${e.id}"\n\t\t${Player.playlist.matchesSearch(e)?"":'style="display: none"'}\n\t\tdraggable="true"\n\t>\n\t\t${Player.userTemplate.build({template:Player.config.rowTemplate,location:"item-"+e.id,sound:e,outerClass:ns+"-col-auto"})}\n\t</div>`).join("")},function(e,t,n){const a=n(2);e.exports={initialize:function(){const{top:e,bottom:t}=Player.position.getHeaderOffset();Player.config.offsetTop=e+"px",Player.config.offsetBottom=t+"px",Player.on("show",(async function(){const[e,t]=(await GM.getValue("position")||"").split(":"),[n,a]=(await GM.getValue("size")||"").split(":");+e&&+t&&Player.position.move(e,t,!0),+n&&+a&&Player.position.resize(n,a),Player.config.limitPostWidths&&(Player.position.setPostWidths(),window.addEventListener("scroll",Player.position.setPostWidths))})),Player.on("hide",(function(){Player.position.setPostWidths(),window.removeEventListener("scroll",Player.position.setPostWidths)})),Player.on("config",e=>{"limitPostWidths"!==e&&"minPostWidth"!==e||(window.removeEventListener("scroll",Player.position.setPostWidths),Player.position.setPostWidths(),Player.config.limitPostWidths&&window.addEventListener("scroll",Player.position.setPostWidths))}),new MutationObserver((function(){document.querySelectorAll("#hoverUI .postContainer, .inline .postContainer, .backlink_container article").forEach(e=>{e.style.maxWidth=null,e.style.minWidth=null})})).observe(document.body,{childList:!0,subtree:!0}),Player.syncTab("position",e=>Player.position.move(...e.split(":").concat(!0))),Player.syncTab("size",e=>Player.position.resize(...e.split(":")))},setPostWidths:function(){const e=document.documentElement.clientWidth-Player.container.offsetLeft+10,t=!Player.isHidden&&Player.config.limitPostWidths,n=Player.container.offsetTop,l=Player.container.getBoundingClientRect().height+n;document.querySelectorAll(a.limitWidthOf).forEach(a=>{const r=t&&a.getBoundingClientRect(),s=t&&r.top+r.height>n&&r.top<l;a.style.maxWidth=s?`calc(100% - ${e}px)`:null,a.style.minWidth=s&&Player.config.minPostWidth?""+Player.config.minPostWidth:null})},initResize:function(e){try{e.preventDefault()}catch(e){}Player._startX=(e.touches&&e.touches[0]||e).clientX,Player._startY=(e.touches&&e.touches[0]||e).clientY;let{width:t,height:n}=Player.container.getBoundingClientRect();Player._startWidth=t,Player._startHeight=n,Player._startTop=Player.container.offsetTop,Player._startLeft=Player.container.offsetLeft;const a=e.currentTarget.dataset.direction||"se";Player._resizeX=a.includes("e")?1:a.includes("w")?-1:0,Player._resizeY=a.includes("s")?1:a.includes("n")?-1:0,Player._resizeMoveX=a.includes("w")?-1:0,Player._resizeMoveY=a.includes("n")?-1:0,Player._resizeTarget=e.currentTarget},doResize:function(e){try{e.preventDefault()}catch(e){}const t=((e.touches&&e.touches[0]||e).clientX-Player._startX)*Player._resizeX,n=((e.touches&&e.touches[0]||e).clientY-Player._startY)*Player._resizeY,a="true"!==Player._resizeTarget.dataset.bypassPosition&&(Player._resizeMoveX||Player._resizeMoveY);Player.position.resize(Player._startWidth+t,Player._startHeight+n,a||Player._resizeTarget.dataset.allowOffscreen),a&&Player.position.move(Player._startLeft+t*Player._resizeMoveX,Player._startTop+n*Player._resizeMoveY)},stopResize:function(e){try{e.preventDefault()}catch(e){}const{width:t,height:n}=Player.container.getBoundingClientRect();"true"!==Player._resizeTarget.dataset.bypassSave&&(GM.setValue("size",t+":"+n),(Player._resizeMoveX||Player._resizeMoveY)&&GM.setValue("position",parseInt(Player.container.style.left,10)+":"+parseInt(Player.container.style.top,10)))},resize:function(e,t,n){if(!Player.container||"fullscreen"===Player.config.viewStyle)return;const{bottom:a}=Player.position.getHeaderOffset();n||(t=Math.min(t,document.documentElement.clientHeight-Player.container.offsetTop-a),e=Math.min(e,document.documentElement.clientWidth-Player.container.offsetLeft)),Player.container.style.width=e+"px",Player.container.style.height=t+"px",Player.controls.preventWrapping()},initMove:function(e){if("A"===e.target.nodeName||e.target.closest("a")||e.target.classList.contains(ns+"-expander"))return e.preventDrag=!0;try{e.preventDefault()}catch(e){}Player.$(`.${ns}-header`).style.cursor="grabbing";const{width:t,height:n}=Player.container.getBoundingClientRect();Player.position.resize(t,n);const a=(e.touches&&e.touches[0]||e).clientX,l=(e.touches&&e.touches[0]||e).clientY;Player._offsetX=a-Player.container.offsetLeft,Player._offsetY=l-Player.container.offsetTop},doMove:function(e){try{e.preventDefault()}catch(e){}const t=(e.touches&&e.touches[0]||e).clientX,n=(e.touches&&e.touches[0]||e).clientY;Player.position.move(t-Player._offsetX,n-Player._offsetY)},stopMove:function(e){try{e.preventDefault()}catch(e){}Player.$(`.${ns}-header`).style.cursor=null,GM.setValue("position",parseInt(Player.container.style.left,10)+":"+parseInt(Player.container.style.top,10))},move:function(e,t,n){if(!Player.container)return;const{top:a,bottom:l}=Player.position.getHeaderOffset(),{width:r,height:s}=Player.container.getBoundingClientRect(),o=n?1/0:document.documentElement.clientWidth-r,i=n?1/0:document.documentElement.clientHeight-s-l;Player.container.style.left=Math.max(0,Math.min(e,o))+"px",Player.container.style.top=Math.max(a,Math.min(t,i))+"px",Player.config.limitPostWidths&&Player.position.setPostWidths()},getHeaderOffset:function(){const e=document.documentElement.classList,t=e.contains("fixed"),n=t?document.querySelector("#header-bar").getBoundingClientRect().height:0;return{top:t&&e.contains("top-header")?n:0,bottom:t&&e.contains("bottom-header")?n:0}},showRelativeTo:function(e,t){const n=t instanceof Node?t.getBoundingClientRect():{top:t.clientY,left:t.clientX,width:0,height:0};e.style.top=n.top+n.height+"px",e.style.left=n.left+"px";const{width:a,height:l}=e.getBoundingClientRect();n.left+a>document.documentElement.clientWidth&&(e.style.left=n.left+n.width-a+"px"),n.top+n.height+l>document.documentElement.clientHeight-Player.position.getHeaderOffset().bottom&&(e.style.top=n.top-l+"px")}}},function(e,t,n){(function(t){const a=n(2),l=n(3),r=n(93);e.exports={public:["switch","next","previous"],savedThemesTemplate:n(94),themeKeybindsTemplate:n(95),initialize:async function(){Player.theme.render(),Player.userTemplate.maintain(Player.theme,"customCSS"),Player.theme.validateOrder()},render:function(){Player.userStylesheet=Player.userStylesheet||t.element('<style id="sound-player-user-css"></style>',document.head),Player.userStylesheet.innerHTML=Player.userTemplate.build({template:"/* Sounds Player User CSS */\n\n"+Player.config.customCSS,sound:Player.playing,ignoreButtons:!0,ignoreDisplayBlocks:!0,ignoreSoundName:!0,ignoreVersion:!0})},forceBoardTheme:function(){Player.theme.applyBoardTheme({force:!0}),Player.settings.save()},applyBoardTheme:function(e={}){const n=t.element(`<div class="${a.styleFetcher}"></div>`,document.body),r=document.defaultView.getComputedStyle(n);if("rgba(0, 0, 0, 0)"===r.backgroundColor)return setTimeout(Player.display.applyBoardTheme,0);Object.assign(r,{page_background:window.getComputedStyle(document.body).backgroundColor});const s={"colors.text":"color","colors.background":"backgroundColor","colors.odd_row":"backgroundColor","colors.border":"borderBottomColor","colors.even_row":r.borderBottomColor===r.color?"backgroundColor":"borderBottomColor","colors.page_background":"page_background"};l.find(e=>"colors"===e.property).settings.forEach(n=>{const a=e.force||n.default===t.get(Player.config,n.property);s[n.property]&&(n.default=r[s[n.property]]),a&&Player.set(n.property,n.default,{bypassSave:!0,bypassRender:!0,bypassStylesheet:!0})}),document.body.removeChild(n),e.bypassRender||(Player.display.updateStylesheet(),Player.settings.render())},next:function(){const e=["Default"].concat(Player.config.savedThemesOrder),t=e.indexOf(Player.config.selectedTheme),n=e[(t+e.length+1)%e.length];Player.theme.switch(n)},previous:function(){const e=["Default"].concat(Player.config.savedThemesOrder),t=e.indexOf(Player.config.selectedTheme),n=e[(t+e.length-1)%e.length];Player.theme.switch(n)},switch:function(e){if("Default"!==e&&!Player.config.savedThemes[e])return Player.logError(`Theme '${e}' does not exist.`,null,"warning");Player.set("selectedTheme",e),"Default"===e?(["headerTemplate","footerTemplate","rowTemplate","chanXTemplate","customCSS"].forEach(e=>{Player.settings.reset(e,{bypassRender:!0,bypassStylesheet:!0})}),Player.settings.render(),Player.display.updateStylesheet()):Player.settings.load(Player.config.savedThemes[e])},validateOrder:function(){const e=Player.config.savedThemesOrder;let t;Player.config.savedThemesOrder=e.concat(Object.keys(Player.config.savedThemes)).filter((n,a)=>Player.config.savedThemes[n]&&(t=e.indexOf(n),-1===t||t===a))},parseSwitch:function(e,t,n){t=[...t];const a=n.currentTarget.parentNode.dataset.name;"Default"===a||Player.config.savedThemes[a]||Player.logError(`No theme named '${a}'.`,null,"warning");const l=Player.hotkeys.parseKey(e);if(l.key){let e=t.find(e=>e.themeName===a);e||t.push(e={themeName:a}),Object.assign(e,l)}else t=t.filter(e=>e.themeName!==a);return t},handleSwitch:function(e){Player.theme.switch(e._binding.themeName)},moveUp:e=>Player.theme._swapOrder(e,-1),moveDown:e=>Player.theme._swapOrder(e,1),_swapOrder:function(e,t){const n=e.currentTarget.closest("[data-theme]").dataset.theme,a=Player.config.savedThemesOrder,l=a.indexOf(n);l+t>=0&&l+t<a.length&&([a[l],a[l+t]]=[a[l+t],a[l]],Player.$(`[data-theme="${n}"]`).style.order=l+t,Player.$(`[data-theme="${a[l]}"]`).style.order=l,Player.settings.set("savedThemes",Player.config.savedThemes,{bypassValidation:!0,bypassRender:!0}))},remove:function(e){const t=Player.config.savedThemes,n=e.currentTarget.closest("[data-theme]"),a=n.dataset.theme;if("Default"===a)return Player.logError("Cannot delete the default theme. You can instead overwrite it.",null,"warning");Player.settings.findDefault("savedThemes").default[a]?t[a]=null:delete t[a],Player.config.savedThemesOrder=Player.config.savedThemesOrder.filter(e=>e!==a),n.parentNode.removeChild(n),Player.settings.set("savedThemes",t,{bypassValidation:!0,bypassRender:!0});const l=Player.config.hotkey_bindings.switchTheme.find(e=>e.themeName===a);l&&Player.set("hotkey_bindings.switchTheme",Player.config.hotkey_bindings.switchTheme.splice(l,1),{bypassValidation:!0})},restoreDefaults:function(){Object.assign(Player.config.savedThemes,Player.settings.findDefault("savedThemes").default),Player.theme.validateOrder(),Player.set("savedThemes",Player.config.savedThemes,{bypassValidation:!0})},showSaveOptions:function(e){const n=Player.$(`.${ns}-theme-save-options`);if(n)return Player.container.removeChild(n);const a=t.element(r({settingsConfig:l}),Player.container);Player.position.showRelativeTo(a,e.currentTarget),Player.$(`.${ns}-save-theme-name`).focus()},toggleSaveFields:function(){Player.$(`.${ns}-theme-save-options`).classList.toggle("fields-collapsed"),Player.position.showRelativeTo(Player.$(`.${ns}-theme-save-options`),Player.$('[\\@click^="theme.showSaveOptions"]'))},toggleSaveButtonText:function(e){Player.$(`.${ns}-save-theme`).innerHTML=Player.config.savedThemes[e.currentTarget.value]?"Update":"Create"},save:function(){const e=Player.$(`.${ns}-save-theme-name`).value;if(!e)return Player.logError("A name is required to save a theme.",null,"warning");const n=[...Player.$all(`.${ns}-theme-save-options input:checked`)].reduce((e,n)=>t.set(e,n.value,t.get(Player.config,n.value)),{});Player.config.savedThemes[e]=n,-1===Player.config.savedThemesOrder.indexOf(e)&&Player.config.savedThemesOrder.push(e),Player.set("savedThemes",Player.config.savedThemes,{bypassValidation:!0}),Player.container.removeChild(Player.$(`.${ns}-theme-save-options`))}}}).call(this,n(0))},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-theme-save-options ${ns}-dialog fields-collapsed dialog" data-allow-click="true" style="top: 0px; left: 0px;">\n\t<div class="${ns}-row ${ns}-align-center">\n\t\t<div class="${ns}-col">\n\t\t\t<input type="text" class="${ns}-save-theme-name" @keyup="theme.toggleSaveButtonText:prevent" placeholder="Name">\n\t\t</div>\n\t\t<div class="${ns}-col">\n\t\t\t<a class="${ns}-save-theme" @click="theme.save:prevent" href="#">Create</a>\n\t\t</div>\n\t</div>\n\t<a class="${ns}-row" @click="theme.toggleSaveFields:prevent" href="#" style="margin: .25rem 0">\n\t\t<span style="margin-right: .25rem">Included Settings</span>\n\t\t${t.chevronDown}\n\t\t${t.chevronUp}\n\t</a>\n\t${function e(t,n){return t.map(t=>{const a=t.property&&"theme_field-"+t.property.replace(/\./g,"_");return t.settings?e(t.settings,t):{...n||{},...t}.allowInTheme||t.themeField?`<div><input type="checkbox" id="${a}" value="${t.property}" ${t.themeField?"checked":""}><label for="${a}">${n?(n.themeFieldTitle||n.title)+": ":""}${t.title}</label></div>`:""}).join("")}(e.settingsConfig)}\n</div>`}).call(this,n(1))},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-row ${ns}-saved-themes">\n\t<div class="${ns}-row ${ns}-align-start ${ns}-sub-settings" data-theme="Default" style="order: -1">\n\t\t<div class="${ns}-col ${ns}-space-between">Default</div>\n\t\t<div class="${ns}-col">\n\t\t\t<a href="#" class="${ns}-heading-action" @click='theme.switch("Default"):prevent' data-property="savedTheme">${"Default"===Player.config.selectedTheme?t.checkSquare:t.square}</a>\n\t\t</div>\n\t</div>\n\t${Player.config.savedThemesOrder.map((e,n)=>`\n\t\t<div class="${ns}-row ${ns}-align-start ${ns}-sub-settings" data-theme="${e}" style="order: ${n}">\n\t\t\t<div class="${ns}-col ${ns}-space-between">${e}</div>\n\t\t\t<div class="${ns}-col">\n\t\t\t\t<a href="#" class="${ns}-heading-action" @click='theme.switch("${e}"):prevent'>${Player.config.selectedTheme===e?t.checkSquare:t.square}</a>\n\t\t\t\t<a href="#" class="${ns}-heading-action ${ns}-move-theme-up ${0===n?"disabled":""}" @click="theme.moveUp:prevent" >${t.arrowUp}</a>\n\t\t\t\t<a href="#" class="${ns}-heading-action ${ns}-move-theme-down ${n===Player.config.savedThemesOrder.length-1?"disabled":""}" @click="theme.moveDown:prevent">${t.arrowDown}</a>\n\t\t\t\t<a href="#" class="${ns}-heading-action ${ns}-remove-theme" @click="theme.remove:prevent">${t.trash}</a>\n\t\t\t</div>\n\t\t</div>\n\t`).join("")}\n</div>`}).call(this,n(1))},function(e,t){e.exports=(e={})=>["Default"].concat(Player.config.savedThemesOrder).map(e=>`\n\t<div class="${ns}-row ${ns}-select-themes">\n\t\t<div class="${ns}-col"><span style="padding-left: .5rem">- ${e}</span></div>\n\t\t<div class="${ns}-col" data-name="${e}">\n\t\t\t<input\n\t\t\t\ttype="text"\n\t\t\t\t@keydown="settings.handleKeyChange"\n\t\t\t\tvalue="${Player.hotkeys.stringifyKey(Player.config.hotkey_bindings.switchTheme.find(t=>t.themeName===e)||{key:""})}"\n\t\t\t\tdata-property="hotkey_bindings.switchTheme"\n\t\t\t/>\n\t\t</div>\n\t</div>\n`).join("")},function(e,t,n){(function(t){const{parseFileName:a}=n(4),{get:l}=n(97);e.exports={template:n(98),boardsTemplate:n(99),listsTemplate:n(100),boardList:null,soundThreads:null,displayThreads:{},selectedBoards:Board?[Board]:["a"],showAllBoards:!1,initialize:async function(){Player.threads.hasParser=is4chan&&"undefined"!=typeof Parser,Player.threads.hasParser&&!Parser.customSpoiler&&(Parser.customSpoiler={}),Player.on("show",Player.threads._initialFetch),Player.on("view",Player.threads._initialFetch),Player.on("rendered",Player.threads.afterRender),Player.on("config:threadsViewStyle",Player.threads.render);try{const e=await GM.getValue("threads_board_selection");e&&(Player.threads.selectedBoards=e.split(","))}catch(e){}},_initialFetch:function(){Player.container&&"threads"===Player.config.viewStyle&&null===Player.threads.boardList&&(Player.threads.fetchBoards(!0),Player.off("show",Player.threads._initialFetch),Player.off("view",Player.threads._initialFetch))},render:function(){Player.container&&(t.elementHTML(Player.$(`.${ns}-threads`),Player.threads.template()),Player.threads.afterRender())},afterRender:function(){const e=Player.$(`.${ns}-thread-list`);if(e){const t=document.defaultView.getComputedStyle(document.body);e.style.background=t.backgroundColor,e.style.backgroundImage=t.backgroundImage,e.style.backgroundRepeat=t.backgroundRepeat,e.style.backgroundPosition=t.backgroundPosition}Player.threads.renderThreads()},renderThreads:function(){if(Player.threads.hasParser&&"table"!==Player.config.threadsViewStyle)try{const e=Player.$(`.${ns}-thread-list`);e.innerHTML="";for(let n in Player.threads.displayThreads){const a=Player.threads.boardList.find(e=>e.board===n),l=`/${a.board}/ - ${a.title}`;t.element(`<div class="boardBanner"><div class="boardTitle">${l}</div></div>`,e);const r=Player.threads.displayThreads[n];for(let n=0;n<r.length;n++)e.appendChild(Parser.buildHTMLFromJSON.call(Parser,r[n],r[n].board,!0,!0)),t.element('<hr style="clear: both">',e)}}catch(e){Player.logError("Unable to display the threads board view.",e,"warning"),Player.set("threadsViewStyle","table"),Player.renderThreads()}else t.elementHTML(Player.$(`.${ns}-threads-body`),Player.threads.listsTemplate())},renderBoards:function(){t.elementHTML(Player.$(`.${ns}-thread-board-list`),Player.threads.boardsTemplate())},toggle:function(){"threads"===Player.config.viewStyle?Player.playlist.restore():Player.display.setViewStyle("threads")},toggleBoardList:function(){Player.threads.showAllBoards=!Player.threads.showAllBoards,Player.$(`.${ns}-all-boards-link`).innerHTML=Player.threads.showAllBoards?"Selected Only":"Show All",Player.threads.renderBoards()},toggleBoard:async function(e,t){t?!Player.threads.selectedBoards.includes(e)&&Player.threads.selectedBoards.unshift(e):Player.threads.selectedBoards=Player.threads.selectedBoards.filter(t=>t!==e),await GM.setValue("threads_board_selection",Player.threads.selectedBoards.slice(0,10).join(","))},fetchBoards:async function(e){Player.threads.loading=!0,Player.threads.render(),Player.threads.boardList=(await l("https://a.4cdn.org/boards.json")).boards,e?Player.threads.fetch():(Player.threads.loading=!1,Player.threads.render())},fetch:async function(){if(Player.threads.loading=!0,Player.threads.render(),!Player.threads.boardList)try{await Player.threads.fetchBoards()}catch(e){return Player.logError("Failed fetching the boards list.",e)}const e=[];try{await Promise.all(Player.threads.selectedBoards.map(async t=>{const n=Player.threads.boardList.find(e=>e.board===t);if(!n)return;(n&&await l("https://a.4cdn.org/%s/catalog.json".replace("%s",t))||[]).forEach(({page:a,threads:l})=>{e.push(...l.map(e=>Object.assign(e,{board:t,page:a,ws_board:n.ws_board})))})})),Player.threads.soundThreads=e.filter(e=>a(e.filename,`https://i.4cdn.org/${e.board}/${e.tim}${e.ext}`,e.no,`https://i.4cdn.org/${e.board}/${e.tim}s${e.ext}`,e.md5,!0).length)}catch(e){Player.logError("Failed searching for sounds threads.",e)}Player.threads.loading=!1,Player.threads.filter(Player.$(`.${ns}-threads-filter`).value,!0),Player.threads.render()},filter:function(e,t){e=e.toLowerCase(),Player.threads.filterValue=e||"",null!==Player.threads.soundThreads&&(Player.threads.displayThreads=Player.threads.soundThreads.reduce((t,n)=>((!e||n.sub&&n.sub.toLowerCase().includes(e)||n.com&&n.com.toLowerCase().includes(e))&&(t[n.board]||(t[n.board]=[]),t[n.board].push(n)),t),{}),!t&&Player.threads.renderThreads())}}}).call(this,n(0))},function(e,t){const n={};e.exports={get:async function(e){return new Promise((function(t,a){const l={};n[e]&&(l["If-Modified-Since"]=n[e].lastModified),GM.xmlHttpRequest({method:"GET",url:e,headers:l,responseType:"json",onload:a=>{a.status>=200&&a.status<300&&(n[e]={lastModified:a.responseHeaders["last-modified"],response:a.response}),t(304===a.status?n[e].response:a.response)},onerror:a})}))}}},function(e,t){e.exports=(e={})=>`<div class="${ns}-heading lined">\n\tActive Threads\n\t${Player.threads.loading?"":`- <a class="${ns}-heading-action" @click="threads.fetch:prevent" href="#">Update</a>`}\n</div>\n\n<div style="margin: 0 .25rem; display: ${Player.threads.loading?"block":"none"}">Loading</div>\n\n<div style="margin: 0 .25rem; display: ${Player.threads.loading?"none":"block"}">\n\t<div class="${ns}-heading">\n\t\tFilter\n\t</div>\n\t<input\n\t\ttype="text"\n\t\tclass="${ns}-threads-filter"\n\t\t@keyup='threads.filter("evt.target.value")'\n\t\tvalue="${Player.threads.filterValue||""}"\n\t/>\n\n\t<div class="${ns}-heading">\n\t\tBoards -\n\t\t<a class="${ns}-all-boards-link ${ns}-heading-action" @click="threads.toggleBoardList:prevent" href="#">\n\t\t\t${Player.threads.showAllBoards?"Selected Only":"Show All"}\n\t\t</a>\n\t</div>\n\t<div class="${ns}-thread-board-list">\n\t\t${Player.threads.boardsTemplate(e)}\n\t</div>\n\n\t${Player.threads.hasParser?`<div class="${ns}-heading" style="text-align: center">\n\t\t\t${"table"!==Player.config.threadsViewStyle?`<a class="${ns}-heading-action" @click='set("threadsViewStyle","table"):prevent' href="#">Table</a>`:"<span>Table</span>"}\n\t\t\t|\n\t\t\t${"board"!==Player.config.threadsViewStyle?`<a class="${ns}-heading-action" @click='set("threadsViewStyle","board"):prevent' href="#">Board</a>`:"<span>Board</span>"}\n\t\t</div>`:""}\n\t${Player.threads.hasParser&&"table"!==Player.config.threadsViewStyle?`<div class="${ns}-thread-list"></div>`:`<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Thread</th>\n\t\t\t\t\t<th>Subject</th>\n\t\t\t\t\t<th>Replies/Images</th>\n\t\t\t\t\t<th>Started</th>\n\t\t\t\t\t<th>Updated</th>\n\t\t\t\t<tr>\n\t\t\t\t<tbody class="${ns}-threads-body"></tbody>\n\t\t\t</table>`}\n</div>`},function(e,t){e.exports=(e={})=>(Player.threads.boardList||[]).map(e=>{let t=Player.threads.selectedBoards.includes(e.board);return t||Player.threads.showAllBoards?`\n\t\t<label>\n\t\t\t<input\n\t\t\t\ttype="checkbox"\n\t\t\t\t@change='threads.toggleBoard("${e.board}", "evt.currentTarget.checked")'\n\t\t\t\tvalue="${e.board}"\n\t\t\t\t${t?"checked":""}\n\t\t\t/>\n\t\t\t/${e.board}/\n\t\t</label>`:""}).join("")},function(e,t,n){(function(t){e.exports=(e={})=>Object.keys(Player.threads.displayThreads).reduce((e,n)=>e.concat(Player.threads.displayThreads[n].map(e=>`\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<a class="quotelink" href="//boards.${e.ws_board?"4channel":"4chan"}.org/${e.board}/thread/${e.no}#p${e.no}" target="_blank">\n\t\t\t\t\t>>>/${e.board}/${e.no}\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t\t<td>${e.sub||""}</td>\n\t\t\t<td>${e.replies} / ${e.images}</td>\n\t\t\t<td>${t.timeAgo(e.time)}</td>\n\t\t\t<td>${t.timeAgo(e.last_modified)}</td>\n\t\t</tr>\n\t`)),[]).join("")}).call(this,n(0))},function(e,t,n){(function(t){const a=n(102),l=n(106);e.exports={template:n(108),...a,...l,initialize(){a.initialize()},render(){t.elementHTML(Player.$(`.${ns}-tools`).innerHTML,Player.tools.template()),a.afterRender()},toggle(){"tools"===Player.config.viewStyle?Player.playlist.restore():Player.display.setViewStyle("tools")},handleDecoded(e){Player.$(`.${ns}-encoded-input`).value=encodeURIComponent(e.currentTarget.value)},handleEncoded(e){Player.$(`.${ns}-decoded-input`).value=decodeURIComponent(e.currentTarget.value)}}}).call(this,n(0))},function(e,t,n){(function(t,a){const l=n(103),r=n(104),s=e.exports={hasFFmpeg:"function"==typeof ffmpeg,_uploadIdx:0,createTemplate:n(105),createHostsTemplate:r,createCompleteTemplate:l,initialize(){Player.on("config:uploadHosts",()=>Player.$(ns+"-create-hosts-container").innerHTML=r()),Player.on("config:defaultUploadHost",e=>Player.$(`.${ns}-create-sound-host`).value=e),Player.on("rendered",s.afterRender)},afterRender(){s.status=Player.$(`.${ns}-create-sound-status`),Player.tools.imgInput=Player.$(`.${ns}-create-sound-img`),Player.tools.sndInput=Player.$(`.${ns}-create-sound-snd`)},async handleImageSelect(e){const t=(e&&e.currentTarget||Player.tools.imgInput).files[0],n="video/webm"===t.type;let a=t.name.replace(/\.[^/.]+$/,"");if(Player.tools.hasFFmpeg){Player.$(`.${ns}-use-video-label`).style.display=n?"inherit":"none";const e=Player.$(`.${ns}-use-video`);e.checked&&n&&Player.tools.handleFileSelect(Player.tools.sndInput,[t]),e.checked&&!n&&e.click()}else await Player.tools.hasAudio(t)&&Player.logError("Audio not allowed for the image webm.",null,"warning");Player.$(`.${ns}-create-sound-name`).setAttribute("placeholder",a)},handleFileSelect(e,n){const l=e.closest(`.${ns}-file-input`),r=l.querySelector(".text"),s=l.querySelector(`.${ns}-file-list`);n||(n=[...e.files]),l.classList[n.length?"remove":"add"]("placeholder"),r.innerHTML=n.length>1?n.length+" files":n[0]&&n[0].name||"",s&&t.elementHTML(s,n.length<2?"":n.map((e,t)=>`<div class="${ns}-row">\n\t\t\t\t<div class="${ns}-col ${ns}-truncate-text">${e.name}</div>\n\t\t\t\t<a class="${ns}-col-auto" @click="tools.handleFileRemove:prevent" href="#" data-idx="${t}">${a.close}</a>\n\t\t\t</div>`).join(""))},handleFileRemove(e){const t=+e.currentTarget.getAttribute("data-idx"),n=e.currentTarget.closest(`.${ns}-file-input`).querySelector('input[type="file"]'),a=new DataTransfer;for(let e=0;e<n.files.length;e++)e!==t&&a.items.add(n.files[e]);n.files=a.files,Player.tools.handleFileSelect(n)},handleWebmSoundChange(e){const t=Player.tools.sndInput,n=Player.tools.imgInput;Player.tools.handleFileSelect(t,e.currentTarget.checked&&[n.files[0]])},toggleSoundInput(e){const t="url"===e;Player.$(`.${ns}-create-sound-snd-url`).closest(`.${ns}-row`).style.display=t?null:"none",Player.$(`.${ns}-create-sound-snd`).closest(`.${ns}-file-input`).style.display=t?"none":null,Player.tools.useSoundURL=t},handleCreateSoundDrop(e){const t="INPUT"===e.target.nodeName&&"file"===e.target.getAttribute("type")&&e.target;return[...e.dataTransfer.files].forEach(e=>{const n=e.type.startsWith("video"),a=e.type.startsWith("image")||"video/webm"===e.type,l=e.type.startsWith("audio");if(n||a||l){const n="video/webm"===e.type&&t?t:a?Player.tools.imgInput:Player.tools.sndInput,l=new DataTransfer;n.multiple&&[...n.files].forEach(e=>l.items.add(e)),l.items.add(e),n.files=l.files,Player.tools.handleFileSelect(n),n===Player.tools.imgInput&&Player.tools.handleImageSelect(),n===Player.tools.sndInput&&Player.tools.useSoundURL&&Player.tools.toggleSoundInput("file")}}),!1},async handleCreate(){Player.tools._createdImageURL&&URL.revokeObjectURL(Player.tools._createdImageURL),Player.tools._createdImage=null,s.status.style.display="block",s.status.innerHTML="Creating sound image",Player.$(`.${ns}-create-button`).disabled=!0;const e=Player.config.uploadHosts[Player.$(`.${ns}-create-sound-host`).value],n=Player.tools.useSoundURL;let a=Player.tools.imgInput.files[0],r=n&&Player.$(`.${ns}-create-sound-snd-url`).value.split(",").map(e=>e.trim()).filter(e=>e),o=(Player.$(`.${ns}-use-video`)||{}).checked&&a&&a.type.startsWith("video")?a&&[a]:[...Player.tools.sndInput.files];const i=Player.$(`.${ns}-create-sound-name`).value,d=i?((r||o).length>1?i.split(","):[i]).map(e=>e.trim()):a&&[a.name.replace(/\.[^/.]+$/,"")];try{if(!a)throw new PlayerError("Select an image or webm.","warning");if(a.type.startsWith("video")&&await Player.tools.hasAudio(a)){if(!Player.tools.hasFFmpeg)throw s.status.innerHTML+="<br>Audio not allowed for the image webm.<br>Remove the audio from the webm and try again.",new PlayerError("Audio not allowed for the image webm.","warning");a=await Player.tools.extract(a,"video")}const i=d.join("").length+8*(r||o).length;if(n){try{r=r.map(e=>new URL(e)&&e.replace(/^(https?:)?\/\//,""))}catch(e){throw new PlayerError("The provided sound URL is invalid.","warning")}if(218<i+r.join("").length)throw new PlayerError("The generated image filename is too long.","warning")}else{if(!o||!o.length)throw new PlayerError("Select a sound.","warning");if(e.filenameLength?218<i+e.filenameLength*o.length:o.length>8)throw new PlayerError("The generated image filename is too long.","warning");o=await Promise.all(o.map(async e=>{if(e.type.startsWith("video")){if(!await Player.tools.hasAudio(e))throw new PlayerError(`The selected video has no audio. (${e.name})`,"warning");if(Player.tools.hasFFmpeg)return await Player.tools.extract(e,"audio")}return e}));try{r=await Promise.all(o.map(async t=>Player.tools.postFile(t,e)))}catch(e){throw new PlayerError("Upload failed.","error",e)}}if(!r.length)throw new PlayerError("No sounds selected.","warning");let c="";for(let e=0;e<r.length;e++)c+=(d[e]||"")+"[sound="+encodeURIComponent(r[e].replace(/^(https?:)?\/\//,""))+"]";const p=a.name.match(/\.([^/.]+)$/)[1];Player.tools._createdImage=new File([a],c+"."+p,{type:a.type}),Player.tools._createdImageURL=URL.createObjectURL(Player.tools._createdImage),t.element(l(),s.status)}catch(e){s.status.innerHTML+="<br>Failed! "+(e instanceof PlayerError?e.reason:""),Player.logError("Failed to create sound image",e)}Player.$(`.${ns}-create-button`).disabled=!1},hasAudio:e=>!(!e.type.startsWith("audio")&&!e.type.startsWith("video"))&&new Promise((t,n)=>{const a=URL.createObjectURL(e),l=document.createElement("video");l.addEventListener("loadeddata",()=>{URL.revokeObjectURL(a),t(l.mozHasAudio||!!l.webkitAudioDecodedByteCount)}),l.addEventListener("error",n),l.src=a}),async extract(e,t){if(s.status.innerHTML+="<br>Extracting "+t,"function"!=typeof ffmpeg)return e;const n=e.name.replace(/\.[^/.]+$/,"")+("audio"===t?".ogg":".webm"),a=ffmpeg({MEMFS:[{name:"_"+e.name,data:await new Response(e).arrayBuffer()}],arguments:"audio"===t?["-i","_"+e.name,"-vn","-c","copy",n]:["-i","_"+e.name,"-an","-c","copy",n]});return new File([a.MEMFS[0].data],n,{type:"audio"===t?"audio/ogg":"video/webm"})},async postFile(e,n){const a=Player.tools._uploadIdx++;if(!n||n.invalid)throw new PlayerError("Invalid upload host.","error");const l=new FormData;return Object.keys(n.data).forEach(t=>{null!==n.data[t]&&l.append(t,"$file"===n.data[t]?e:n.data[t])}),s.status.innerHTML+=`<br><span class="${ns}-upload-status-${a}">Uploading ${e.name}</span>`,new Promise((r,s)=>{GM.xmlHttpRequest({method:"POST",url:n.url,data:l,responseType:n.responsePath?"json":"text",headers:n.headers,onload:async l=>{if(l.status<200||l.status>=300)return s(l);const o=n.responsePath?t.get(l.response,n.responsePath):n.responseMatch?(l.responseText.match(new RegExp(n.responseMatch))||[])[1]:l.responseText,i=n.soundUrl?n.soundUrl.replace("%s",o):o;Player.$(`.${ns}-upload-status-${a}`).innerHTML=`Uploaded ${e.name} to <a href="${i}" target="_blank">${i}</a>`,r(i)},upload:{onprogress:t=>{const n=t.total>0?t.total:e.size;Player.$(`.${ns}-upload-status-${a}`).innerHTML=`Uploading ${e.name} - ${Math.floor(t.loaded/n*100)}%`}},onerror:s})})},addCreatedToPlayer(){Player.playlist.addFromFiles([Player.tools._createdImage])},addCreatedToQR(){if(!is4chan)return;const e=document.querySelector(isChanX?".qr-link":".open-qr-link"),t=new DataTransfer;if(t.items.add(Player.tools._createdImage),isChanX){e.click();const n=new CustomEvent("drop",{view:window,bubbles:!0,cancelable:!0});n.dataTransfer=t,document.querySelector("#qr").dispatchEvent(n)}else e?(e.click(),document.querySelector("#qrFile").files=t.files):(document.querySelector("#togglePostFormLink a").click(),document.querySelector("#postFile").files=t.files,document.querySelector(".postForm").scrollIntoView())}}}).call(this,n(0),n(1))},function(e,t){e.exports=(e={})=>`<span>\n\t<br>Complete!<br>'\n\t${is4chan?'<a href="#" @click="tools.addCreatedToQR:prevent">Post</a> - ':""}\n\t<a href="#" @click="tools.addCreatedToPlayer:prevent">Add</a> -\n\t<a href="${Player.tools._createdImageURL}" download="${Player.tools._createdImage.name}" title="${Player.tools._createdImage.name}">Download</a>\n</span>`},function(e,t){e.exports=(e={})=>`<select class="${ns}-create-sound-host">\n\t${Object.keys(Player.config.uploadHosts).map((e,t)=>Player.config.uploadHosts[e]&&!Player.config.uploadHosts[e].invalid?`<option value="${e}" ${Player.config.defaultUploadHost===e?"selected":""}>${e}</option>`:"").join("")}\n</select>`},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-heading lined" style="margin-top: 1rem;">\n\tCreate Sound Image\n</div>\n<div style="margin: 0 .25rem">\n\t<div class="${ns}-create-sound-form" @drop="tools.handleCreateSoundDrop:prevent:stop">\n\t\t<div class="${ns}-row" style="margin-bottom: .5rem">\n\t\t\t${Player.display.ifNotDismissed("createSoundDetails","Show Help",`<div class="${ns}-col" data-dismiss-id="createSoundDetails">\n\t\t\t\tSelect an image and sound to combine as a sound image.\n\t\t\t\tThe sound will be uploaded to the selected file host and the url will be added to the image filename.<br/>\n\t\t\t\t${Player.tools.hasFFmpeg?"Selecting a webm with audio as the image will split it into a video only webm to be posted and ogg audio file to be uploaded.":""}\n\t\t\t\t<br/>\n\t\t\t\tMultiple sound files, or a comma-separated list of sound URLs, can be given for a single image.\n\t\t\t\tIf you do have multiple sounds the name will also be a considered comma-separated list.<br/>\n\t\t\t\t<a href="#" @click='display.dismiss("createSoundDetails"):prevent'>Dismiss</a>\n\t\t\t</div>`)}\n\t\t</div>\n\n\t\t<div class="${ns}-row">\n\t\t\t<span>Host - <a @click='settings.toggle("Hosts"):prevent' href="#">Config</a></span>\n\t\t</div>\n\t\t<div class="${ns}-row">\n\t\t\t<div class="${ns}-col ${ns}-create-hosts-container">\n\t\t\t\t${Player.tools.createHostsTemplate()}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="${ns}-row" style="margin-top: .25rem">\n\t\t\tData\n\t\t</div>\n\t\t<div class="${ns}-row">\n\t\t\t<div class="${ns}-col">\n\t\t\t\t<input type="text" class="${ns}-create-sound-name w-100" placeholder="Name/s">\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="${ns}-row">\n\t\t\t<div class="${ns}-col">\n\t\t\t\t<div class="${ns}-file-input placeholder">\n\t\t\t\t\t<div class="${ns}-file-overlay w-100">\n\t\t\t\t\t\t<span class="placeholder-text">Select/Drop Image</span>\n\t\t\t\t\t\t<span class="text"></span>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tclass="${ns}-create-sound-img"\n\t\t\t\t\t\t\t@change='tools.handleImageSelect;tools.handleFileSelect("evt.target")'\n\t\t\t\t\t\t\ttype="file"\n\t\t\t\t\t\t\taccept="image/*,.webm"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="${ns}-col">\n\t\t\t\t<div class="${ns}-file-input placeholder" ${Player.tools.useSoundURL?"display: none;":""}>\n\t\t\t\t\t<div class="${ns}-file-overlay w-100">\n\t\t\t\t\t\t<span class="placeholder-text">Select/Drop Sound/s</span>\n\t\t\t\t\t\t<span class="text"></span>\n\t\t\t\t\t\t<div class="overfile ${ns}-input-append">\n\t\t\t\t\t\t\t${Player.tools.hasFFmpeg?`\n\t\t\t\t\t\t\t\t<label class="${ns}-use-video-label" style="display: none;">\n\t\t\t\t\t\t\t\t\tUse video\n\t\t\t\t\t\t\t\t\t<input type="checkbox" class="${ns}-use-video" @click="tools.handleWebmSoundChange">\n\t\t\t\t\t\t\t\t</label>`:""}\n\t\t\t\t\t\t\t<a href="#" @click='tools.toggleSoundInput("url"):prevent' title="Enter a URL of a previously uploaded file.">\n\t\t\t\t\t\t\t\t${t.link}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype="file"\n\t\t\t\t\t\t\tclass="${ns}-create-sound-snd"\n\t\t\t\t\t\t\t@change='tools.handleFileSelect("evt.target")'\n\t\t\t\t\t\t\taccept="audio/*,video/*"\n\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="${ns}-file-list"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="${ns}-row ${ns}-align-center" style="position: relative; ${Player.tools.useSoundURL?"":"display: none;"}">\n\t\t\t\t\t<a href="#" class="${ns}-input-append" @click='tools.toggleSoundInput("file"):prevent' title="Select a file to upload.">\n\t\t\t\t\t\t${t.fileEarmarkMusic}\n\t\t\t\t\t</a>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype="text"\n\t\t\t\t\t\tclass="${ns}-create-sound-snd-url w-100"\n\t\t\t\t\t\tplaceholder="Sound URL/s"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="${ns}-row" style="margin-top: .5rem">\n\t\t\t<div class="${ns}-col-auto">\n\t\t\t\t<button class="${ns}-create-button" @click="tools.handleCreate:prevent">Create</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="${ns}-create-sound-status" ${Player.tools._createdImage?"":'style="display: none"'}>\n\t\t${Player.tools._createdImage?Player.tools.createCompleteTemplate():""}\n\t</div>\n</div>`}).call(this,n(1))},function(e,t,n){(function(t){const a=e=>new Promise((t,n)=>{GM.xmlHttpRequest({method:"GET",url:e,responseType:"blob",onload:e=>t(e),onerror:e=>n(e)})});e.exports={downloadTemplate:n(107),async _handleDownload(e){const t=e.currentTarget;t.disabled=!0,await Player.tools.downloadThread(Player.$(`.${ns}-download-all-images`).checked,Player.$(`.${ns}-download-all-audio`).checked,Player.$(`.${ns}-download-all-ignore-downloaded`).checked,Player.$(`.${ns}-download-all-status`)),t.disabled=!1},async download(e,n){try{const l=await a(e),r=t.element(`<a href="${URL.createObjectURL(l.response)}" download="${t.escAttr(n)}" rel="noopener" target="_blank"></a>`);r.click(),URL.revokeObjectURL(r.href)}catch(e){Player.logError("There was an error downloading.",e,"warning")}},async downloadThread(e,n,l,r){const s=new JSZip,o=Player.sounds.filter(e=>e.post&&(!l||!e.downloaded)),i=o.length;if(r&&(r.style.display="block"),!i||!e&&!n)return r&&(r.innerHTML="Nothing to download.");r&&(r.innerHTML=`Downloading ${i} sound images.<br/><br/>This may take a while. You can leave it running in the background. You'll be prompted to download the zip file once complete.`);const d=r&&t.element('<div style="margin-top: .5rem"></div>',r);for(let l=0;l<o.length;l++){const c=o[l];r&&(d.innerHTML=`${l+1} / ${i}: ${c.title}`);try{const[t,l]=await Promise.all([e&&a(c.image),n&&a(c.src)]),r=e&&n?c.post+"/":"";s.file(`${r}${c.filename}`,t),l&&s.file(`${r}${encodeURIComponent(c.src)}`,l),c.downloaded=!0}catch(e){console.log(e),r&&t.elementBefore(`<p>Failed to download ${c.title}!</p>`,d)}}r&&r.removeChild(d),r&&t.element('<div style="margin-top: .5rem">Complete!<br/><a href="#" @click="tools.saveThreadDownload:prevent">Save</a></div>',r),Player.tools.threadDownloadBlob=await s.generateAsync({type:"blob"}),Player.$(`.${ns}-ignore-downloaded`).style.display="block",Player.tools.saveThreadDownload()},saveThreadDownload(){const e=(location.href.match(/\/thread\/(\d+)/)||[null,"-"])[1],n=t.element(`<a href="${URL.createObjectURL(Player.tools.threadDownloadBlob)}" download="sounds-thread-${Board}-${e}" rel="noopener" target="_blank"></a>`);n.click(),URL.revokeObjectURL(n.href)}}}).call(this,n(0))},function(e,t,n){(function(t){e.exports=(e={})=>`<div class="${ns}-heading lined">Download All</div>\n<div style="margin: 0 .25rem">\n\t<div class="${ns}-row">\n\t\t<label class="${ns}-col-auto ${ns}-align-center">\n\t\t\t<input type="checkbox" class="${ns}-download-all-images" checked> Images\n\t\t</label>\n\t\t<label class="${ns}-col-auto ${ns}-align-center">\n\t\t\t<input type="checkbox" class="${ns}-download-all-audio" checked> Audio\n\t\t</label>\n\t\t<label class="${ns}-col-auto ${ns}-align-center ${ns}-ignore-downloaded" ${Player.tools.threadDownloadBlob?"":'style="display: none"'}>\n\t\t\t<input type="checkbox" class="${ns}-download-all-ignore-downloaded"> Ignore Downloaded\n\t\t\t<i class="${ns}-info-circle ${ns}-popover" data-content="Don't include sounds you've already downloaded.">${t.infoCircle}</i>\n\t\t</label>\n\t</div>\n\t<div class="${ns}-row" style="margin-top: .5rem">\n\t\t<button @click="tools._handleDownload ">Download</button>\n\t</div>\n\t<div class="${ns}-download-all-status" ${Player.tools.threadDownloadBlob?"":'style="display: none"'}>\n\t\tComplete!<br/>\n\t\t<a href="#" @click="tools.saveThreadDownload:prevent">Save</a></span>\n\t</div>\n</div>`}).call(this,n(1))},function(e,t){e.exports=(e={})=>`${Player.tools.downloadTemplate()}\n${Player.tools.createTemplate()}\n\n<div class="${ns}-heading lined" style="margin-top: 1rem;">Encode / Decode URL</div>\n<div style="margin: 0 .25rem">\n\t<div class="${ns}-row">\n\t\t<input type="text" class="${ns}-col ${ns}-decoded-input" @keyup="tools.handleDecoded" placeholder="https://">\n\t\t<input type="text" class="${ns}-col ${ns}-encoded-input" @keyup="tools.handleEncoded" placeholder="https%3A%2F%2F">\n\t</div>\n</div>`},function(e,t,n){(function(t){const a=n(110),l=/p: ?{([^}]*)}/g,r=/h: ?{([^}]*)}/g,s=a.map(e=>""+(e.tplName.source&&e.tplName.source.replace(/\(/g,"(?:")||e.tplName)),o=new RegExp(`(${s.join("|")})-(?:button|link)(?:\\:"([^"]+?)")?`,"g"),i=/sound-title/g,d=/sound-title-marquee/g,c=/sound-index/g,p=/sound-count/g,u=/sound-(src|id|name|post|imageOrThumb|image|thumb|filename|imageMD5)/g,y=/\$config\[([^\]]+)\]/g,h=[];e.exports={buttons:a,initialize:function(){Player.on("config",Player.userTemplate._handleConfig),Player.on("playsound",()=>Player.userTemplate._handleEvent("playsound")),["add","remove","order","show","hide","stop"].forEach(e=>{Player.on(e,Player.userTemplate._handleEvent.bind(null,e))})},build:function(e){const n=e.outerClass||"",a=e.sound&&e.sound.title||e.defaultName;let s={...e};const h=e=>"function"==typeof e?e(s):e;let g=e.template.replace(y,(...e)=>t.get(Player.config,e[1]));if(!e.ignoreDisplayBlocks&&(g=g.replace(l,Player.playing&&Player.playing===e.sound?"$1":"").replace(r,`<span class="${ns}-hover-display ${n}">$1</span>`)),!e.ignoreButtons&&(g=g.replace(o,(function(a,l,r){let o=Player.userTemplate._findButtonConf(l);if(s.tplNameMatch=o.tplNameMatch,o.requireSound&&!e.sound||o.showIf&&!o.showIf(s))return"";if(o.values){o={...o,...o.values[t.get(Player.config,o.property)]||o.values[Object.keys(o.values)[0]]}}const i=[...h(o.attrs)||[]];return i.some(e=>e.startsWith("href"))||i.push('href="javascript:;"'),(o.class||n)&&i.push(`class="${o.class||""} ${n||""}"`),o.action&&i.push(`@click='${h(o.action)}'`),`<a ${i.join(" ")}>${r&&r.replace(/ /g," ")||h(o.icon)||h(o.text)}</a>`}))),!e.ignoreSoundName&&(g=g.replace(d,a?`<div class="${ns}-col ${ns}-truncate-text" style="margin: 0 .5rem; text-overflow: clip;"><span title="${a}" class="${ns}-title-marquee" data-location="${e.location||""}">${a}</span></div>`:"").replace(i,a?`<div class="${ns}-col ${ns}-truncate-text" style="margin: 0 .5rem"><span title="${a}">${a}</span></div>`:"")),!e.ignoreSoundProperties&&(g=g.replace(u,(...t)=>e.sound?e.sound[t[1]]:"").replace(c,e.sound?Player.sounds.indexOf(e.sound)+1:0).replace(p,Player.sounds.length)),!e.ignoreVersion&&(g=g.replace(/%v/g,"3.4.0-380d280")),e.replacements)for(let t of Object.keys(e.replacements))g=g.replace(new RegExp(t,"g"),e.replacements[t]);return g},maintain:function(e,t,n=[],a=[]){h.push({component:e,property:t,...Player.userTemplate.findDependencies(t,null),alwaysRenderConfigs:n,alwaysRenderEvents:a})},findDependencies:function(e,n){n||(n=t.get(Player.config,e));const a=[],r=p.test(n),s=i.test(n)||u.test(n),d=c.test(n),h=l.test(n);r&&a.push("add","remove"),"rowTemplate"!==e&&(s||d||h)&&a.push("playsound","stop"),d&&a.push("order");const g=[];let f;for(;null!==(f=o.exec(n));)if(!f[2]){let e=Player.userTemplate._findButtonConf(f[1]);e.property&&g.push(e.property)}for(;null!==(f=y.exec(n));)g.push(f[1]);return{events:a,config:g}},_handleConfig:function(e,t){h.forEach(n=>{n.property===e&&(Object.assign(n,Player.userTemplate.findDependencies(e,t)),n.component.render())}),h.forEach(t=>{(t.alwaysRenderConfigs.includes(e)||t.config.includes(e))&&t.component.render()})},_handleEvent:function(e){h.forEach(t=>{(t.alwaysRenderEvents.includes(e)||t.events.includes(e))&&t.component.render()})},_findButtonConf:e=>{let t,n=a.find(n=>t=n.tplName===e?[e]:n.tplName.test&&e.match(n.tplName));return n&&{...n,tplNameMatch:t}}}}).call(this,n(0))},function(e,t,n){(function(t,a){const{postIdPrefix:l}=n(2);e.exports=[{property:"repeat",tplName:"repeat",action:"playlist.toggleRepeat:prevent",values:{all:{attrs:['title="Repeat All"'],icon:t.arrowRepeat},one:{attrs:['title="Repeat One"'],icon:t.arrowClockwise},none:{attrs:['title="No Repeat"'],class:"muted",icon:t.arrowRepeat}}},{property:"shuffle",tplName:"shuffle",action:"playlist.toggleShuffle:prevent",values:{true:{attrs:['title="Shuffled"'],icon:t.shuffle},false:{attrs:['title="Ordered"'],class:"muted",icon:t.shuffle}}},{property:"viewStyle",tplName:"playlist",action:"playlist.toggleView",values:{default:{attrs:['title="Player"'],class:"muted",icon:()=>"playlist"===Player.playlist._lastView?t.arrowsExpand:t.arrowsCollapse},playlist:{attrs:['title="Hide Playlist"'],icon:t.arrowsExpand},image:{attrs:['title="Show Playlist"'],icon:t.arrowsCollapse}}},{property:"hoverImages",tplName:"hover-images",action:"playlist.toggleHoverImages",values:{true:{attrs:['title="Hover Images Enabled"'],icon:t.image},false:{attrs:['title="Hover Images Disabled"'],class:"muted",icon:t.image}}},{tplName:"add",action:"playlist.selectLocalFiles:prevent",icon:t.plus,attrs:['title="Add local files"']},{tplName:"reload",action:"playlist.refresh:prevent",icon:t.reboot,attrs:['title="Reload the playlist"']},{property:"viewStyle",tplName:"settings",action:"settings.toggle():prevent",icon:t.gear,attrs:['title="Settings"'],values:{default:{class:"muted"},settings:{}}},{property:"viewStyle",tplName:"threads",action:"threads.toggle:prevent",icon:t.search,attrs:['title="Threads"'],values:{default:{class:"muted"},threads:{}}},{property:"viewStyle",tplName:"tools",action:"tools.toggle:prevent",icon:t.tools,attrs:['title="Tools"'],values:{default:{class:"muted"},tools:{}}},{tplName:"close",action:"hide:prevent",icon:t.close,attrs:['title="Hide the player"']},{tplName:"playing",requireSound:!0,action:'playlist.scrollToPlaying("center"):prevent',icon:t.musicNoteList,attrs:['title="Scroll the playlist currently playing sound."']},{tplName:"post",requireSound:!0,icon:t.chatRightQuote,showIf:e=>e.sound.post,attrs:e=>["href="+("#"+l+e.sound.post),'title="Jump to the post for the current sound"']},{tplName:"image",requireSound:!0,icon:t.image,attrs:e=>["href="+e.sound.image,'title="Open the image in a new tab"','target="_blank"']},{tplName:"sound",requireSound:!0,icon:t.soundwave,attrs:e=>["href="+e.sound.src,'title="Open the sound in a new tab"','target="_blank"']},{tplName:/dl-(image|sound)/,requireSound:!0,action:e=>{const t=e.sound["image"===e.tplNameMatch[1]?"image":"src"],n=e.sound["image"===e.tplNameMatch[1]?"filename":"name"]||"";return`tools.download("${t}", "${a.escAttr(n,!0)}"):prevent`},icon:e=>"image"===e.tplNameMatch[1]?t.fileEarmarkImage:t.fileEarmarkMusic,attrs:e=>[`title="${"image"===e.tplNameMatch[1]?"Download the image with the original filename":"Download the sound"}"`]},{tplName:/filter-(image|sound)/,requireSound:!0,action:e=>`playlist.addFilter("${"image"===e.tplNameMatch[1]?e.sound.imageMD5:e.sound.src.replace(/^(https?:)?\/\//,"")}"):prevent`,icon:t.filter,showIf:e=>"sound"===e.tplNameMatch[1]||e.sound.imageMD5,attrs:e=>[`title="Add the ${"image"===e.tplNameMatch[1]?"image MD5":"sound URL"} to the filters."`]},{tplName:"remove",requireSound:!0,action:e=>`remove("${e.sound.id}")`,icon:t.trash,attrs:e=>['title="Filter the image."',`data-id="${e.sound.id}"`]},{tplName:"menu",requireSound:!0,class:ns+"-item-menu-button",action:e=>`playlist.handleItemMenu("evt", "${e.sound.id}"):prevent:stop`,icon:t.chevronDown},{tplName:"view-menu",action:'display.showMenu("evt.currentTarget", "views"):prevent:stop',icon:t.chevronDown,attrs:['title="Switch View"']},{tplName:"theme-menu",action:'display.showMenu("evt.currentTarget", "themes"):prevent:stop',icon:t.layoutTextWindow,attrs:['title="Switch Theme"']}]}).call(this,n(1),n(0))}]);