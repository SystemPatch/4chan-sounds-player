// ==UserScript==
// @name         4chan sounds player
// @version      3.3.0-6c82932
// @namespace    rccom
// @description  A player designed for 4chan sounds threads.
// @author       RCC
// @match        *://boards.4chan.org/*
// @match        *://boards.4channel.org/*
// @match        *://desuarchive.org/*
// @match        *://arch.b4k.co/*
// @match        *://archived.moe/*
// @match        *://warosu.org/*
// @grant        GM.getValue
// @grant        GM.setValue
// @grant        GM.xmlHttpRequest
// @grant        GM_addValueChangeListener
// @connect      4chan.org
// @connect      4channel.org
// @connect      a.4cdn.org
// @connect      desu-usergeneratedcontent.xyz
// @connect      arch-img.b4k.co
// @connect      4cdn.org
// @connect      a.pomf.cat
// @connect      pomf.cat
// @connect      files.catbox.moe
// @connect      catbox.moe
// @connect      share.dmca.gripe
// @connect      z.zz.ht
// @connect      zz.ht
// @connect      too.lewd.se
// @connect      lewd.se
// @connect      *
// @run-at       document-start
// @updateURL    https://raw.githubusercontent.com/rcc11/4chan-sounds-player/master/dist/4chan-sounds-player-beta.meta.js
// @downloadURL  https://raw.githubusercontent.com/rcc11/4chan-sounds-player/master/dist/4chan-sounds-player-beta.user.js
// ==/UserScript==


!function(e){var t={};function a(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,a),l.l=!0,l.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(n,l,function(t){return e[t]}.bind(null,l));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=6)}([function(e,t){const a=e.exports;function n(e,t){const a=Math.max(0,t-e);return[a%60,Math.floor(a/60)%60,Math.floor(a/60/60)%24,Math.floor(a/60/60/24)%7,Math.floor(a/60/60/24/7)]}e.exports.set=function(e,t,a){const n=t.split("."),l=n.pop(),s=n.reduce((e,t)=>e[t]||(e[t]={}),e);return s&&(s[l]=a),e},e.exports.get=function(e,t,a){if("string"!=typeof t)return a;const n=t.split("."),l=n.pop(),s=n.reduce((e,t)=>e&&e[t],e);return s&&Object.prototype.hasOwnProperty.call(s,l)?s[l]:a},e.exports.isEqual=function e(t,n,l=!0){if(typeof t!=typeof n)return!1;if(Array.isArray(t,n))return t===n||t.length===n.length&&t.every((t,a)=>e(t,n[a]));if(t&&n&&"object"==typeof t&&t!==n){const e=Object.keys(t);return e.push(...Object.keys(n).filter(t=>!e.includes(t))),e.every(e=>a.isEqual(t[e],n[e]))}return l?t===n:t==n},e.exports.toDuration=function(e){e=Math.floor(e||0);let[t,a,l]=n(0,e);return t<10&&(t="0"+t),(l?l+":":"")+a+":"+t},e.exports.timeAgo=function(e){const[t,a,l,s,r]=n(Math.floor(e),Math.floor(Date.now()/1e3));return r>1?r+" weeks ago":s>0?s+(1===s?" day":" days")+" ago":l>0?l+(1===l?" hour":" hours")+" ago":a>0?a+(1===a?" minute":" minutes")+" ago":t+(1===t?" second":" seconds")+" ago"},e.exports.element=function(e,t,a={}){const n=document.createElement("div");n.innerHTML=e;const l=n.children[0];t&&t.appendChild(l);for(let e in a)l.addEventListener(e,a[e]);return l},e.exports.elementBefore=function(e,t,n={}){const l=a.element(e,null,n);return t.parentNode.insertBefore(l,t),l},e.exports.noDefault=(e,...t)=>n=>{n.preventDefault();("function"==typeof e?e:a.get(Player,e))(n,...t)}},function(e,t,a){e.exports={fcSounds:'<svg width="452" height="257" xmlns="http://www.w3.org/2000/svg"><g><text font-weight="bold" font-style="italic" font-family="Helvetica, Arial, sans-serif" font-size="250" y="197" fill-opacity="0.05" fill="#000000">4sp</text></g></svg>',arrowClockwise:a(24).default,arrowsCollapse:a(25).default,arrowsExpand:a(26).default,arrowRepeat:a(27).default,chatRightQuote:a(28).default,chevronDown:a(29).default,close:a(30).default.replace("bi-plus",`bi-plus ${ns}-icon-close`).replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),gear:a(31).default,fileEarmarkImage:a(32).default,fileEarmarkMusic:a(33).default,filter:a(34).default,fullscreen:a(35).default,fullscreenExit:a(36).default,image:a(37).default,link:a(38).default,musicNoteList:a(39).default,play:a(40).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),playFill:a(41).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),pause:a(42).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),pauseFill:a(43).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),plus:a(44).default,reboot:a(45).default,search:a(46).default,shuffle:a(47).default,skipEnd:a(48).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipEndFill:a(49).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipStart:a(50).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),skipStartFill:a(51).default.replace(/viewBox="[^"]+"/,'viewBox="2 2 12 12"'),soundwave:a(52).default,tools:a(53).default,trash:a(54).default,volumeMute:a(55).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeMuteFill:a(56).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeUp:a(57).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"'),volumeUpFill:a(58).default.replace(/viewBox="[^"]+"/,'viewBox="1 1 14 14"')}},function(e,t){e.exports={"4chan":{postIdPrefix:"p",posts:".post",filename:{".fileText .file-info .fnfull":"textContent",".fileText .file-info > a":"textContent",".fileText > a":"title",".fileText":"textContent"},thumb:".fileThumb",playLink:{class:ns+"-play-link",text:"play",relative:".fileText",prependText:" "},styleFetcher:"post reply style-fetcher",limitWidthOf:".thread > .postContainer"},FoolFuuka:{postIdPrefix:"",posts:"article",filename:{".thread_image_box .post_file_filename":"textContent",".post_file_filename":"title"},thumb:".thread_image_link",playLink:{class:ns+"-play-link btnr",text:"Play",relative:".post_controls"},styleFetcher:"post_wrapper style-fetcher",limitWidthOf:".posts > article.post"},Fuuka:{postIdPrefix:"p",posts:".content > div, td.reply",filename:{":scope > span":"textContent"},filenameParser:e=>e.split(", ").slice(2).join(", "),thumb:".thumb",playLink:{class:ns+"-play-link",text:"play",relative:"br:nth-of-type(2)",before:!0,prependText:" [",appendText:"]"},styleFetcher:"reply style-fetcher",limitWidthOf:".content > div, .content > table"}}[Site]},function(e,t,a){e.exports=[...a(9),...a(10),...a(11),...a(12),...a(13),{property:"shuffle",default:!1},{property:"repeat",default:"all"},{property:"viewStyle",default:"playlist"},{property:"hoverImages",default:!1},{property:"showPlaylistSearch",default:!0}]},function(e,t,a){(function(t){const n=a(2),l=/^(https?:)?\/\//,s=/(.*?)[[({](?:audio|sound)[ =:|$](.*?)[\])}]/gi;let r=0;function o(e,a){try{let l=e.parentElement,s=l&&l.parentElement;if(e.classList.contains("style-fetcher")||s&&"qp"===s.id||l&&l.classList.contains("noFile"))return;let r=e.querySelector(`.${ns}-play-link`);if(r){const e=r.getAttribute("data-id");return void(r.onclick=()=>Player.play(Player.sounds.find(t=>t.id===e)))}let o=null,c=n.filename;if(Object.keys(c).some((function(t){const a=e.querySelector(t);return a&&(o=a[c[t]])})),!o)return;n.filenameParser&&(o=n.filenameParser(o));const u=e.id.slice(n.postIdPrefix.length),p=e.querySelector(n.thumb).closest("a"),y=p&&p.href,h=p&&p.querySelector("img"),g=h&&h.src,f="Fuuka"===Site?e.querySelector(":scope > a:nth-of-type(3)").href.split("/").pop():h&&h.getAttribute("data-md5"),m=d(o,y,u,g,f);if(!m.length)return;const v=m[0].id,P=n.playLink,$=`<a href="javascript:;" class="${P.class}" data-id="${v}">${P.text}</a>`,b=P.relative&&e.querySelector(P.relative);return P.prependText&&i(P.prependText,P.before,b),r=P.before?t.elementBefore($,b):t.element($,b),P.appendText&&i(P.appendText,P.before,b),r.onclick=()=>Player.play(m[0]),m.forEach(e=>Player.add(e,a)),m.length>0}catch(t){Player.logError("There was an issue parsing the files. Please check the console for details.",t),console.log("[4chan sounds player]",e)}}function i(e,t,a){const n=e&&document.createTextNode(e);t?a.parentNode.insertBefore(n,a):a.appendChild(n)}function d(e,t,a,n,o,i){if(!e)return[];const d=t.endsWith("webm")?n:t;e=e.replace(/-/,"/");const c=[];let u;for(;null!==(u=s.exec(e));)c.push(u);c.length||"always"!==Player.config.addWebm&&("soundBoards"!==Player.config.addWebm||"gif"!==Board&&"wsg"!==Board)||!e.endsWith(".webm")||c.push([null,e.slice(0,-5),t]);const p=c[0]&&c[0][1]||a||"Local Sound "+r;return c.length&&!a&&r++,c.reduce((s,u,y)=>{let h=u[2];const g=(a||"local"+r)+":"+y,f=u[1].trim(),m=f||p+(c.length>1?` (${y+1})`:""),v=h===t;try{h.includes("%")&&(h=decodeURIComponent(h)),h.startsWith("blob:")||null!==h.match(l)||(h=location.protocol+"//"+h)}catch(e){return s}const P={src:h,id:g,title:m,name:f,post:a,image:t,imageOrThumb:d,filename:e,thumb:n,imageMD5:o,standaloneVideo:v};return(i||Player.acceptedSound(P))&&s.push(P),s},[])}e.exports={parseFiles:function(e,t){let a=!1;(e.classList.contains("post")?[e]:e.querySelectorAll(n.posts)).forEach(e=>o(e,t)&&(a=!0)),a&&t&&Player.container&&Player.playlist.render()},parsePost:o,parseFileName:d}}).call(this,a(0))},function(e,t){window.ns="fcsp",window.is4chan=location.hostname.includes("4chan.org")||location.hostname.includes("4channel.org"),window.isChanX=document.documentElement&&document.documentElement.classList.contains("fourchan-x"),window.Board=location.pathname.split("/")[1],window.Site=is4chan?"4chan":((document.head.querySelector('meta[name="generator"]')||{}).content||"").includes("FoolFuuka")?"FoolFuuka":((document.head.querySelector('meta[name="description"]')||{}).content||"").includes("Fuuka")?"Fuuka":"FoolFuuka";class a extends Error{constructor(e,t,a){super(e),this.reason=e,this.type=t,this.error=a}}window.PlayerError=a},function(e,t,a){"use strict";async function n(){a(5);const e=a(7),{parseFiles:t}=a(4);await e.initialize(),t(document.body,!0);new MutationObserver((function(e){e.forEach((function(e){"childList"===e.type&&e.addedNodes.forEach((function(e){e.nodeType===Node.ELEMENT_NODE&&t(e)}))}))})).observe(document.body,{childList:!0,subtree:!0})}document.addEventListener("4chanXInitFinished",n),setTimeout((function(){a(5),isChanX||("loading"!==document.readyState?n():document.addEventListener("DOMContentLoaded",n))}),0)},function(e,t,a){(function(t){const n={settings:a(8),events:a(15),actions:a(16),colorpicker:a(17),controls:a(18),display:a(19),footer:a(20),header:a(21),hotkeys:a(22),minimised:a(23),playlist:a(59),position:a(60),threads:a(61),tools:a(63),userTemplate:a(64)},l=window.Player=e.exports={ns:ns,audio:new Audio,sounds:[],isHidden:!0,container:null,ui:{},_public:[],config:{},$:(...e)=>l.container&&l.container.querySelector(...e),$all:(...e)=>l.container&&l.container.querySelectorAll(...e),components:n,templates:{body:a(66),colorpicker:a(67),controls:a(68),css:a(69),css4chanXPolyfill:a(70),footer:a(71),header:a(72),hostInput:a(73),itemMenu:a(74),list:a(75),player:a(76),settings:a(77),threads:a(78),threadBoards:a(79),threadList:a(80),tools:a(81),viewsMenu:a(82)},initialize:async function(){if(!l.initialized){l.initialized=!0;try{l.sounds=[];for(let e in n)n[e].initialize&&await n[e].initialize();l.display.createPlayerButton(),l.display.render(),document.addEventListener("PlayerEvent",e=>{if(e.detail.action&&l._public.includes(e.detail.action))return t.get(l,e.detail.action).apply(window,e.detail.arguments)})}catch(e){throw l.logError("There was an error initialzing the sound player. Please check the console for details.",e),e}}},getHandler:function(e){return"string"==typeof e?t.get(l,e):e},compareIds:function(e,t){const[a,n]=e.split(":"),[l,s]=t.split(":"),r=a-l;return 0!==r?r:n-s},acceptedSound:function({src:e,imageMD5:t}){try{const a=new URL(e),n=a.hostname.toLowerCase();return!l.config.filters.find(e=>e===t||e===n+a.pathname)&&l.config.allow.find(e=>n===e||n.endsWith("."+e))}catch(e){return!1}},syncTab:(e,t)=>"undefined"!=typeof GM_addValueChangeListener&&GM_addValueChangeListener(e,(e,a,n,l)=>{l&&t(n,a)}),logError:function(e,t,a){console.error("[4chan sounds player]",e,t),t instanceof PlayerError&&(t.error&&console.error("[4chan sound player]",t.error),e=t.reason,a=t.type||a),l.alert(e,a||"error",5)},alert:function(e,a="info",n=5){isChanX?(e=t.element(`<span>${e}</span`),document.dispatchEvent(new CustomEvent("CreateNotification",{bubbles:!0,detail:{content:e,type:a,lifetime:n}}))):"undefined"!=typeof Feedback&&Feedback.showMessage(e,"info"===a?"notify":"error",1e3*n)}};for(let e in n)l[e]=n[e],(l[e].atRoot||[]).forEach(t=>l[t]=l[e][t]),(l[e].public||[]).forEach(t=>{l._public.push((l[e].atRoot||[]).includes(t)?t:`${e}.${t}`)})}).call(this,a(0))},function(e,t,a){(function(t){const n=a(3),l=a(14);e.exports={atRoot:["set"],changelog:"https://github.com/rcc11/4chan-sounds-player/releases",delegatedEvents:{click:{[`.${ns}-settings .${ns}-heading-action`]:"settings._handleAction",[`.${ns}-settings-tab`]:"settings._handleTab",[`.${ns}-settings-reset-all`]:t.noDefault(()=>Player.settings.load({},{applyDefault:!0,ignore:["viewStyle"]})),[`.${ns}-settings-export`]:"settings._handleExport",[`.${ns}-settings-import`]:"settings._handleImport"},focusout:{[`.${ns}-settings input, .${ns}-settings textarea`]:"settings._handleChange"},change:{[`.${ns}-settings input[type=checkbox], .${ns}-settings select`]:"settings._handleChange"},keydown:{[`.${ns}-key-input`]:"settings.handleKeyChange"}},initialize:async function(){Player.settings.view="Display",Player.display.applyBoardTheme(),await Player.settings.load(await GM.getValue("settings")||{},{applyDefault:!0,bypassAll:!0}),Player.config.showUpdatedNotification&&Player.config.VERSION&&"3.3.0-6c82932"!==Player.config.VERSION&&Player.alert(`4chan Sounds Player has been updated to <a href="${Player.settings.changelog}" target="_blank">version 3.3.0-6c82932</a>.`),Player.on("hide",(function(){Player.config.pauseOnHide&&Player.pause()})),Player.syncTab("settings",e=>Player.settings.load(e,{bypassSave:!0,applyDefault:!0,ignore:["viewStyle"]}))},render:function(){Player.container&&(Player.$(`.${ns}-settings`).innerHTML=Player.templates.settings())},set:function(e,a,{bypassAll:n,bypassValidation:l,bypassSave:s,bypassRender:r,silent:o,bypassStylesheet:i,settingConfig:d}={}){d=d||Player.settings.findDefault(e);const c=t.get(Player.config,e);if(l||!t.isEqual(c,a))return t.set(Player.config,e,a),n||(!i&&d&&d.updateStylesheet&&Player.display.updateStylesheet(),!o&&Player.trigger("config",e,a,c),!o&&Player.trigger("config:"+e,a,c),!s&&Player.settings.save(),!r&&d.displayGroup&&Player.settings.render()),[c,a]},reset:function(e){let t=Player.settings.findDefault(e);Player.set(e,t.default,{settingConfig:t})},load:async function(e,a={}){"string"==typeof e&&(e=JSON.parse(e));const l={};n.forEach((function n(s){if(s.settings)return s.settings.forEach(e=>n({property:s.property,default:s.default,...e}));if(a.ignore&&a.ignore.includes(s.property))return;let r=t.get(e,s.property,a.applyDefault?s.default:void 0);if(void 0!==r){s.mix&&(r={...s.default,...r||{}});const e=Player.set(s.property,r,{bypassAll:!0,settingConfig:s});e&&(l[s.property]=e)}})),Object.entries(await Player.settings.migrate(e.VERSION)).forEach(([e,[t,a]])=>{l[e]=[t,l[e]?l[e][1]:a]}),a.bypassAll||(!a.bypassStylesheet&&Player.display.updateStylesheet(),!a.silent&&Object.entries(l).forEach(([e,[t,a]])=>{Player.trigger("config",e,t,a),Player.trigger("config:"+e,t,a)}),!a.bypassSave&&Player.settings.save(),!a.bypassRender&&Player.settings.render())},save:function(){try{const e=n.reduce((function e(a,n){if(n.settings)n.settings.forEach(t=>e(a,{property:n.property,default:n.default,...t}));else{let e=t.get(Player.config,n.property);void 0===e||t.isEqual(e,n.default)||(n.mix&&(e=Object.keys(e).reduce((a,l)=>(t.isEqual(n.default[l],e[l])||(a[l]=e[l]),a),{})),t.set(a,n.property,e))}return a}),{});return e.viewStyle=Player.playlist._lastView,e.VERSION="3.3.0-6c82932",GM.setValue("settings",JSON.stringify(e))}catch(e){Player.logError("There was an error saving the sound player settings.",e)}},migrate:async function(e){if(!e||"3.3.0-6c82932"===e)return{};const t={};for(let a=0;a<l.length;a++){let n=l[a];if(Player.settings.compareVersions(e,n.version)<0)try{console.log("[4chan sound player] Migrate:",n.name),Object.entries(await n.run()).forEach(([e,[a,n]])=>{t[e]=[a,t[e]?t[e][1]:n]})}catch(e){console.error(e)}}return t},compareVersions:function(e,t){const[a,n]=e.split("-"),[l,s]=t.split("-"),r=a.split("."),o=l.split(".");for(let e=0;e<3;e++){if(+r[e]>+o[e])return 1;if(+r[e]<+o[e])return-1}return n!==s},findDefault:function(e){let t;return n.find((function(a){if(a.property===e)return t=a;if(a.settings){let n=a.settings.find(t=>t.property===e);return n&&(t={...a,settings:null,...n})}return!1})),t||{property:e}},toggle:function(e){let t=Player.$(`.${ns}-settings :focus`);if(t&&t.blur(),!e&&"settings"===Player.config.viewStyle)return Player.playlist.restore();"settings"!==Player.config.viewStyle&&Player.display.setViewStyle("settings"),e&&e!==Player.settings.view&&Player.settings.showGroup(e)},_handleTab:function(e){const t=e.eventTarget.getAttribute("data-group");t&&(e.preventDefault(),Player.settings.showGroup(t))},showGroup:function(e){Player.settings.view=e;const t=Player.$(`.${ns}-settings-group.active`),a=Player.$(`.${ns}-settings-tab.active`);t&&t.classList.remove("active"),a&&a.classList.remove("active"),Player.$(`.${ns}-settings-group[data-group="${e}"]`).classList.add("active"),Player.$(`.${ns}-settings-tab[data-group="${e}"]`).classList.add("active")},_handleImport:async function(e){e.preventDefault();const a=t.element('<input type="file">'),n=async()=>{let e;try{e=await(await fetch(URL.createObjectURL(a.files[0]))).json()}catch(e){Player.logError(`Expected a JSON config file and got ${a.files[0].type}.`,e,"warning")}a.removeEventListener("change",n),Player.settings.load(e)};a.addEventListener("change",n),a.click()},_handleExport:async function(e){e.preventDefault();const a=e.shiftKey?JSON.stringify(Player.config,null,4):await GM.getValue("settings")||"{}",n=new Blob([a],{type:"application/json"}),l=t.element(`<a href="${URL.createObjectURL(n)}" download="4chan-sp-config.json" rel="noopener" target="_blank"></a>`);l.click(),URL.revokeObjectURL(l.href)},_handleChange:function(e){try{const a=e.eventTarget,n=a.getAttribute("data-property");if(!n)return;let l=Player.settings.findDefault(n);const s=t.get(Player.config,n);let r=a["checkbox"===a.getAttribute("type")?"checked":"value"];l.parse&&(r=Player.getHandler(l.parse)(r,s,e)),l&&l.split&&(r=r.split(decodeURIComponent(l.split))),t.isEqual(s,r,!l.looseCompare)||Player.set(n,r,{bypassValidation:!0,bypassRender:!0,settingConfig:l})}catch(e){Player.logError("There was an error updating the setting.",e)}},handleKeyChange:function(e){e.preventDefault(),"Shift"!==e.key&&"Control"!==e.key&&"Meta"!==e.key&&(e.eventTarget.value=Player.hotkeys.stringifyKey(e))},_handleAction:function(e){e.preventDefault();const a=e.eventTarget.getAttribute("data-property"),n=e.eventTarget.getAttribute("data-handler"),l=t.get(Player,n);l&&l(a,e)},renderHosts:function(e){return`<div class="${ns}-host-inputs">`+Object.keys(Player.config.uploadHosts).map(Player.templates.hostInput).join("")+"</div>"},parseHosts:function(e,t,a){t={...t};const n=a.eventTarget.closest(`.${ns}-host-input`);let l=n.getAttribute("data-host-name"),s=t[l]={...t[l]};const r=a.eventTarget.getAttribute("name");try{if("name"===r&&e!==l){if(!e||t[e])throw new PlayerError("A unique name for the host is required.","warning");n.setAttribute("data-host-name",e),t[e]=s,delete t[l],l=e}if("url"===r||"soundUrl"===r)try{("url"===r||e)&&new URL(e)}catch(e){throw new PlayerError("The value must be a valid URL.","warning")}if("data"===r)try{e=JSON.parse(e)}catch(e){throw new PlayerError("The data must be valid JSON.","warning")}if("headers"===r)try{e=e?JSON.parse(e):void 0}catch(e){throw new PlayerError("The headers must be valid JSON.","warning")}}catch(e){throw s.invalid=!0,n.classList.add("invalid"),e}void 0===e?delete s[r]:s[r]=e;try{const e=n.querySelector("[name=soundUrl]").value,t=n.querySelector("[name=headers]").value;!(l&&JSON.parse(n.querySelector("[name=data]").value)&&new URL(n.querySelector("[name=url]").value))||e&&!new URL(e)||t&&!JSON.parse(t)||(delete s.invalid,n.classList.remove("invalid"))}catch(e){}return t},addUploadHost:function(){const e=Player.config.uploadHosts,a=Player.$(`.${ns}-host-inputs`);let n="New Host",l=1;for(;Player.config.uploadHosts[n];)n=n+" "+ ++l;e[n]={invalid:!0,data:{file:"$file"}},a.children[0]?t.elementBefore(Player.templates.hostInput(n),a.children[0]):t.element(Player.templates.hostInput(n),a),Player.settings.set("uploadHosts",e,{bypassValidation:!0,bypassRender:!0,silent:!0})},removeHost:function(e,t){const a=Player.config.uploadHosts,n=t.eventTarget.closest(`.${ns}-host-input`),l=n.getAttribute("data-host-name");Player.settings.findDefault("uploadHosts").default[l]?a[l]=null:delete a[l],n.parentNode.removeChild(n),Player.settings.set("uploadHosts",a,{bypassValidation:!0,bypassRender:!0})},setDefaultHost:function(e,t,a){const n=a.eventTarget.closest(`.${ns}-host-input`).getAttribute("data-host-name");return n===Player.config.defaultUploadHost||Object.keys(Player.config.uploadHosts).forEach(e=>{const t=Player.$(`.${ns}-host-input[data-host-name="${e}"] input[data-property="defaultUploadHost"]`);t&&(t.checked=e===n)}),n},restoreDefaultHosts:function(){Object.assign(Player.config.uploadHosts,Player.settings.findDefault("uploadHosts").default),Player.set("uploadHosts",Player.config.uploadHosts,{bypassValidation:!0})}}}).call(this,a(0))},function(e,t){e.exports=[{property:"autoshow",default:!0,title:"Autoshow",description:"Automatically show the player when the thread contains sounds.",displayGroup:"Display"},{property:"pauseOnHide",default:!0,title:"Pause On Hide",description:"Pause the player when it's hidden.",displayGroup:"Display"},{property:"showUpdatedNotification",default:!0,title:"Show Update Notifications",description:"Show notifications when the player is successfully updated.",displayGroup:"Display"},{title:"Controls",displayGroup:"Display",settings:[{property:"preventControlWrapping",title:"Prevent Wrapping",description:"Hide controls to prevent wrapping when the player is too small",default:!0},{property:"controlsHideOrder",title:"Hide Order",description:"Order controls are hidden in to prevent wrapping. Available controls are previous, next, seek-bar, time, duration, volume, mute, volume-bar, and fullscreen.",default:["fullscreen","duration","volume-bar","seek-bar","time","previous"],displayMethod:(e,t)=>`<div class="${ns}-col"><textarea ${t}>${e}</textarea></div>`,format:e=>e.join("\n"),parse:e=>e.split(/\s+/)}]},{title:"Minimised Display",description:"Optional displays for when the player is minimised.",displayGroup:"Display",settings:[{property:"pip",title:"Thumbnail",description:"Display a fixed thumbnail of the playing sound in the bottom right of the thread.",default:!0},{property:"maxPIPWidth",title:"Max Width",description:"Maximum width for the thumbnail.",default:"150px",updateStylesheet:!0},{property:"chanXControls",title:"4chan X Header Controls",description:"Show playback controls in the 4chan X header. The display can be customised in Templates.",displayMethod:isChanX||null,options:{always:"Always",closed:"Only with the player closed",never:"Never"}}]},{title:"Thread",displayGroup:"Display",settings:[{property:"autoScrollThread",description:"Automatically scroll the thread to posts as sounds play.",title:"Auto Scroll",default:!1},{property:"limitPostWidths",description:"Limit the width of posts so they aren't hidden under the player.",title:"Limit Post Widths",default:!0},{property:"minPostWidth",title:"Minimum Width",default:"50%"}]},{property:"threadsViewStyle",title:"Threads View",description:"How threads in the threads view are listed.",settings:[{title:"Display",default:"table",options:{table:"Table",board:"Board"}}]},{title:"Colors",displayGroup:"Display",property:"colors",updateStylesheet:!0,class:ns+"-colorpicker-input",displayMethod:(e,t)=>`<div class="${ns}-col">\n\t\t\t\t<input type="text" ${t} value="${e}">\n\t\t\t\t<div class="${ns}-cp-preview" style="background: ${e}"></div>\n\t\t\t</div>`,actions:[{title:"Match Theme",handler:"display.forceBoardTheme"}],settings:[{property:"colors.text",default:"#000000",title:"Text"},{property:"colors.background",default:"#d6daf0",title:"Background"},{property:"colors.border",default:"#b7c5d9",title:"Border"},{property:"colors.odd_row",default:"#d6daf0",title:"Odd Row"},{property:"colors.even_row",default:"#b7c5d9",title:"Even Row"},{property:"colors.playing",default:"#98bff7",title:"Playing Row"},{property:"colors.dragging",default:"#c396c8",title:"Dragging Row"},{property:"colors.controls_background",default:"#3f3f44",title:"Controls Background",description:"The controls container element background.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.controls_inactive",default:"#FFFFFF",title:"Control Items",description:"The playback controls and played bar.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.controls_active",default:"#00b6f0",title:"Focused Control Items",description:"The control items when hovered.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.controls_empty_bar",default:"#131314",title:"Volume/Seek Bar Background",decscription:"The background of the volume and seek bars.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.controls_loaded_bar",default:"#5a5a5b",title:"Loaded Bar Background",description:"The loaded bar within the seek bar.",actions:[{title:"Reset",handler:"settings.reset"}]},{property:"colors.page_background",default:"rgb(238, 242, 255)",displayMethod:null}]}]},function(e,t){e.exports=[{property:"addWebm",title:"Include WebM",description:"Whether to add all WebM files regardless of a sound filename.",default:"soundBoards",displayGroup:"Filter",options:{always:"Always",soundBoards:"Boards with sound",never:"Never"}},{property:"allow",title:"Allowed Hosts",description:"Which domains sources are allowed to be loaded from.",default:["4cdn.org","catbox.moe","dmca.gripe","lewd.se","pomf.cat","zz.ht"],actions:[{title:"Reset",handler:"settings.reset"}],displayGroup:"Filter",split:"\n"},{property:"filters",default:["# Image MD5 or sound URL"],title:"Filters",description:"List of URLs or image MD5s to filter, one per line.\nLines starting with a # will be ignored.",actions:[{title:"Reset",handler:"settings.reset"}],displayGroup:"Filter",split:"\n"}]},function(e,t){const a="mediaSession"in navigator;e.exports=[{property:"hardwareMediaKeys",title:"Hardware Media Keys",displayGroup:"Keybinds",description:"Enable playback control via hardware media keys."+(a?"":" Your browser does not support this feature."),default:a,attrs:!a&&"disabled"},{title:"Keybinds",displayGroup:"Keybinds",description:"Enable keyboard shortcuts.",format:"hotkeys.stringifyKey",parse:"hotkeys.parseKey",class:ns+"-key-input",property:"hotkey_bindings",settings:[{property:"hotkeys",default:"open",title:"Enabled",format:null,parse:null,class:null,options:{always:"Always",open:"Only with the player open",never:"Never"}},{property:"hotkey_bindings.playPause",title:"Play/Pause",keyHandler:"togglePlay",ignoreRepeat:!0,default:{key:" "}},{property:"hotkey_bindings.previous",title:"Previous",keyHandler:()=>Player.previous({force:!0}),ignoreRepeat:!0,default:{key:"arrowleft"}},{property:"hotkey_bindings.next",title:"Next",keyHandler:()=>Player.next({force:!0}),ignoreRepeat:!0,default:{key:"arrowright"}},{property:"hotkey_bindings.previousGroup",title:"Previous Group",keyHandler:()=>Player.previous({force:!0,group:!0}),ignoreRepeat:!0,default:{shiftKey:!0,key:"arrowleft"}},{property:"hotkey_bindings.nextGroup",title:"Next Group",keyHandler:()=>Player.next({force:!0,group:!0}),ignoreRepeat:!0,default:{shiftKey:!0,key:"arrowright"}},{property:"hotkey_bindings.volumeUp",title:"Volume Up",keyHandler:"actions.volumeUp",default:{shiftKey:!0,key:"arrowup"}},{property:"hotkey_bindings.volumeDown",title:"Volume Down",keyHandler:"actions.volumeDown",default:{shiftKey:!0,key:"arrowdown"}},{property:"hotkey_bindings.closePlayer",title:"Close",keyHandler:"display.close",default:{key:""}},{property:"hotkey_bindings.togglePlayer",title:"Show/Hide",keyHandler:"display.toggle",default:{key:"h"}},{property:"hotkey_bindings.toggleFullscreen",title:"Toggle Fullscreen",keyHandler:"display.toggleFullScreen",default:{key:""}},{property:"hotkey_bindings.togglePlaylist",title:"Toggle Playlist",keyHandler:"playlist.toggleView",default:{key:""}},{property:"hotkey_bindings.toggleSearch",title:"Toggle Playlist Search",keyHandler:()=>Player.set("showPlaylistSearch",!Player.config.showPlaylistSearch),default:{key:""}},{property:"hotkey_bindings.scrollToPlaying",title:"Jump To Playing",keyHandler:"playlist.scrollToPlaying",default:{key:""}},{property:"hotkey_bindings.toggleHoverImages",title:"Toggle Hover Images",keyHandler:"playlist.toggleHoverImages",default:{key:""}},{property:"hotkey_bindings.toggleAutoScroll",title:"Toggle Auto Scroll",keyHandler:()=>Player.set("autoScrollThread",!Player.config.autoScrollThread),default:{key:""}}]}]},function(e,t){e.exports=[{property:"headerTemplate",title:"Header",actions:[{title:"Reset",handler:"settings.reset"}],default:"repeat-button shuffle-button hover-images-button playlist-button\nsound-name-marquee\nview-menu-button add-button reload-button close-button",displayGroup:"Templates",displayMethod:"textarea"},{property:"rowTemplate",title:"Row",actions:[{title:"Reset",handler:"settings.reset"}],default:"sound-name h:{menu-button}",displayGroup:"Templates",displayMethod:"textarea"},{property:"footerTemplate",title:"Footer",actions:[{title:"Reset",handler:"settings.reset"}],default:`playing-button:"sound-index /" sound-count sounds\n<div class="fcsp-col-auto"></col>p:{\n\t\tpost-link\n\t\tOpen [ image-link sound-link ]\n\t\tDownload [ dl-image-button dl-sound-button ]\n}\n<div class="${ns}-expander" data-direction="se"></div>\n`,description:"Template for the footer contents",displayGroup:"Templates",displayMethod:"textarea",attrs:'style="height:9em;"'},{property:"chanXTemplate",title:"4chan X Header",default:'p:{\n\tpost-link:"sound-name"\n\tprev-button\n\tplay-button\n\tnext-button\n\tsound-current-time / sound-duration\n}',actions:[{title:"Reset",handler:"settings.reset"}],displayGroup:"Templates",displayMethod:"textarea",attrs:'style="height:9em;"'},{property:"customCSS",title:"Custom CSS",default:"",displayGroup:"Templates",displayMethod:"textarea",attrs:'style="height:9em"'}]},function(e,t){e.exports=[{property:"defaultUploadHost",default:"catbox",parse:"settings.setDefaultHost"},{property:"uploadHosts",title:"Hosts",actions:[{title:"Add",handler:"settings.addUploadHost"},{title:"Restore Defaults",handler:"settings.restoreDefaultHosts"}],displayGroup:"Hosts",displayMethod:"settings.renderHosts",parse:"settings.parseHosts",looseCompare:!0,dismissTextId:"uplodHostSettings",dismissRestoreText:"Show Help",text:"Properties<br><strong>Name</strong>: A unique identifier.<br><strong>URL</strong>: The URL to post the file to.<br><strong>Response Path/Match</strong>: A key path or regular expression to locate the uploaded filename in the response.<br><strong>File URL Format</strong>: The URL format for uploaded sounds. %s is replaced with the result of response path/match if given or the full response.<br><strong>Data</strong>: The form data for the upload (as JSON). Specify the file using $file.",mix:!0,default:{catbox:{default:!0,url:"https://catbox.moe/user/api.php",data:{reqtype:"fileupload",fileToUpload:"$file",userhash:null},filenameLength:29},pomf:{url:"https://pomf.cat/upload.php",data:{"files[]":"$file"},responsePath:"files.0.url",filenameLength:23},zz:{url:"https://zz.ht/api/upload",responsePath:"files.0.url",data:{"files[]":"$file"},headers:{token:null},filenameLength:19},lewd:{url:"https://lewd.se/upload",data:{file:"$file"},headers:{token:null,shortUrl:!0},responsePath:"data.link",filenameLength:30}}}]},function(e,t){e.exports=[{version:"3.0.0",name:"hosts-filename-length",async run(){const e=Player.settings.findDefault("uploadHosts").default;return Object.keys(e).forEach(t=>{Player.config.uploadHosts[t].filenameLength=e[t].filenameLength}),{}}}]},function(e,t){e.exports={atRoot:["on","off","trigger"],_events:{},_delegatedEvents:{},_undelegatedEvents:{},_audioEvents:[],initialize:function(){const e={Player:Player,...Player.components},t=Player.events._delegatedEvents,a=Player.events._undelegatedEvents,n=Player.events._audioEvents;for(let l in e){const s=e[l];for(let e in s.delegatedEvents||{})t[e]||(t[e]=[]),t[e].push(s.delegatedEvents[e]);for(let e in s.undelegatedEvents||{})a[e]||(a[e]=[]),a[e].push(s.undelegatedEvents[e]);s.audioEvents&&n.push(s.audioEvents)}Player.on("rendered",(function(){Player.events.addDelegatedListeners(Player.container,t),Player.events.addUndelegatedListeners(document,a);for(let e of n)for(let t in e){(Array.isArray(e[t])?e[t]:[e[t]]).forEach(e=>Player.audio.addEventListener(t,Player.getHandler(e)))}}))},addDelegatedListeners(e,t){for(let a in t)e.addEventListener(a,(function(n){let l=[n.target];for(;l[l.length-1]!==e;)l.push(l[l.length-1].parentNode);for(let e of l)for(let l of[].concat(t[a]))for(let t in l)if(e.matches&&e.matches(t)){n.eventTarget=e;let a=Player.getHandler(l[t]);if(a&&!1===a(n))return}}))},addUndelegatedListeners:function(e,t){for(let a in t)for(let n of[].concat(t[a]))for(let t in n)e.querySelectorAll(t).forEach(e=>{const l=Player.getHandler(n[t]);e.removeEventListener(a,l),e.addEventListener(a,l)})},on:function(e,t){Player.events._events[e]||(Player.events._events[e]=[]),Player.events._events[e].push(t)},off:function(e,t){const a=Player.events._events[e]&&Player.events._events[e].indexOf(t);a>-1&&Player.events._events[e].splice(a,1)},trigger:async function(e,...t){const a=Player.events._events[e]||[];for(let e of a)await e(...t)}}},function(e,t){e.exports={atRoot:["togglePlay","play","pause","next","previous","stop","toggleMute","volumeUp","volumeDown"],public:["togglePlay","play","pause","next","previous","stop","toggleMute","volumeUp","volumeDown"],togglePlay:function(){Player.audio.paused?Player.play():Player.pause()},play:async function(e,{paused:t}={}){try{e||Player.playing||!Player.sounds.length||(e=Player.sounds[0]);const a=document.querySelector(`.${ns}-video`);if(a.removeEventListener("canplaythrough",Player.actions._playOnceLoaded),Player.audio.removeEventListener("canplaythrough",Player.actions._playOnceLoaded),e){Player.playing&&(Player.playing.playing=!1);const t=Player.controls.audioEvents;for(let n in t){(Array.isArray(t[n])?t[n]:[t[n]]).forEach(t=>{const l=Player.getHandler(t);a.removeEventListener(n,l),e.standaloneVideo&&a.addEventListener(n,l)})}e.playing=!0,Player.playing=e,Player.audio.src=e.src,Player.isVideo=e.image.endsWith(".webm")||"video/webm"===e.type,Player.isStandalone=e.standaloneVideo,Player.audio=e.standaloneVideo?a:Player.controls._audio,Player.container.classList[Player.isVideo?"add":"remove"]("playing-video"),Player.container.classList[Player.isVideo||e.image.endsWith("gif")?"add":"remove"]("playing-animated"),await Player.trigger("playsound",e)}t||(!Player.isStandalone&&Player.isVideo&&(a.readyState<3||Player.audio.readyState<3)?(a.addEventListener("canplaythrough",Player.actions._playOnceLoaded),Player.audio.addEventListener("canplaythrough",Player.actions._playOnceLoaded)):Player.audio.play())}catch(e){Player.logError("There was an error playing the sound. Please check the console for details.",e)}},_playOnceLoaded:function(){const e=document.querySelector(`.${ns}-video`);e.readyState>2&&Player.audio.readyState>2&&(e.removeEventListener("canplaythrough",Player.actions._playOnceLoaded),Player.audio.removeEventListener("canplaythrough",Player.actions._playOnceLoaded),Player.audio.play(),setTimeout(Player.controls.syncVideo,100))},pause:function(){Player.audio&&Player.audio.pause()},stop:function(){Player.audio.src=null,Player.playing=null,Player.trigger("stop")},next:function(e){Player.actions._movePlaying(1,e)},previous:function(e){Player.audio.currentTime>3?Player.audio.currentTime=0:Player.actions._movePlaying(-1,e)},_movePlaying:function(e,{force:t,group:a,paused:n}={}){if(!Player.sounds.length)return;const l=Player.sounds.indexOf(Player.playing);if(-1===l)return Player.play(Player.sounds[0]);let s;if(t||"one"!==Player.config.repeat){let t=l;do{t="all"===Player.config.repeat?(t+e+Player.sounds.length)%Player.sounds.length:t+e,s=Player.sounds[t]}while(a&&s&&t!==l&&(!s.post||s.post===Player.playing.post))}else s=Player.sounds[l];s&&Player.play(s,{paused:n})},volumeUp:function(){Player.audio.volume=Math.min(Player.audio.volume+.05,1)},volumeDown:function(){Player.audio.volume=Math.max(Player.audio.volume-.05,0)},toggleMute:function(){Player.audio.volume=(Player._lastVolume||.5)*!Player.audio.volume}}},function(e,t,a){(function(t){e.exports={delegatedEvents:{click:{[`.${ns}-colorpicker-input, .${ns}-cp-preview`]:"colorpicker.create",[`.${ns}-apply-colorpicker`]:"colorpicker._applyColorPicker",[`.${ns}-close-colorpicker`]:t.noDefault(()=>Player.display.closeDialogs())},change:{[`.${ns}-rgb-input`]:"colorpicker._handleRGBInput"},focusout:{[`.${ns}-colorpicker-input`]:"colorpicker._updatePreview"},mousedown:{[`.${ns}-cp-saturation, .${ns}-cp-hue`]:e=>{const t=e.eventTarget;t._mousedown=!0,document.documentElement.addEventListener("mouseup",e=>delete t._mousedown,{once:!0}),Player.colorpicker[`_handle${e.eventTarget.classList.contains(ns+"-cp-hue")?"Hue":"Saturation"}Move`](e)}},mousemove:{[`.${ns}-cp-hue`]:"colorpicker._handleHueMove",[`.${ns}-cp-saturation`]:"colorpicker._handleSaturationMove"}},initialize:function(){Player.on("menu-close",e=>e._input&&delete e._input._colorpicker)},create:function(e){e.preventDefault(),e.stopPropagation();const a=e.eventTarget.parentNode,n="INPUT"===e.eventTarget.nodeName?e.eventTarget:a.querySelector("input"),l=a.querySelector(`.${ns}-cp-preview`);if(!n||n._colorpicker)return;Player.display.closeDialogs();const s=window.getComputedStyle(l).backgroundColor.match(/rgba?\((\d+), (\d+), (\d+)(?:, ([\d.]+))?\)/),r=[+s[1],+s[2],+s[3],isNaN(+s[4])?1:s[4]],o=t.element(Player.templates.colorpicker({HEIGHT:200,WIDTH:200,rgb:r}),a);Player.position.showRelativeTo(o,n),n._colorpicker=o,o._input=n,o._colorpicker={hsv:[0,1,1,1],rgb:r},Player.colorpicker.updateOutput(o)},_handleHueMove:function(e){if(!e.eventTarget._mousedown)return;e.preventDefault();const t=e.eventTarget.closest(`.${ns}-colorpicker`),a=Math.max(0,e.clientY-e.eventTarget.getBoundingClientRect().top);t._colorpicker.hsv[0]=a/200;const n=Player.colorpicker.hsv2rgb(t._colorpicker.hsv[0],1,1,1);t.querySelector(`.${ns}-cp-saturation`).style.background=`linear-gradient(to right, white, rgb(${n[0]}, ${n[1]}, ${n[2]}))`,e.eventTarget.querySelector(".position").style.top=Math.max(-3,a-6)+"px",Player.colorpicker.updateOutput(t,!0)},_handleSaturationMove:function(e){if(!e.eventTarget._mousedown)return;e.preventDefault();const t=e.eventTarget.closest(`.${ns}-colorpicker`),a=e.eventTarget.querySelector(".position"),n=Math.max(0,e.clientX-e.eventTarget.getBoundingClientRect().left),l=Math.max(0,e.clientY-e.eventTarget.getBoundingClientRect().top);t._colorpicker.hsv[1]=n/200,t._colorpicker.hsv[2]=1-l/200,a.style.top=Math.min(197,Math.max(-3,l-6))+"px",a.style.left=Math.min(197,Math.max(-3,n-5))+"px",Player.colorpicker.updateOutput(t,!0)},_handleRGBInput:function(e){const t=e.eventTarget.closest(`.${ns}-colorpicker`);t._colorpicker.rgb[+e.eventTarget.getAttribute("data-color")]=e.eventTarget.value,Player.colorpicker.updateOutput(t)},updateOutput:function(e,t){const a=t?["hsv","rgb"]:["rgb","hsv"];e._colorpicker[a[1]]=Player.colorpicker[`${a[0]}2${a[1]}`](...e._colorpicker[a[0]]);const[n,l,s,r]=e._colorpicker.rgb;if(t)e.querySelector(`.${ns}-rgb-input[data-color="0"]`).value=n,e.querySelector(`.${ns}-rgb-input[data-color="1"]`).value=l,e.querySelector(`.${ns}-rgb-input[data-color="2"]`).value=s,e.querySelector(`.${ns}-rgb-input[data-color="3"]`).value=r;else{const[t,a,n]=e._colorpicker.hsv,l=e.querySelector(`.${ns}-cp-hue .position`),s=e.querySelector(`.${ns}-cp-saturation .position`),r=Player.colorpicker.hsv2rgb(t,1,1,1);e.querySelector(`.${ns}-cp-saturation`).style.background=`linear-gradient(to right, white, rgb(${r[0]}, ${r[1]}, ${r[2]}))`,l.style.top=200*t-3+"px",s.style.left=200*a-3+"px",s.style.top=200*(1-n)-3+"px"}e.querySelector(".output-color").style.background=`rgb(${n}, ${l}, ${s}, ${r})`},_applyColorPicker:function(e){e.preventDefault(),e.stopPropagation();const t=e.eventTarget.closest(`.${ns}-colorpicker`),[a,n,l,s]=t._colorpicker.rgb,r=t._input;r.value=`rgb(${a}, ${n}, ${l}, ${s})`,delete r._colorpicker,t.parentNode.removeChild(t),r.focus(),r.blur()},hsv2rgb:function(e,t,a,n){const l=Math.floor(6*e),s=6*e-l,r=a*(1-t),o=a*(1-s*t),i=a*(1-(1-s)*t),d=l%6,c=[a,o,r,r,i,a][d],u=[i,a,a,o,r,r][d],p=[r,r,i,a,a,o][d];return[Math.round(255*c),Math.round(255*u),Math.round(255*p),n]},rgb2hsv:function(e,t,a,n){const l=Math.max(e,t,a),s=Math.min(e,t,a),r=l-s,o=0===l?0:r/l,i=l/255;let d;switch(l){case s:d=0;break;case e:d=t-a+r*(t<a?6:0),d/=6*r;break;case t:d=a-e+2*r,d/=6*r;break;case a:d=e-t+4*r,d/=6*r}return[d,o,i,n]},_updatePreview:function(e){const t=e.eventTarget.value;e.eventTarget.parentNode.querySelector(`.${ns}-cp-preview`).style.background=t}}}).call(this,a(0))},function(e,t,a){(function(t){e.exports={delegatedEvents:{click:{[`.${ns}-previous-button`]:t.noDefault(()=>Player.previous({force:!0})),[`.${ns}-play-button`]:t.noDefault("togglePlay"),[`.${ns}-next-button`]:t.noDefault(()=>Player.next({force:!0})),[`.${ns}-seek-bar`]:"controls.handleSeek",[`.${ns}-volume-bar`]:"controls.handleVolume",[`.${ns}-volume-button`]:t.noDefault("toggleMute"),[`.${ns}-fullscreen-button`]:"display.toggleFullScreen"},mousedown:{[`.${ns}-seek-bar`]:()=>Player._seekBarDown=!0,[`.${ns}-volume-bar`]:()=>Player._volumeBarDown=!0},mousemove:{[`.${ns}-seek-bar`]:e=>Player._seekBarDown&&Player.controls.handleSeek(e),[`.${ns}-volume-bar`]:e=>Player._volumeBarDown&&Player.controls.handleVolume(e)}},undelegatedEvents:{mouseleave:{[`.${ns}-seek-bar`]:e=>Player._seekBarDown&&Player.controls.handleSeek(e),[`.${ns}-volume-bar`]:e=>Player._volumeBarDown&&Player.controls.handleVolume(e)},mouseup:{body:()=>{Player._seekBarDown=!1,Player._volumeBarDown=!1}},play:{[`.${ns}-video`]:"controls.syncVideo"},pause:{[`.${ns}-video`]:"controls.syncVideo"}},audioEvents:{ended:()=>Player.next(),pause:"controls.handleAudioEvent",play:"controls.handleAudioEvent",seeked:"controls.handleAudioEvent",waiting:"controls.handleAudioEvent",timeupdate:"controls.updateDuration",loadedmetadata:["controls.updateDuration","controls.preventWrapping"],durationchange:"controls.updateDuration",volumechange:"controls.updateVolume",loadstart:"controls.pollForLoading",error:"controls.handleAudioError"},initialize:async function(){Player.controls._audio=Player.audio,GM.getValue("volume").then(e=>e>=0&&e<=1&&(Player.audio.volume=e)),Player.on("show",()=>Player._hiddenWhilePolling&&Player.controls.pollForLoading()),Player.on("hide",()=>{Player._hiddenWhilePolling=!!Player._loadingPoll,Player.controls.stopPollingForLoading()}),Player.on("rendered",()=>{Player.ui.currentTimeBar=Player.$(`.${ns}-seek-bar .${ns}-current-bar`),Player.ui.loadedBar=Player.$(`.${ns}-seek-bar .${ns}-loaded-bar`),Player.controls.updateDuration(),Player.controls.updateVolume(),Player.controls.preventWrapping()}),Player.on("config:preventControlsWrapping",e=>!e&&Player.controls.showAllControls()),Player.on("config:controlsHideOrder",()=>{Player.controls.setHideOrder(),Player.controls.preventWrapping()})},handleAudioError:function(e){Player.playing&&(Player.logError(`Failed to play ${Player.playing.title}. Please check the console for details.`,e,"warning"),Player.next())},handleAudioEvent:function(){Player.controls.syncVideo(),Player.controls.updateDuration(),document.querySelectorAll(`.${ns}-play-button`).forEach(e=>{e.classList[Player.audio.paused?"add":"remove"](ns+"-play")})},syncVideo:function(){if(Player.isVideo&&!Player.isStandalone){const e=Player.audio.paused,t=document.querySelector(`.${ns}-video`);t&&(t.currentTime=Player.audio.currentTime%t.duration,e?t.pause():t.play())}},pollForLoading:function(){Player._loadingPoll=Player._loadingPoll||setInterval(Player.controls.updateLoaded,1e3)},stopPollingForLoading:function(){Player._loadingPoll&&clearInterval(Player._loadingPoll),Player._loadingPoll=null},updateLoaded:function(){const e=Player.audio.buffered.length,t=e>0?Player.audio.buffered.end(e-1)/Player.audio.duration*100:0;100===t&&Player.controls.stopPollingForLoading(),Player.ui.loadedBar.style.width=t+"%"},updateDuration:function(){const e=t.toDuration(Player.audio.currentTime),a=t.toDuration(Player.audio.duration);document.querySelectorAll(`.${ns}-current-time`).forEach(t=>t.childNodes[0].textContent=e),document.querySelectorAll(`.${ns}-duration`).forEach(e=>e.childNodes[0].textContent=a),Player.controls.updateProgressBarPosition(Player.ui.currentTimeBar,Player.audio.currentTime,Player.audio.duration)},updateVolume:function(){const e=Player.audio.volume;e>0&&(Player._lastVolume=e),GM.setValue("volume",e),document.querySelectorAll(`.${ns}-volume-button`).forEach(t=>{t.classList[0===e?"add":"remove"]("mute"),t.classList[e>0?"add":"remove"]("up")}),Player.controls.updateProgressBarPosition(Player.$(`.${ns}-volume-bar .${ns}-current-bar`),Player.audio.volume,1)},updateProgressBarPosition:function(e,t,a){if(!e)return;t||(t=0),a||(a=0);const n=a?Math.max(0,Math.min((t||0)/a,1)):0;e.style.width=`calc(${100*n}% - ${.8*n-.4}rem)`},handleSeek:function(e){e.preventDefault(),Player.audio.duration&&Player.audio.duration!==1/0&&(Player.audio.currentTime=Player.audio.duration*Player.controls._getBarXRatio(e))},handleVolume:function(e){e.preventDefault(),Player.audio.volume=Player.controls._getBarXRatio(e),Player.controls.updateVolume()},_getBarXRatio:function(e){const t=.4*Player.remSize;return Math.max(0,Math.min(1,(e.offsetX-t)/(parseInt(getComputedStyle(e.eventTarget||e.target).width,10)-2*t)))},showAllControls:function(){Player.$all(`.${ns}-controls [data-hide-id]`).forEach(e=>e.style.display=null)},preventWrapping:function(){if(!Player.config.preventControlWrapping)return;const e=Player.$(`.${ns}-controls`),t=parseFloat(window.getComputedStyle(e).paddingTop),a=Player.controls.hideOrder||Player.controls.setHideOrder();let n=Array.prototype.slice.call(e.children),l=n.pop(),s=0;for(Player.controls.showAllControls();l.offsetTop>t&&s<a.length;){const e=a[s++];e.style.display="none",n=n.filter(t=>t!==e),e===l&&(l=n.pop())}},setHideOrder:function(){Array.isArray(Player.config.controlsHideOrder)||Player.settings.reset("controlsHideOrder");const e=Player.$(`.${ns}-controls`);return Player.controls.hideOrder=Player.config.controlsHideOrder.map(t=>e.querySelector(`[data-hide-id="${t}"]`)).filter(e=>e).sort((e,t)=>e.dataset.hideOrder-t.dataset.hideOrder)}}}).call(this,a(0))},function(e,t,a){(function(t){const n=a(2),l=a(3),s={},r={};e.exports={atRoot:["show","hide"],public:["show","hide"],delegatedEvents:{click:{[`.${ns}-close-button`]:"hide",[`.${ns}-dismiss-link`]:"display._handleDismiss",[`.${ns}-restore-link`]:"display._handleRestore"},fullscreenchange:{[`.${ns}-player`]:"display._handleFullScreenChange"},drop:{[`#${ns}-container`]:"display._handleDrop"}},undelegatedEvents:{click:{body:"display.closeDialogs"},keydown:{body:e=>"Escape"===e.key&&Player.display.closeDialogs(e)}},initialize:async function(){try{Player.display.dismissed=(await GM.getValue("dismissed")).split(",")}catch(e){Player.display.dismissed=[]}Player.on("playsound",()=>{Player.display._marquees={},!Player.display._marqueeTO&&Player.display.runTitleMarquee()}),Player.remSize=parseFloat(getComputedStyle(document.documentElement).fontSize)},createPlayerButton:function(){if("FoolFuuka"===Site){const e=document.querySelector(".navbar-inner .nav:nth-child(2)");t.element('<li><a href="javascript:;">Sounds</a></li>',e).children[0].addEventListener("click",Player.display.toggle)}else if("Fuuka"===Site){const e=document.querySelector("body > div > br");e.parentNode.insertBefore(document.createTextNode("["),e),t.elementBefore('<a href="javascript:;">Sounds</a>',e,{click:Player.display.toggle}),e.parentNode.insertBefore(document.createTextNode("]"),e)}else if(isChanX){t.elementBefore('<span id="shortcut-sounds" class="shortcut brackets-wrap" data-index="0">\n\t\t\t\t<a href="javascript:;" title="Sounds" class="fa fa-play-circle">Sounds</a>\n\t\t\t</span>',document.getElementById("shortcut-settings")).querySelector("a").addEventListener("click",Player.display.toggle)}else document.querySelectorAll("#settingsWindowLink, #settingsWindowLinkBot").forEach((function(e){t.elementBefore('<a href="javascript:;">Sounds</a>',e,{click:Player.display.toggle}),e.parentNode.insertBefore(document.createTextNode("] ["),e)}))},render:async function(){try{Player.container&&(document.body.removeChild(Player.container),document.head.removeChild(Player.stylesheet)),Player.display.updateStylesheet(),Player.display.updateUserStylesheet(),Player.userTemplate.maintain({render:Player.display.updateUserStylesheet},"customCSS");const e=document.body.classList.contains("is_thread")&&!isChanX&&document.body.querySelector(".board")||document.body;Player.container=t.element(Player.templates.body(),e),Player.trigger("rendered")}catch(e){throw Player.logError("There was an error rendering the sound player.",e),e}},forceBoardTheme:function(){Player.display.applyBoardTheme(!0),Player.settings.save()},applyBoardTheme:function(e){const a=t.element(`<div class="${n.styleFetcher}"></div>`,document.body),s=document.defaultView.getComputedStyle(a);if("rgba(0, 0, 0, 0)"===s.backgroundColor)return setTimeout(Player.display.applyBoardTheme,0);Object.assign(s,{page_background:window.getComputedStyle(document.body).backgroundColor});const r={"colors.text":"color","colors.background":"backgroundColor","colors.odd_row":"backgroundColor","colors.border":"borderBottomColor","colors.even_row":s.borderBottomColor===s.color?"backgroundColor":"borderBottomColor","colors.page_background":"page_background"};l.find(e=>"colors"===e.property).settings.forEach(a=>{const n=e||a.default===t.get(Player.config,a.property);r[a.property]&&(a.default=s[r[a.property]]),n&&Player.set(a.property,a.default,{bypassSave:!0,bypassRender:!0,bypassStylesheet:!0})}),document.body.removeChild(a),Player.stylesheet&&Player.display.updateStylesheet(),Player.settings.render()},updateStylesheet:function(){Player.stylesheet=Player.stylesheet||t.element('<style id="sound-player-css"></style>',document.head),Player.stylesheet.innerHTML=(isChanX?"":"/* 4chanX Polyfill */\n\n"+Player.templates.css4chanXPolyfill())+"\n\n/* Sounds Player CSS */\n\n"+Player.templates.css()},updateUserStylesheet:function(){Player.userStylesheet=Player.userStylesheet||t.element('<style id="sound-player-user-css"></style>',document.head),Player.userStylesheet.innerHTML=Player.userTemplate.build({template:"/* Sounds Player User CSS */\n\n"+Player.config.customCSS,sound:Player.playing,configOnly:!0})},setViewStyle:async function(e){const t=Player.config.viewStyle;if("fullscreen"!==e&&document.fullscreenElement&&document.exitFullscreen(),Player.set("viewStyle",e),Player.container.setAttribute("data-view-style",e),"playlist"!==e&&"image"!==e||Player.controls.preventWrapping(),"fullscreen"!==t||"fullscreen"===e){const[e,t]=(await GM.getValue("size")||"").split(":");e&&t&&Player.position.resize(parseInt(e,10),parseInt(t,10)),Player.position.setPostWidths()}Player.trigger("view",e,t)},toggle:function(e){e&&e.preventDefault(),"none"===Player.container.style.display?Player.show():Player.hide()},hide:function(e){e&&e.preventDefault(),Player.container.style.display="none",Player.isHidden=!0,Player.trigger("hide")},show:async function(e){e&&e.preventDefault(),Player.container.style.display&&(Player.container.style.display=null,Player.isHidden=!1,await Player.trigger("show"))},close:async function(){Player.stop(),Player.hide()},toggleFullScreen:async function(){document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():(Player.isHidden&&Player.show(),Player.$(`.${ns}-player`).requestFullscreen())},_handleDrop:function(e){e.preventDefault(),e.stopPropagation(),Player.playlist.addFromFiles(e.dataTransfer.files)},_handleFullScreenChange:function(){document.fullscreenElement?(Player.display.setViewStyle("fullscreen"),document.querySelector(`.${ns}-image-link`).removeAttribute("href")):(Player.playing&&(document.querySelector(`.${ns}-image-link`).href=Player.playing.image),Player.playlist.restore()),Player.controls.preventWrapping()},_handleRestore:async function(e){e.preventDefault();const a=e.eventTarget.getAttribute("data-restore"),n=Player.display.dismissed.indexOf(a);a&&n>-1&&(Player.display.dismissed.splice(n,1),Player.$all(`[data-restore="${a}"]`).forEach(e=>{t.elementBefore(s[a],e),e.parentNode.removeChild(e)}),await GM.setValue("dismissed",Player.display.dismissed.join(",")))},_handleDismiss:async function(e){e.preventDefault();const a=e.eventTarget.getAttribute("data-dismiss");a&&!Player.display.dismissed.includes(a)&&(Player.display.dismissed.push(a),Player.$all(`[data-dismiss-id="${a}"]`).forEach(e=>{t.elementBefore(`<a href="#" class="${ns}-restore-link" data-restore="${a}">${r[a]}</a>`,e),e.parentNode.removeChild(e)}),await GM.setValue("dismissed",Player.display.dismissed.join(",")))},ifNotDismissed:function(e,t,a){return s[e]=a,r[e]=t,Player.display.dismissed.includes(e)?`<a href="#" class="${ns}-restore-link" data-restore="${e}">${t}</a>`:a},closeDialogs:function(e){document.querySelectorAll(`.${ns}-menu, .${ns}-colorpicker`).forEach(t=>{e&&t.classList.contains(ns+"-colorpicker")&&t.contains(e.target)||(t.parentNode.removeChild(t),Player.trigger("menu-close",t))})},runTitleMarquee:async function(){Player.display._marqueeTO=setTimeout(Player.display.runTitleMarquee,1e3),document.querySelectorAll(`.${ns}-title-marquee`).forEach(e=>{const t=e.parentNode.getBoundingClientRect().width-(e.scrollWidth+1),a=e.getAttribute("data-location");if(t>=0)return e.style.marginLeft=null;const n=Player.display._marquees[a]=Player.display._marquees[a]||{direction:1,position:parseInt(e.style.marginLeft,10)||0};n.pause>0?n.pause--:(n.position-=20*n.direction,(n.position>0||n.position<t)&&(n.position=Math.min(0,Math.max(n.position,t)),n.direction*=-1,n.pause=1),e.style.marginLeft=n.position+"px")})}}}).call(this,a(0))},function(e,t){e.exports={initialize:function(){Player.userTemplate.maintain(Player.footer,"footerTemplate")},render:function(){Player.container&&(Player.$(`.${ns}-footer`).innerHTML=Player.templates.footer())}}},function(e,t){e.exports={initialize:function(){Player.userTemplate.maintain(Player.header,"headerTemplate")},render:function(){Player.$(`.${ns}-header`).innerHTML=Player.templates.header()}}},function(e,t,a){const n=a(3);e.exports={initialize:function(){if(Player.on("rendered",Player.hotkeys.apply),Player.on("config:hotkeys",Player.hotkeys.apply),"mediaSession"in navigator&&Player.config.hardwareMediaKeys){const e=[["play",()=>Player.play()],["pause",()=>Player.pause()],["stop",()=>Player.pause()],["previoustrack",()=>Player.previous()],["nexttrack",()=>Player.next()],["seekbackward",e=>Player.audio.currentTime-=e.seekOffset||10],["seekforward",e=>Player.audio.currentTime+=e.seekOffset||10],["seekto",e=>Player.audio.currentTime+=e.seekTime]];for(let[t,a]of e)try{navigator.mediaSession.setActionHandler(t,a)}catch(e){}Player.audio.addEventListener("pause",()=>navigator.mediaSession.playbackState="paused"),Player.audio.addEventListener("ended",()=>navigator.mediaSession.playbackState="paused"),Player.audio.addEventListener("play",(function(){navigator.mediaSession.playbackState="playing",navigator.mediaSession.metadata=new MediaMetadata({title:Player.playing.title,artist:"4chan Sounds Player",album:document.title,artwork:[{src:Player.playing.thumb}]})}))}},_keyMap:{" ":"space",arrowleft:"left",arrowright:"right",arrowup:"up",arrowdown:"down"},addHandler:()=>{Player.hotkeys.removeHandler(),document.body.addEventListener("keydown",Player.hotkeys.handle)},removeHandler:()=>{document.body.removeEventListener("keydown",Player.hotkeys.handle)},apply:function(){const e=Player.config.hotkeys;Player.hotkeys.removeHandler(),Player.off("show",Player.hotkeys.addHandler),Player.off("hide",Player.hotkeys.removeHandler),"always"===e?Player.hotkeys.addHandler():"open"===e&&(Player.isHidden||Player.hotkeys.addHandler(),Player.on("show",Player.hotkeys.addHandler),Player.on("hide",Player.hotkeys.removeHandler))},handle:function(e){if(["INPUT","SELECT","TEXTAREA","INPUT"].includes(e.target.nodeName)||Player.isHidden&&("always"!==Player.config.hotkeys||!Player.sounds.length))return;const t=e.key.toLowerCase(),a=Player.config.hotkey_bindings||{};for(let l in a){const s=a[l],r=t===s.key&&!!s.shiftKey==!!e.shiftKey&&!!s.ctrlKey==!!e.ctrlKey&&!!s.metaKey==!!e.metaKey&&(!s.ignoreRepeat||!e.repeat)&&n.find(e=>"hotkey_bindings"===e.property).settings.find(e=>e.property==="hotkey_bindings."+l);if(r)return e.preventDefault(),Player.getHandler(r.keyHandler)()}},stringifyKey:function(e){let t=e.key.toLowerCase();return Player.hotkeys._keyMap[t]&&(t=Player.hotkeys._keyMap[t]),(e.ctrlKey?"Ctrl+":"")+(e.shiftKey?"Shift+":"")+(e.metaKey?"Meta+":"")+t},parseKey:function(e){const t=e.split("+");let a=t.pop();Object.keys(Player.hotkeys._keyMap).find(e=>Player.hotkeys._keyMap[e]===a&&(a=e));const n={key:a};return t.forEach(e=>n[e.toLowerCase()+"Key"]=!0),n}}},function(e,t,a){(function(t,a){e.exports={_showingPIP:!1,initialize:function(){isChanX&&Player.userTemplate.maintain(Player.minimised,"chanXTemplate",["chanXControls"],["show","hide","stop"]),Player.on("rendered",Player.minimised.render),Player.on("show",Player.minimised.hidePIP),Player.on("hide",Player.minimised.showPIP),Player.on("stop",Player.minimised.hidePIP),Player.on("playsound",Player.minimised.showPIP)},render:function(){if(Player.container&&isChanX){let e=document.querySelector(`.${ns}-chan-x-controls`);if(e||(e=t.elementBefore(`<span class="${ns}-chan-x-controls ${ns}-col-auto ${ns}-align-center"></span>`,document.querySelector("#shortcuts").firstElementChild),Player.events.addDelegatedListeners(e,{click:[Player.userTemplate.delegatedEvents.click,Player.controls.delegatedEvents.click]})),"never"===Player.config.chanXControls||"closed"===Player.config.chanXControls&&!Player.isHidden)return e.innerHTML="";e.innerHTML=Player.userTemplate.build({template:Player.config.chanXTemplate,location:"4chan-X-controls",sound:Player.playing,replacements:{"prev-button":`<a href="#" class="${ns}-media-control ${ns}-previous-button ${ns}-hover-fill">${a.skipStart} ${a.skipStartFill}</a>`,"play-button":`<a href="#" class="${ns}-media-control ${ns}-play-button ${ns}-hover-fill ${!Player.audio||Player.audio.paused?ns+"-play":""}">${a.play} ${a.pause} ${a.playFill} ${a.pauseFill}</a>`,"next-button":`<a href="#" class="${ns}-media-control ${ns}-next-button ${ns}-hover-fill">${a.skipEnd} ${a.skipEndFill} </a>`,"sound-current-time":`<span class="${ns}-current-time">0:00</span>`,"sound-duration":`<span class="${ns}-duration">0:00</span>`}})}},showPIP:function(){if(!Player.isHidden||!Player.config.pip||!Player.playing||Player.minimised._showingPIP)return;Player.minimised._showingPIP=!0;const e=document.querySelector(`.${ns}-image-link`);document.body.appendChild(e),e.classList.add(ns+"-pip"),e.style.bottom=Player.position.getHeaderOffset().bottom+10+"px",e.addEventListener("click",Player.show)},hidePIP:function(){Player.minimised._showingPIP=!1;const e=document.querySelector(`.${ns}-image-link`),t=Player.$(`.${ns}-controls`);t.parentNode.insertBefore(document.querySelector(`.${ns}-image-link`),t),e.classList.remove(ns+"-pip"),e.style.bottom=null,e.removeEventListener("click",Player.show)}}}).call(this,a(0),a(1))},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-clockwise" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"/>\n  <path d="M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrows-collapse" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707l-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrows-expand" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zM7.646.146a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 1.707V5.5a.5.5 0 0 1-1 0V1.707L6.354 2.854a.5.5 0 1 1-.708-.708l2-2zM8 10a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 14.293V10.5A.5.5 0 0 1 8 10z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-arrow-repeat" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41zm-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9z"/>\n  <path fill-rule="evenodd" d="M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5.002 5.002 0 0 0 8 3zM3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9H3.1z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chat-right-quote" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M2 1h12a1 1 0 0 1 1 1v11.586l-2-2A2 2 0 0 0 11.586 11H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"/>\n  <path fill-rule="evenodd" d="M7.066 4.76A1.665 1.665 0 0 0 4 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112zm4 0A1.665 1.665 0 0 0 8 5.668a1.667 1.667 0 0 0 2.561 1.406c-.131.389-.375.804-.777 1.22a.417.417 0 1 0 .6.58c1.486-1.54 1.293-3.214.682-4.112z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-chevron-down" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-plus" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-gear" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.837 1.626c-.246-.835-1.428-.835-1.674 0l-.094.319A1.873 1.873 0 0 1 4.377 3.06l-.292-.16c-.764-.415-1.6.42-1.184 1.185l.159.292a1.873 1.873 0 0 1-1.115 2.692l-.319.094c-.835.246-.835 1.428 0 1.674l.319.094a1.873 1.873 0 0 1 1.115 2.693l-.16.291c-.415.764.42 1.6 1.185 1.184l.292-.159a1.873 1.873 0 0 1 2.692 1.116l.094.318c.246.835 1.428.835 1.674 0l.094-.319a1.873 1.873 0 0 1 2.693-1.115l.291.16c.764.415 1.6-.42 1.184-1.185l-.159-.291a1.873 1.873 0 0 1 1.116-2.693l.318-.094c.835-.246.835-1.428 0-1.674l-.319-.094a1.873 1.873 0 0 1-1.115-2.692l.16-.292c.415-.764-.42-1.6-1.185-1.184l-.291.159A1.873 1.873 0 0 1 8.93 1.945l-.094-.319zm-2.633-.283c.527-1.79 3.065-1.79 3.592 0l.094.319a.873.873 0 0 0 1.255.52l.292-.16c1.64-.892 3.434.901 2.54 2.541l-.159.292a.873.873 0 0 0 .52 1.255l.319.094c1.79.527 1.79 3.065 0 3.592l-.319.094a.873.873 0 0 0-.52 1.255l.16.292c.893 1.64-.902 3.434-2.541 2.54l-.292-.159a.873.873 0 0 0-1.255.52l-.094.319c-.527 1.79-3.065 1.79-3.592 0l-.094-.319a.873.873 0 0 0-1.255-.52l-.292.16c-1.64.893-3.433-.902-2.54-2.541l.159-.292a.873.873 0 0 0-.52-1.255l-.319-.094c-1.79-.527-1.79-3.065 0-3.592l.319-.094a.873.873 0 0 0 .52-1.255l-.16-.292c-.892-1.64.902-3.433 2.541-2.54l.292.159a.873.873 0 0 0 1.255-.52l.094-.319z"/>\n  <path fill-rule="evenodd" d="M8 5.754a2.246 2.246 0 1 0 0 4.492 2.246 2.246 0 0 0 0-4.492zM4.754 8a3.246 3.246 0 1 1 6.492 0 3.246 3.246 0 0 1-6.492 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-earmark-image" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M12 16a2 2 0 0 0 2-2V4.5L9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8zM3 2a1 1 0 0 1 1-1h5.5v2A1.5 1.5 0 0 0 11 4.5h2V10l-2.083-2.083a.5.5 0 0 0-.76.063L8 11 5.835 9.7a.5.5 0 0 0-.611.076L3 12V2z"/>\n  <path fill-rule="evenodd" d="M6.502 7a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-file-earmark-music" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4 0h5.5v1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5h1V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2z"/>\n  <path d="M9.5 3V0L14 4.5h-3A1.5 1.5 0 0 1 9.5 3z"/>\n  <path fill-rule="evenodd" d="M9.757 5.67A1 1 0 0 1 11 6.64v1.75l-2 .5v3.61c0 .495-.301.883-.662 1.123C7.974 13.866 7.499 14 7 14c-.5 0-.974-.134-1.338-.377-.36-.24-.662-.628-.662-1.123s.301-.883.662-1.123C6.026 11.134 6.501 11 7 11c.356 0 .7.068 1 .196V6.89a1 1 0 0 1 .757-.97l1-.25z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-filter" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-fullscreen" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-fullscreen-exit" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1.0625em" height="1em" viewBox="0 0 17 16" class="bi bi-image" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M14.002 2h-12a1 1 0 0 0-1 1v9l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094L15.002 9.5V3a1 1 0 0 0-1-1zm-12-1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm4 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-link-45deg" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4.715 6.542L3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.001 1.001 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/>\n  <path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 0 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 0 0-4.243-4.243L6.586 4.672z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-music-note-list" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M12 13c0 1.105-1.12 2-2.5 2S7 14.105 7 13s1.12-2 2.5-2 2.5.895 2.5 2z"/>\n  <path fill-rule="evenodd" d="M12 3v10h-1V3h1z"/>\n  <path d="M11 2.82a1 1 0 0 1 .804-.98l3-.6A1 1 0 0 1 16 2.22V4l-5 1V2.82z"/>\n  <path fill-rule="evenodd" d="M0 11.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 .5 7H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5zm0-4A.5.5 0 0 1 .5 3H8a.5.5 0 0 1 0 1H.5a.5.5 0 0 1-.5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-play" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-play-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-pause" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-pause-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-plus-circle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>\n  <path fill-rule="evenodd" d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-bootstrap-reboot" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M1.161 8a6.84 6.84 0 1 0 6.842-6.84.58.58 0 0 1 0-1.16 8 8 0 1 1-6.556 3.412l-.663-.577a.58.58 0 0 1 .227-.997l2.52-.69a.58.58 0 0 1 .728.633l-.332 2.592a.58.58 0 0 1-.956.364l-.643-.56A6.812 6.812 0 0 0 1.16 8zm5.48-.079V5.277h1.57c.881 0 1.416.499 1.416 1.32 0 .84-.504 1.324-1.386 1.324h-1.6zm0 3.75V8.843h1.57l1.498 2.828h1.314L9.377 8.665c.897-.3 1.427-1.106 1.427-2.1 0-1.37-.943-2.246-2.456-2.246H5.5v7.352h1.141z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-search" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"/>\n  <path fill-rule="evenodd" d="M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-shuffle" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M0 3.5A.5.5 0 0 1 .5 3H1c2.202 0 3.827 1.24 4.874 2.418.49.552.865 1.102 1.126 1.532.26-.43.636-.98 1.126-1.532C9.173 4.24 10.798 3 13 3v1c-1.798 0-3.173 1.01-4.126 2.082A9.624 9.624 0 0 0 7.556 8a9.624 9.624 0 0 0 1.317 1.918C9.828 10.99 11.204 12 13 12v1c-2.202 0-3.827-1.24-4.874-2.418A10.595 10.595 0 0 1 7 9.05c-.26.43-.636.98-1.126 1.532C4.827 11.76 3.202 13 1 13H.5a.5.5 0 0 1 0-1H1c1.798 0 3.173-1.01 4.126-2.082A9.624 9.624 0 0 0 6.444 8a9.624 9.624 0 0 0-1.317-1.918C4.172 5.01 2.796 4 1 4H.5a.5.5 0 0 1-.5-.5z"/>\n  <path d="M13 5.466V1.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192zm0 9v-3.932a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384l-2.36 1.966a.25.25 0 0 1-.41-.192z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-skip-end" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M12 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"/>\n  <path fill-rule="evenodd" d="M10.804 8L5 4.633v6.734L10.804 8zm.792-.696a.802.802 0 0 1 0 1.392l-6.363 3.692C4.713 12.69 4 12.345 4 11.692V4.308c0-.653.713-.998 1.233-.696l6.363 3.692z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-skip-end-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M12 3.5a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-1 0V4a.5.5 0 0 1 .5-.5z"/>\n  <path d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-skip-start" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M4.5 3.5A.5.5 0 0 0 4 4v8a.5.5 0 0 0 1 0V4a.5.5 0 0 0-.5-.5z"/>\n  <path fill-rule="evenodd" d="M5.696 8L11.5 4.633v6.734L5.696 8zm-.792-.696a.802.802 0 0 0 0 1.392l6.363 3.692c.52.302 1.233-.043 1.233-.696V4.308c0-.653-.713-.998-1.233-.696L4.904 7.304z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-skip-start-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M4.5 3.5A.5.5 0 0 0 4 4v8a.5.5 0 0 0 1 0V4a.5.5 0 0 0-.5-.5z"/>\n  <path d="M4.903 8.697l6.364 3.692c.54.313 1.232-.066 1.232-.697V4.308c0-.63-.692-1.01-1.232-.696L4.903 7.304a.802.802 0 0 0 0 1.393z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-soundwave" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M8.5 2a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5zm-2 2a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm4 0a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zm-6 1.5A.5.5 0 0 1 5 6v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm8 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm-10 1A.5.5 0 0 1 3 7v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5zm12 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0V7a.5.5 0 0 1 .5-.5z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-tools" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M0 1l1-1 3.081 2.2a1 1 0 0 1 .419.815v.07a1 1 0 0 0 .293.708L10.5 9.5l.914-.305a1 1 0 0 1 1.023.242l3.356 3.356a1 1 0 0 1 0 1.414l-1.586 1.586a1 1 0 0 1-1.414 0l-3.356-3.356a1 1 0 0 1-.242-1.023L9.5 10.5 3.793 4.793a1 1 0 0 0-.707-.293h-.071a1 1 0 0 1-.814-.419L0 1zm11.354 9.646a.5.5 0 0 0-.708.708l3 3a.5.5 0 0 0 .708-.708l-3-3z"/>\n  <path fill-rule="evenodd" d="M15.898 2.223a3.003 3.003 0 0 1-3.679 3.674L5.878 12.15a3 3 0 1 1-2.027-2.027l6.252-6.341A3 3 0 0 1 13.778.1l-2.142 2.142L12 4l1.757.364 2.141-2.141zm-13.37 9.019L3.001 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-trash" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/>\n  <path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4L4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-volume-mute" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zM6 5.04L4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96V5.04zm7.854.606a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708l4-4a.5.5 0 0 1 .708 0z"/>\n  <path fill-rule="evenodd" d="M9.146 5.646a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-volume-mute-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zm7.137 2.096a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708l4-4a.5.5 0 0 1 .708 0z"/>\n  <path fill-rule="evenodd" d="M9.146 5.646a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-volume-up" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06zM6 5.04L4.312 6.39A.5.5 0 0 1 4 6.5H2v3h2a.5.5 0 0 1 .312.11L6 10.96V5.04z"/>\n  <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>\n  <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>\n  <path d="M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707z"/>\n</svg>'},function(e,t,a){"use strict";a.r(t),t.default='<svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-volume-up-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">\n  <path d="M11.536 14.01A8.473 8.473 0 0 0 14.026 8a8.473 8.473 0 0 0-2.49-6.01l-.708.707A7.476 7.476 0 0 1 13.025 8c0 2.071-.84 3.946-2.197 5.303l.708.707z"/>\n  <path d="M10.121 12.596A6.48 6.48 0 0 0 12.025 8a6.48 6.48 0 0 0-1.904-4.596l-.707.707A5.483 5.483 0 0 1 11.025 8a5.483 5.483 0 0 1-1.61 3.89l.706.706z"/>\n  <path d="M8.707 11.182A4.486 4.486 0 0 0 10.025 8a4.486 4.486 0 0 0-1.318-3.182L8 5.525A3.489 3.489 0 0 1 9.025 8 3.49 3.49 0 0 1 8 10.475l.707.707z"/>\n  <path fill-rule="evenodd" d="M6.717 3.55A.5.5 0 0 1 7 4v8a.5.5 0 0 1-.812.39L3.825 10.5H1.5A.5.5 0 0 1 1 10V6a.5.5 0 0 1 .5-.5h2.325l2.363-1.89a.5.5 0 0 1 .529-.06z"/>\n</svg>'},function(e,t,a){(function(t,n){const{parseFiles:l,parseFileName:s}=a(4),{postIdPrefix:r}=a(2);e.exports={atRoot:["add","remove"],public:["search"],delegatedEvents:{click:{[`.${ns}-list-item`]:"playlist.handleSelect"},mousemove:{[`.${ns}-list-item`]:"playlist.positionHoverImage"},dragstart:{[`.${ns}-list-item`]:"playlist.handleDragStart"},dragenter:{[`.${ns}-list-item`]:"playlist.handleDragEnter"},dragend:{[`.${ns}-list-item`]:"playlist.handleDragEnd"},dragover:{[`.${ns}-list-item`]:e=>e.preventDefault()},drop:{[`.${ns}-list-item`]:e=>e.preventDefault()},keyup:{[`.${ns}-playlist-search`]:"playlist._handleSearch"},contextmenu:{[`.${ns}-list-item`]:"playlist._handleItemMenu"}},undelegatedEvents:{mouseenter:{[`.${ns}-list-item`]:"playlist.updateHoverImage"},mouseleave:{[`.${ns}-list-item`]:"playlist.removeHoverImage"}},initialize:function(){Player.playlist._lastView="playlist"===Player.config.viewStyle||"image"===Player.config.viewStyle?Player.config.viewStyle:"playlist",Player.on("view",e=>{"playlist"===e&&Player.playlist.scrollToPlaying(),"playlist"!==e&&"image"!==e||(Player.playlist._lastView=e)}),Player.on("rendered",()=>Player.playlist.hoverImage=Player.$(`.${ns}-hover-image`)),Player.on("playsound",e=>{Player.playlist.showImage(e),Player.$all(`.${ns}-list-item.playing`).forEach(e=>e.classList.remove("playing")),Player.$(`.${ns}-list-item[data-id="${Player.playing.id}"]`).classList.add("playing"),Player.playlist.scrollToPlaying("nearest"),Player.config.autoScrollThread&&e.post&&(location.href=location.href.split("#")[0]+"#"+r+e.post)}),Player.on("stop",()=>{Player.$all(`.${ns}-list-item.playing`).forEach(e=>e.classList.remove("playing")),Player.playlist.showImage({image:"data:image/svg+xml;base64,"+btoa(t.fcSounds)})}),Player.on("config:filters",Player.playlist.applyFilters),Player.on("config:hoverImages",Player.playlist.setHoverImageVisibility),Player.on("menu-open",Player.playlist.setHoverImageVisibility),Player.on("menu-close",Player.playlist.setHoverImageVisibility),Player.on("config:showPlaylistSearch",Player.playlist.toggleSearch),Player.userTemplate.maintain(Player.playlist,"rowTemplate",["shuffle"])},render:function(){Player.$(`.${ns}-list-container`).innerHTML=Player.templates.list(),Player.events.addUndelegatedListeners(document.body,Player.playlist.undelegatedEvents),Player.playlist.hoverImage=Player.$(`.${ns}-hover-image`)},restore:function(){Player.display.setViewStyle(Player.playlist._lastView||"playlist")},showImage:function(e,t){let a=!t&&(e.image.endsWith(".webm")||"video/webm"===e.type);const n=document.querySelector(`.${ns}-image-link`),l=n.querySelector(`.${ns}-image`),s=n.querySelector(`.${ns}-video`);l.src="",l.src=a||t?e.thumb:e.image,s.src=a?e.image:void 0,"fullscreen"!==Player.config.viewStyle&&(n.href=e.image),n.classList[a?"add":"remove"](ns+"-show-video")},toggleView:function(e){e&&e.preventDefault();let t="playlist"===Player.config.viewStyle?"image":"image"===Player.config.viewStyle?"playlist":Player.playlist._lastView;Player.display.setViewStyle(t)},add:function(e,t){try{const a=e.id;if(Player.sounds.find(e=>e.id===a))return;let l=Player.config.shuffle?Math.floor(Math.random()*Player.sounds.length-1):Player.sounds.findIndex(e=>Player.compareIds(e.id,a)>1);if(l<0&&(l=Player.sounds.length),Player.sounds.splice(l,0,e),Player.container){if(!t){const t=Player.$(`.${ns}-list-container`);let a=n.element(`<div>${Player.templates.list({sounds:[e]})}</div>`);if(Player.events.addUndelegatedListeners(a,Player.playlist.undelegatedEvents),l<Player.sounds.length-1){const e=Player.$(`.${ns}-list-item[data-id="${Player.sounds[l+1].id}"]`);t.insertBefore(a.children[0],e)}else t.appendChild(a.children[0])}1===Player.sounds.length&&Player.playlist.showImage(e),Player.config.autoshow&&/\/thread\//.test(location.href)&&1===Player.sounds.filter(e=>!e.standaloneVideo).length&&Player.show(),Player.trigger("add",e)}}catch(t){Player.logError("There was an error adding to the sound player. Please check the console for details.",t),console.log("[4chan sounds player]",e)}},addFromFiles:function(e){[...e].forEach(e=>{if(!e.type.startsWith("image")&&"video/webm"!==e.type)return;const t=URL.createObjectURL(e),a=e.type;let n=t;if("video/webm"!==e.type)return i();const l=document.createElement("canvas"),r=document.createElement("video"),o=l.getContext("2d");function i(){s(e.name,t,null,n,null,!0).forEach(e=>Player.add({...e,local:!0,type:a}))}r.addEventListener("loadeddata",(function(){o.drawImage(r,0,0),n=l.toDataURL(),i()})),r.src=t})},remove:function(e){const t=Player.sounds.indexOf(e);Player.playing===e&&Player.next({force:!0,paused:Player.audio.paused}),t>-1&&Player.sounds.splice(t,1),Player.$(`.${ns}-list-container`).removeChild(Player.$(`.${ns}-list-item[data-id="${e.id}"]`)),Player.trigger("remove",e)},handleSelect:function(e){if("A"===e.target.nodeName||e.target.closest("a"))return;e.preventDefault();const t=e.eventTarget.getAttribute("data-id"),a=t&&Player.sounds.find(e=>e.id===t);a&&Player.play(a)},refresh:function(){l(document.body)},_handleItemMenu:function(e){e.preventDefault(),e.stopPropagation();const t=e.eventTarget.getAttribute("data-id"),a=Player.sounds.find(e=>e.id===t),l=e.eventTarget.closest(`.${ns}-list-container`)||Player.container,s=n.element(Player.templates.itemMenu({sound:a,postIdPrefix:r}),l),o=e.eventTarget.classList.contains(ns+"-item-menu-button")?e.eventTarget:e;Player.userTemplate._showMenu(o,s,l)},toggleHoverImages:function(e){e&&e.preventDefault(),Player.set("hoverImages",!Player.config.hoverImages)},setHoverImageVisibility:function(){const e=Player.$(`.${ns}-player`),t=!Player.config.hoverImages||Player.playlist._dragging||e.querySelector(`.${ns}-menu`);e.classList[t?"add":"remove"](ns+"-hide-hover-image")},updateHoverImage:function(e){const t=e.currentTarget.getAttribute("data-id"),a=Player.sounds.find(e=>e.id===t);Player.playlist.hoverImage.style.display="block",Player.playlist.hoverImage.setAttribute("src",a.thumb),Player.playlist.positionHoverImage(e)},positionHoverImage:function(e){const{width:t,height:a}=Player.playlist.hoverImage.getBoundingClientRect(),n=document.documentElement.clientWidth-t-5;Player.playlist.hoverImage.style.left=Math.min(e.clientX,n)+5+"px",Player.playlist.hoverImage.style.top=e.clientY-a-10+"px"},removeHoverImage:function(){Player.playlist.hoverImage.style.display="none"},handleDragStart:function(e){Player.playlist._dragging=e.eventTarget,Player.playlist.setHoverImageVisibility(),e.eventTarget.classList.add(ns+"-dragging"),e.dataTransfer.setDragImage(new Image,0,0),e.dataTransfer.dropEffect="move",e.dataTransfer.setData("text/plain",e.eventTarget.getAttribute("data-id"))},handleDragEnter:function(e){if(!Player.playlist._dragging)return;e.preventDefault();const t=Player.playlist._dragging,a=t.getAttribute("data-id");let n=e.target.closest&&e.target.closest(`.${ns}-list-item`);if(!n||t===n)return;const l=Player.sounds.findIndex(e=>e.id===a),s=t.parentNode;if(4&t.compareDocumentPosition(n)&&(n=n.nextSibling),n){const e=n.getAttribute("data-id"),a=Player.sounds.findIndex(t=>t.id===e),r=l<a?a-1:a;s.insertBefore(t,n),Player.sounds.splice(r,0,Player.sounds.splice(l,1)[0])}else Player.sounds.push(Player.sounds.splice(l,1)[0]),s.appendChild(t);Player.trigger("order")},handleDragEnd:function(e){Player.playlist._dragging&&(e.preventDefault(),delete Player.playlist._dragging,e.eventTarget.classList.remove(ns+"-dragging"),Player.playlist.setHoverImageVisibility())},scrollToPlaying:function(e="center"){if(Player.$(`.${ns}-list-container .${ns}-menu`))return;const t=Player.$(`.${ns}-list-item.playing`);t&&t.scrollIntoView({block:e})},applyFilters:function(){Player.sounds.filter(e=>!Player.acceptedSound(e)).forEach(Player.playlist.remove)},_handleSearch:function(e){Player.playlist.search(e.eventTarget.value.toLowerCase())},search:function(e){const t=Player.playlist._lastSearch;if(Player.playlist._lastSearch=e,e!==t)return e?void Player.sounds.forEach(e=>{const t=Player.$(`.${ns}-list-item[data-id="${e.id}"]`);t&&(t.style.display=Player.playlist.matchesSearch(e)?null:"none")}):Player.$all(`.${ns}-list-item`).forEach(e=>e.style.display=null)},matchesSearch:function(e){const t=Player.playlist._lastSearch;return!t||e.title.toLowerCase().includes(t)||String(e.post.toLowerCase()).includes(t)||String(e.src.toLowerCase()).includes(t)},toggleSearch:function(e){const t=Player.$(`.${ns}-playlist-search`);!e&&Player.playlist._lastSearch&&Player.playlist.search(),t.style.display=e?null:"none",e&&t.focus()}}}).call(this,a(1),a(0))},function(e,t,a){const n=a(2);e.exports={delegatedEvents:{mousedown:{[`.${ns}-header`]:"position.initMove",[`.${ns}-expander`]:"position.initResize"}},initialize:function(){Player.on("show",(async function(){const[e,t]=(await GM.getValue("position")||"").split(":"),[a,n]=(await GM.getValue("size")||"").split(":");+e&&+t&&Player.position.move(e,t,!0),+a&&+n&&Player.position.resize(a,n),Player.config.limitPostWidths&&(Player.position.setPostWidths(),window.addEventListener("scroll",Player.position.setPostWidths))})),Player.on("hide",(function(){Player.position.setPostWidths(),window.removeEventListener("scroll",Player.position.setPostWidths)})),Player.on("config",e=>{"limitPostWidths"!==e&&"minPostWidth"!==e||(window.removeEventListener("scroll",Player.position.setPostWidths),Player.position.setPostWidths(),Player.config.limitPostWidths&&window.addEventListener("scroll",Player.position.setPostWidths))}),new MutationObserver((function(){document.querySelectorAll("#hoverUI .postContainer, .inline .postContainer, .backlink_container article").forEach(e=>{e.style.maxWidth=null,e.style.minWidth=null})})).observe(document.body,{childList:!0,subtree:!0}),Player.syncTab("position",e=>Player.position.move(...e.split(":").concat(!0))),Player.syncTab("size",e=>Player.position.resize(...e.split(":")))},setPostWidths:function(){const e=document.documentElement.clientWidth-Player.container.offsetLeft+10,t=!Player.isHidden&&Player.config.limitPostWidths,a=Player.container.offsetTop,l=Player.container.getBoundingClientRect().height+a;document.querySelectorAll(n.limitWidthOf).forEach(n=>{const s=t&&n.getBoundingClientRect(),r=t&&s.top+s.height>a&&s.top<l;n.style.maxWidth=r?`calc(100% - ${e}px)`:null,n.style.minWidth=r&&Player.config.minPostWidth?""+Player.config.minPostWidth:null})},initResize:function(e){e.preventDefault(),Player._startX=e.clientX,Player._startY=e.clientY;let{width:t,height:a}=Player.container.getBoundingClientRect();Player._startWidth=t,Player._startHeight=a,Player._startTop=Player.container.offsetTop,Player._startLeft=Player.container.offsetLeft;const n=e.eventTarget.dataset.direction||"se";Player._resizeX=n.includes("e")?1:n.includes("w")?-1:0,Player._resizeY=n.includes("s")?1:n.includes("n")?-1:0,Player._resizeMoveX=n.includes("w")?-1:0,Player._resizeMoveY=n.includes("n")?-1:0,Player._resizeTarget=e.eventTarget,document.documentElement.addEventListener("mousemove",Player.position.doResize,!1),document.documentElement.addEventListener("mouseup",Player.position.stopResize,!1)},doResize:function(e){e.preventDefault();const t=(e.clientX-Player._startX)*Player._resizeX,a=(e.clientY-Player._startY)*Player._resizeY,n="true"!==Player._resizeTarget.dataset.bypassPosition&&(Player._resizeMoveX||Player._resizeMoveY);Player.position.resize(Player._startWidth+t,Player._startHeight+a,n||Player._resizeTarget.dataset.allowOffscreen),n&&Player.position.move(Player._startLeft+t*Player._resizeMoveX,Player._startTop+a*Player._resizeMoveY)},stopResize:function(){const{width:e,height:t}=Player.container.getBoundingClientRect();document.documentElement.removeEventListener("mousemove",Player.position.doResize,!1),document.documentElement.removeEventListener("mouseup",Player.position.stopResize,!1),"true"!==Player._resizeTarget.dataset.bypassSave&&(GM.setValue("size",e+":"+t),(Player._resizeMoveX||Player._resizeMoveY)&&GM.setValue("position",parseInt(Player.container.style.left,10)+":"+parseInt(Player.container.style.top,10)))},resize:function(e,t,a){if(!Player.container||"fullscreen"===Player.config.viewStyle)return;const{bottom:n}=Player.position.getHeaderOffset();a||(t=Math.min(t,document.documentElement.clientHeight-Player.container.offsetTop-n),e=Math.min(e,document.documentElement.clientWidth-Player.container.offsetLeft)),Player.container.style.width=e+"px",Player.container.style.height=t+"px",Player.controls.preventWrapping()},initMove:function(e){if(e.preventDefault(),"A"===e.target.nodeName||e.target.classList.contains(ns+"-expander"))return;Player.$(`.${ns}-header`).style.cursor="grabbing";const{width:t,height:a}=Player.container.getBoundingClientRect();Player.position.resize(t,a),Player._offsetX=e.clientX-Player.container.offsetLeft,Player._offsetY=e.clientY-Player.container.offsetTop,document.documentElement.addEventListener("mousemove",Player.position.doMove,!1),document.documentElement.addEventListener("mouseup",Player.position.stopMove,!1)},doMove:function(e){e.preventDefault(),Player.position.move(e.clientX-Player._offsetX,e.clientY-Player._offsetY)},stopMove:function(){document.documentElement.removeEventListener("mousemove",Player.position.doMove,!1),document.documentElement.removeEventListener("mouseup",Player.position.stopMove,!1),Player.$(`.${ns}-header`).style.cursor=null,GM.setValue("position",parseInt(Player.container.style.left,10)+":"+parseInt(Player.container.style.top,10))},move:function(e,t,a){if(!Player.container)return;const{top:n,bottom:l}=Player.position.getHeaderOffset(),{width:s,height:r}=Player.container.getBoundingClientRect(),o=a?1/0:document.documentElement.clientWidth-s,i=a?1/0:document.documentElement.clientHeight-r-l;Player.container.style.left=Math.max(0,Math.min(e,o))+"px",Player.container.style.top=Math.max(n,Math.min(t,i))+"px",Player.config.limitPostWidths&&Player.position.setPostWidths()},getHeaderOffset:function(){const e=document.documentElement.classList,t=e.contains("fixed"),a=t?document.querySelector("#header-bar").getBoundingClientRect().height:0;return{top:t&&e.contains("top-header")?a:0,bottom:t&&e.contains("bottom-header")?a:0}},showRelativeTo:function(e,t){const a=t instanceof Node?t.getBoundingClientRect():{top:t.clientY,left:t.clientX,width:0,height:0};e.style.top=a.top+a.height+"px",e.style.left=a.left+"px";const{width:n,height:l}=e.getBoundingClientRect();a.left+n>document.documentElement.clientWidth&&(e.style.left=a.left+a.width-n+"px"),a.top+a.height+l>document.documentElement.clientHeight-Player.position.getHeaderOffset().bottom&&(e.style.top=a.top-l+"px")}}},function(e,t,a){(function(t){const{parseFileName:n}=a(4),{get:l}=a(62);e.exports={boardList:null,soundThreads:null,displayThreads:{},selectedBoards:Board?[Board]:["a"],showAllBoards:!1,delegatedEvents:{click:{[`.${ns}-fetch-threads-link`]:"threads.fetch",[`.${ns}-all-boards-link`]:"threads.toggleBoardList",[`.${ns}-threads-view-style`]:"threads.toggleView"},keyup:{[`.${ns}-threads-filter`]:e=>Player.threads.filter(e.eventTarget.value)},change:{[`.${ns}-threads input[type=checkbox]`]:"threads.toggleBoard"}},initialize:async function(){Player.threads.hasParser=is4chan&&"undefined"!=typeof Parser,Player.threads.hasParser&&!Parser.customSpoiler&&(Parser.customSpoiler={}),Player.on("show",Player.threads._initialFetch),Player.on("view",Player.threads._initialFetch),Player.on("rendered",Player.threads.afterRender),Player.on("config:threadsViewStyle",Player.threads.render);try{const e=await GM.getValue("threads_board_selection");e&&(Player.threads.selectedBoards=e.split(","))}catch(e){}},_initialFetch:function(){Player.container&&"threads"===Player.config.viewStyle&&null===Player.threads.boardList&&Player.threads.fetchBoards(!0)},render:function(){Player.container&&(Player.$(`.${ns}-threads`).innerHTML=Player.templates.threads(),Player.threads.afterRender())},afterRender:function(){const e=Player.$(`.${ns}-thread-list`);if(e){const t=document.defaultView.getComputedStyle(document.body);e.style.background=t.backgroundColor,e.style.backgroundImage=t.backgroundImage,e.style.backgroundRepeat=t.backgroundRepeat,e.style.backgroundPosition=t.backgroundPosition}Player.threads.renderThreads()},toggleView:function(e){e.preventDefault(),Player.set("threadsViewStyle",e.eventTarget.getAttribute("data-style"))},renderThreads:function(){if(Player.threads.hasParser&&"table"!==Player.config.threadsViewStyle)try{const e=Player.$(`.${ns}-thread-list`);e.innerHTML="";for(let a in Player.threads.displayThreads){const n=Player.threads.boardList.find(e=>e.board===a),l=`/${n.board}/ - ${n.title}`;t.element(`<div class="boardBanner"><div class="boardTitle">${l}</div></div>`,e);const s=Player.threads.displayThreads[a];for(let a=0;a<s.length;a++)e.appendChild(Parser.buildHTMLFromJSON.call(Parser,s[a],s[a].board,!0,!0)),t.element('<hr style="clear: both">',e)}}catch(e){Player.logError("Unable to display the threads board view.",e,"warning"),Player.set("threadsViewStyle","table"),Player.renderThreads()}else Player.$(`.${ns}-threads-body`).innerHTML=Player.templates.threadList()},renderBoards:function(){Player.$(`.${ns}-thread-board-list`).innerHTML=Player.templates.threadBoards()},toggle:function(e){e&&e.preventDefault(),"threads"===Player.config.viewStyle?Player.playlist.restore():Player.display.setViewStyle("threads")},toggleBoardList:function(e){e.preventDefault(),Player.threads.showAllBoards=!Player.threads.showAllBoards,Player.$(`.${ns}-all-boards-link`).innerHTML=Player.threads.showAllBoards?"Selected Only":"Show All",Player.threads.renderBoards()},toggleBoard:async function(e){const t=e.eventTarget.value;e.eventTarget.checked?!Player.threads.selectedBoards.includes(t)&&Player.threads.selectedBoards.unshift(t):Player.threads.selectedBoards=Player.threads.selectedBoards.filter(e=>e!==t),await GM.setValue("threads_board_selection",Player.threads.selectedBoards.slice(0,10).join(","))},fetchBoards:async function(e){Player.threads.loading=!0,Player.threads.render(),Player.threads.boardList=(await l("https://a.4cdn.org/boards.json")).boards,e?Player.threads.fetch():(Player.threads.loading=!1,Player.threads.render())},fetch:async function(e){if(e&&e.preventDefault(),Player.threads.loading=!0,Player.threads.render(),!Player.threads.boardList)try{await Player.threads.fetchBoards()}catch(e){return Player.logError("Failed fetching the boards list.",e)}const t=[];try{await Promise.all(Player.threads.selectedBoards.map(async e=>{const a=Player.threads.boardList.find(t=>t.board===e);if(!a)return;(a&&await l("https://a.4cdn.org/%s/catalog.json".replace("%s",e))||[]).forEach(({page:n,threads:l})=>{t.push(...l.map(t=>Object.assign(t,{board:e,page:n,ws_board:a.ws_board})))})})),Player.threads.soundThreads=t.filter(e=>n(e.filename,`https://i.4cdn.org/${e.board}/${e.tim}${e.ext}`,e.no,`https://i.4cdn.org/${e.board}/${e.tim}s${e.ext}`,e.md5,!0).length)}catch(e){Player.logError("Failed searching for sounds threads.",e)}Player.threads.loading=!1,Player.threads.filter(Player.$(`.${ns}-threads-filter`).value,!0),Player.threads.render()},filter:function(e,t){e=e.toLowerCase(),Player.threads.filterValue=e||"",null!==Player.threads.soundThreads&&(Player.threads.displayThreads=Player.threads.soundThreads.reduce((t,a)=>((!e||a.sub&&a.sub.toLowerCase().includes(e)||a.com&&a.com.toLowerCase().includes(e))&&(t[a.board]||(t[a.board]=[]),t[a.board].push(a)),t),{}),!t&&Player.threads.renderThreads())}}}).call(this,a(0))},function(e,t){const a={};e.exports={get:async function(e){return new Promise((function(t,n){const l={};a[e]&&(l["If-Modified-Since"]=a[e].lastModified),GM.xmlHttpRequest({method:"GET",url:e,headers:l,responseType:"json",onload:n=>{n.status>=200&&n.status<300&&(a[e]={lastModified:n.responseHeaders["last-modified"],response:n.response}),t(304===n.status?a[e].response:n.response)},onerror:n})}))}}},function(e,t,a){(function(t,a){e.exports={hasFFmpeg:"function"==typeof ffmpeg,_uploadIdx:0,createStatusText:"",delegatedEvents:{click:{[`.${ns}-create-button`]:"tools._handleCreate",[`.${ns}-create-sound-post-link`]:"tools._addCreatedToQR",[`.${ns}-create-sound-add-link`]:"tools._addCreatedToPlayer",[`.${ns}-toggle-sound-input`]:"tools._handleToggleSoundInput",[`.${ns}-host-setting-link`]:t.noDefault(()=>Player.settings.toggle("Hosts")),[`.${ns}-remove-file`]:"tools._handleFileRemove"},change:{[`.${ns}-create-sound-img`]:"tools._handleImageSelect",[`.${ns}-create-sound-form input[type=file]`]:e=>Player.tools._handleFileSelect(e.eventTarget),[`.${ns}-use-video`]:"tools._handleWebmSoundChange"},drop:{[`.${ns}-create-sound-form`]:"tools._handleCreateSoundDrop"},keyup:{[`.${ns}-encoded-input`]:"tools._handleEncoded",[`.${ns}-decoded-input`]:"tools._handleDecoded"}},initialize:function(){Player.on("config:uploadHosts",Player.tools.render),Player.on("config:defaultUploadHost",e=>Player.$(`.${ns}-create-sound-host`).value=e),Player.on("rendered",Player.tools.afterRender)},render:function(){Player.$(`.${ns}-tools`).innerHTML=Player.templates.tools(),Player.tools.afterRender()},afterRender:function(){Player.tools.status=Player.$(`.${ns}-create-sound-status`),Player.tools.imgInput=Player.$(`.${ns}-create-sound-img`),Player.tools.sndInput=Player.$(`.${ns}-create-sound-snd`)},toggle:function(e){e&&e.preventDefault(),"tools"===Player.config.viewStyle?Player.playlist.restore():Player.display.setViewStyle("tools")},updateCreateStatus:function(e){Player.tools.status.style.display=e?"inherit":"none",Player.tools.status.innerHTML=Player.tools.createStatusText=e},_handleDecoded:function(e){Player.$(`.${ns}-encoded-input`).value=encodeURIComponent(e.eventTarget.value)},_handleEncoded:function(e){Player.$(`.${ns}-decoded-input`).value=decodeURIComponent(e.eventTarget.value)},_handleImageSelect:async function(e){const t=(e&&e.eventTarget||Player.tools.imgInput).files[0],a="video/webm"===t.type;let n=t.name.replace(/\.[^/.]+$/,"");if(Player.tools.hasFFmpeg){Player.$(`.${ns}-use-video-label`).style.display=a?"inherit":"none";const e=Player.$(`.${ns}-use-video`);e.checked&&a&&Player.tools._handleFileSelect(Player.tools.sndInput,[t]),e.checked&&!a&&e.click()}else await Player.tools.hasAudio(t)&&Player.logError("Audio not allowed for the image webm.",null,"warning");Player.$(`.${ns}-create-sound-name`).setAttribute("placeholder",n)},_handleFileSelect:function(e,t){const n=e.closest(`.${ns}-file-input`),l=n.querySelector(".text"),s=n.querySelector(`.${ns}-file-list`);t||(t=[...e.files]),n.classList[t.length?"remove":"add"]("placeholder"),l.innerHTML=t.length>1?t.length+" files":t[0]&&t[0].name||"",s&&(s.innerHTML=t.length<2?"":t.map((e,t)=>`<div class="${ns}-row">\n\t\t\t\t<div class="${ns}-col ${ns}-truncate-text">${e.name}</div>\n\t\t\t\t<a class="${ns}-col-auto ${ns}-remove-file" href="#" data-idx="${t}">${a.close}</a>\n\t\t\t</div>`).join(""))},_handleFileRemove:function(e){e.preventDefault();const t=+e.eventTarget.getAttribute("data-idx"),a=e.eventTarget.closest(`.${ns}-file-input`).querySelector('input[type="file"]'),n=new DataTransfer;for(let e=0;e<a.files.length;e++)e!==t&&n.items.add(a.files[e]);a.files=n.files,Player.tools._handleFileSelect(a)},_handleWebmSoundChange:function(e){const t=Player.tools.sndInput,a=Player.tools.imgInput;Player.tools._handleFileSelect(t,e.eventTarget.checked&&[a.files[0]])},_handleToggleSoundInput:function(e){e.preventDefault();const t="url"===e.eventTarget.getAttribute("data-type");Player.$(`.${ns}-create-sound-snd-url`).closest(`.${ns}-row`).style.display=t?null:"none",Player.$(`.${ns}-create-sound-snd`).closest(`.${ns}-file-input`).style.display=t?"none":null,Player.tools.useSoundURL=t},_handleCreateSoundDrop:function(e){e.preventDefault(),e.stopPropagation();const t="INPUT"===e.target.nodeName&&"file"===e.target.getAttribute("type")&&e.target;return[...e.dataTransfer.files].forEach(e=>{const a=e.type.startsWith("video"),n=e.type.startsWith("image")||"video/webm"===e.type,l=e.type.startsWith("audio");if(a||n||l){const a="video/webm"===e.type&&t?t:n?Player.tools.imgInput:Player.tools.sndInput,l=new DataTransfer;a.multiple&&[...a.files].forEach(e=>l.items.add(e)),l.items.add(e),a.files=l.files,Player.tools._handleFileSelect(a),a===Player.tools.imgInput&&Player.tools._handleImageSelect()}}),!1},_handleCreate:async function(e){e&&e.preventDefault(),Player.tools._createdImageURL&&URL.revokeObjectURL(Player.tools._createdImageURL),Player.tools._createdImage=null,Player.tools.updateCreateStatus("Creating sound image"),Player.$(`.${ns}-create-button`).disabled=!0;const t=Player.config.uploadHosts[Player.$(`.${ns}-create-sound-host`).value],a=Player.tools.useSoundURL;let n=Player.tools.imgInput.files[0],l=a&&Player.$(`.${ns}-create-sound-snd-url`).value.split(",").map(e=>e.trim()).filter(e=>e),s=(Player.$(`.${ns}-use-video`)||{}).checked&&n&&n.type.startsWith("video")?n&&[n]:[...Player.tools.sndInput.files];const r=Player.$(`.${ns}-create-sound-name`).value,o=r?((l||s).length>1?r.split(","):[r]).map(e=>e.trim()):n&&[n.name.replace(/\.[^/.]+$/,"")];try{if(!n)throw new PlayerError("Select an image or webm.","warning");if(n.type.startsWith("video")&&await Player.tools.hasAudio(n)){if(!Player.tools.hasFFmpeg)throw Player.tools.updateCreateStatus(Player.tools.createStatusText+"<br>Audio not allowed for the image webm.<br>Remove the audio from the webm and try again."),new PlayerError("Audio not allowed for the image webm.","warning");n=await Player.tools.extract(n,"video")}const e=o.join("").length+8*(l||s).length;if(a){try{l=l.map(e=>new URL(e)&&e.replace(/^(https?:)?\/\//,""))}catch(e){throw new PlayerError("The provided sound URL is invalid.","warning")}if(218<e+l.join("").length)throw new PlayerError("The generated image filename is too long.","warning")}else{if(!s||!s.length)throw new PlayerError("Select a sound.","warning");if(t.filenameLength?218<e+t.filenameLength*s.length:s.length>8)throw new PlayerError("The generated image filename is too long.","warning");s=await Promise.all(s.map(async e=>{if(e.type.startsWith("video")){if(!await Player.tools.hasAudio(e))throw new PlayerError(`The selected video has no audio. (${e.name})`,"warning");if(Player.tools.hasFFmpeg)return await Player.tools.extract(e,"audio")}return e}));try{l=await Promise.all(s.map(async e=>Player.tools.postFile(e,t)))}catch(e){throw new PlayerError("Upload failed.","error",e)}}if(!l.length)throw new PlayerError("No sounds selected.","warning");let r="";for(let e=0;e<l.length;e++)r+=(o[e]||"")+"[sound="+encodeURIComponent(l[e].replace(/^(https?:)?\/\//,""))+"]";const i=n.name.match(/\.([^/.]+)$/)[1],d=new File([n],r+"."+i,{type:n.type});Player.tools._createdImage=d,Player.tools._createdImageURL=URL.createObjectURL(d),Player.tools.updateCreateStatus(Player.tools.createStatusText+"<br>Complete!<br>"+(is4chan?`<a href="#" class="${ns}-create-sound-post-link">Post</a> - `:"")+` <a href="#" class="${ns}-create-sound-add-link">Add</a> - `+` <a href="${Player.tools._createdImageURL}" download="${d.name}" title="${d.name}">Download</a>`)}catch(e){Player.tools.updateCreateStatus(Player.tools.createStatusText+"<br>Failed! "+(e instanceof PlayerError?e.reason:"")),Player.logError("Failed to create sound image",e)}Player.$(`.${ns}-create-button`).disabled=!1},hasAudio:function(e){return!(!e.type.startsWith("audio")&&!e.type.startsWith("video"))&&new Promise((t,a)=>{const n=URL.createObjectURL(e),l=document.createElement("video");l.addEventListener("loadeddata",()=>{URL.revokeObjectURL(n),t(l.mozHasAudio||!!l.webkitAudioDecodedByteCount)}),l.addEventListener("error",a),l.src=n})},extract:async function(e,t){if(Player.tools.updateCreateStatus(Player.tools.createStatusText+"<br>Extracting "+t),"function"!=typeof ffmpeg)return e;const a=e.name.replace(/\.[^/.]+$/,"")+("audio"===t?".ogg":".webm"),n=ffmpeg({MEMFS:[{name:"_"+e.name,data:await new Response(e).arrayBuffer()}],arguments:"audio"===t?["-i","_"+e.name,"-vn","-c","copy",a]:["-i","_"+e.name,"-an","-c","copy",a]});return new File([n.MEMFS[0].data],a,{type:"audio"===t?"audio/ogg":"video/webm"})},postFile:async function(e,a){const n=Player.tools._uploadIdx++;if(!a||a.invalid)throw new PlayerError("Invalid upload host.","error");const l=new FormData;return Object.keys(a.data).forEach(t=>{null!==a.data[t]&&l.append(t,"$file"===a.data[t]?e:a.data[t])}),Player.tools.updateCreateStatus(Player.tools.createStatusText+`<br><span class="${ns}-upload-status-${n}">Uploading ${e.name}</span>`),new Promise((s,r)=>{GM.xmlHttpRequest({method:"POST",url:a.url,data:l,responseType:a.responsePath?"json":"text",headers:a.headers,onload:async l=>{if(l.status<200||l.status>=300)return r(l);const o=a.responsePath?t.get(l.response,a.responsePath):a.responseMatch?(l.responseText.match(new RegExp(a.responseMatch))||[])[1]:l.responseText,i=a.soundUrl?a.soundUrl.replace("%s",o):o;Player.$(`.${ns}-upload-status-${n}`).innerHTML=`Uploaded ${e.name} to <a href="${i}" target="_blank">${i}</a>`,Player.tools.createStatusText=Player.tools.status.innerHTML,s(i)},upload:{onprogress:t=>{const a=t.total>0?t.total:e.size;Player.$(`.${ns}-upload-status-${n}`).innerHTML=`Uploading ${e.name} - ${Math.floor(t.loaded/a*100)}%`}},onerror:r})})},_addCreatedToPlayer:function(e){e.preventDefault(),Player.playlist.addFromFiles([Player.tools._createdImage])},_addCreatedToQR:function(e){if(!is4chan)return;e.preventDefault();const t=document.querySelector(isChanX?".qr-link":".open-qr-link"),a=new DataTransfer;if(a.items.add(Player.tools._createdImage),isChanX){t.click();const e=new CustomEvent("drop",{view:window,bubbles:!0,cancelable:!0});e.dataTransfer=a,document.querySelector("#qr").dispatchEvent(e)}else t?(t.click(),document.querySelector("#qrFile").files=a.files):(document.querySelector("#togglePostFormLink a").click(),document.querySelector("#postFile").files=a.files,document.querySelector(".postForm").scrollIntoView())}}}).call(this,a(0),a(1))},function(e,t,a){(function(t){const n=a(65),l=/p: ?{([^}]*)}/g,s=/h: ?{([^}]*)}/g,r=new RegExp(`(${n.map(e=>e.tplName).join("|")})-(?:button|link)(?:\\:"([^"]+?)")?`,"g"),o=/sound-name/g,i=/sound-name-marquee/g,d=/sound-index/g,c=/sound-count/g,u=/sound-(src|id|title|post|imageOrThumb|image|thumb|filename|imageMD5)/g,p=/\$config\[([^\]]+)\]/g,y=[];e.exports={buttons:n,delegatedEvents:{click:{[`.${ns}-playing-jump-link`]:()=>Player.playlist.scrollToPlaying("center"),[`.${ns}-viewStyle-button`]:"playlist.toggleView",[`.${ns}-hoverImages-button`]:"playlist.toggleHoverImages",[`.${ns}-remove-link`]:"userTemplate._handleRemove",[`.${ns}-filter-link`]:"userTemplate._handleFilter",[`.${ns}-download-link`]:"userTemplate._handleDownload",[`.${ns}-shuffle-button`]:"userTemplate._handleShuffle",[`.${ns}-repeat-button`]:"userTemplate._handleRepeat",[`.${ns}-reload-button`]:t.noDefault("playlist.refresh"),[`.${ns}-add-button`]:t.noDefault(()=>Player.$(`.${ns}-add-local-file-input`).click()),[`.${ns}-item-menu-button`]:"playlist._handleItemMenu",[`.${ns}-view-menu-button`]:"userTemplate._handleViewsMenu",[`.${ns}-threads-button`]:"threads.toggle",[`.${ns}-tools-button`]:"tools.toggle",[`.${ns}-config-button`]:t.noDefault(()=>Player.settings.toggle()),[`.${ns}-favorites-button`]:"favorites.toggle",[`.${ns}-player-button`]:"playlist.restore"},change:{[`.${ns}-add-local-file-input`]:"userTemplate._handleFileSelect"}},initialize:function(){Player.on("config",Player.userTemplate._handleConfig),Player.on("playsound",()=>Player.userTemplate._handleEvent("playsound")),["add","remove","order","show","hide","stop"].forEach(e=>{Player.on(e,Player.userTemplate._handleEvent.bind(null,e))})},build:function(e){const a=e.outerClass||"",y=e.sound&&e.sound.title||e.defaultName,h=t=>"function"==typeof t?t(e):t;let g=e.template.replace(p,(...e)=>t.get(Player.config,e[1]));if(!e.configOnly&&(g=g.replace(l,Player.playing&&Player.playing===e.sound?"$1":"").replace(s,`<span class="${ns}-hover-display ${a}">$1</span>`).replace(r,(function(l,s,r){let o=n.find(e=>e.tplName===s);if(o.requireSound&&!e.sound||o.showIf&&!o.showIf(e))return"";if(o.values){let e=o;const a=o.values[t.get(Player.config,o.property)]||o.values[Object.keys(o.values)[0]];o={...e,...a,class:((e.class||"")+" "+(a.class||"")).trim()}}const i=[...h(o.attrs)||[]];return i.some(e=>e.startsWith("href"))||i.push('href="javascript:;"'),(o.class||a)&&i.push(`class="${o.class||""} ${a||""}"`),`<a ${i.join(" ")}>${r||h(o.icon)||h(o.text)}</a>`})).replace(i,y?`<div class="${ns}-col ${ns}-truncate-text" style="margin: 0 .5rem; text-overflow: clip;"><span title="${y}" class="${ns}-title-marquee" data-location="${e.location||""}">${y}</span></div>`:"").replace(o,y?`<div class="${ns}-col ${ns}-truncate-text" style="margin: 0 .5rem"><span title="${y}">${y}</span></div>`:"").replace(u,(...t)=>e.sound?e.sound[t[1]]:"").replace(d,e.sound?Player.sounds.indexOf(e.sound)+1:0).replace(c,Player.sounds.length).replace(/%v/g,"3.3.0-6c82932")),e.replacements)for(let t of Object.keys(e.replacements))g=g.replace(new RegExp(t,"g"),e.replacements[t]);return g},maintain:function(e,t,a=[],n=[]){y.push({component:e,property:t,...Player.userTemplate.findDependencies(t,null),alwaysRenderConfigs:a,alwaysRenderEvents:n})},findDependencies:function(e,a){a||(a=t.get(Player.config,e));const s=[],i=c.test(a),u=o.test(a),y=d.test(a),h=l.test(a);i&&s.push("add","remove"),(h||"rowTemplate"!==e&&(u||y))&&s.push("playsound","stop"),y&&s.push("order");const g=[];let f;for(;null!==(f=r.exec(a));)if(!f[2]){let e=f[1],t=n.find(t=>t.tplName===e);t.property&&g.push(t.property)}for(;null!==(f=p.exec(a));)g.push(f[1]);return{events:s,config:g}},_handleConfig:function(e,t){y.forEach(a=>{a.property===e&&(Object.assign(a,Player.userTemplate.findDependencies(e,t)),a.component.render())}),y.forEach(t=>{(t.alwaysRenderConfigs.includes(e)||t.config.includes(e))&&t.component.render()})},_handleEvent:function(e){y.forEach(t=>{(t.alwaysRenderEvents.includes(e)||t.events.includes(e))&&t.component.render()})},_handleFileSelect:function(e){e.preventDefault();const t=e.eventTarget;Player.playlist.addFromFiles(t.files)},_handleRepeat:function(e){e.preventDefault();const t=["all","one","none"],a=t.indexOf(Player.config.repeat);Player.set("repeat",t[(a+4)%3])},_handleShuffle:function(e){if(e.preventDefault(),Player.set("shuffle",!Player.config.shuffle),Player.header.render(),Player.config.shuffle){const e=Player.sounds;for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}}else Player.sounds.sort((e,t)=>Player.compareIds(e.id,t.id));Player.trigger("order")},_handleViewsMenu:function(e){e.preventDefault(),e.stopPropagation();const a=t.element(Player.templates.viewsMenu());Player.userTemplate._showMenu(e.eventTarget,a)},_showMenu:function(e,t,a){Player.display.closeDialogs(),a||(a=Player.container),a.appendChild(t),Player.position.showRelativeTo(t,e),t.querySelectorAll(".entry").forEach(e=>{e.addEventListener("mouseenter",Player.userTemplate._setFocusedMenuItem)}),Player.trigger("menu-open",t)},_setFocusedMenuItem:function(e){const t=e.currentTarget.querySelector(".submenu");e.currentTarget.closest(".dialog").querySelectorAll(".focused").forEach(e=>e.classList.remove("focused")),e.currentTarget.classList.add("focused"),t&&t.getBoundingClientRect().right>document.documentElement.clientWidth&&(t.style.inset="0px 100% auto auto")},_handleFilter:function(e){e.preventDefault();let t=e.eventTarget.getAttribute("data-filter");t&&Player.set("filters",Player.config.filters.concat(t))},_handleDownload:function(e){const a=e.eventTarget.getAttribute("data-src"),n=e.eventTarget.getAttribute("data-name")||new URL(a).pathname.split("/").pop();GM.xmlHttpRequest({method:"GET",url:a,responseType:"blob",onload:e=>{const a=t.element(`<a href="${URL.createObjectURL(e.response)}" download="${n}" rel="noopener" target="_blank"></a>`);a.click(),URL.revokeObjectURL(a.href)},onerror:e=>Player.logError("There was an error downloading.",e,"warning")})},_handleRemove:function(e){const t=e.eventTarget.getAttribute("data-id"),a=t&&Player.sounds.find(e=>e.id===""+t);a&&Player.remove(a)}}}).call(this,a(0))},function(e,t,a){(function(t){const{postIdPrefix:n}=a(2);e.exports=[{property:"repeat",tplName:"repeat",class:ns+"-repeat-button",values:{all:{attrs:['title="Repeat All"'],icon:t.arrowRepeat},one:{attrs:['title="Repeat One"'],icon:t.arrowClockwise},none:{attrs:['title="No Repeat"'],class:"muted",icon:t.arrowRepeat}}},{property:"shuffle",tplName:"shuffle",class:ns+"-shuffle-button",values:{true:{attrs:['title="Shuffled"'],icon:t.shuffle},false:{attrs:['title="Ordered"'],class:"muted",icon:t.shuffle}}},{property:"viewStyle",tplName:"playlist",class:ns+"-viewStyle-button",values:{default:{attrs:['title="Player"'],class:"muted",icon:()=>"playlist"===Player.playlist._lastView?t.arrowsExpand:t.arrowsCollapse},playlist:{attrs:['title="Hide Playlist"'],icon:t.arrowsExpand},image:{attrs:['title="Show Playlist"'],icon:t.arrowsCollapse}}},{property:"hoverImages",tplName:"hover-images",class:ns+"-hoverImages-button",values:{true:{attrs:['title="Hover Images Enabled"'],icon:t.image},false:{attrs:['title="Hover Images Disabled"'],class:"muted",icon:t.image}}},{tplName:"add",class:ns+"-add-button",icon:t.plus,attrs:['title="Add local files"']},{tplName:"reload",class:ns+"-reload-button",icon:t.reboot,attrs:['title="Reload the playlist"']},{property:"viewStyle",tplName:"settings",class:ns+"-config-button",icon:t.gear,attrs:['title="Settings"'],values:{default:{class:"muted"},settings:{}}},{property:"viewStyle",tplName:"threads",class:ns+"-threads-button",icon:t.search,attrs:['title="Threads"'],values:{default:{class:"muted"},threads:{}}},{property:"viewStyle",tplName:"tools",class:ns+"-tools-button",icon:t.tools,attrs:['title="Tools"'],values:{default:{class:"muted"},tools:{}}},{tplName:"close",class:ns+"-close-button",icon:t.close,attrs:['title="Hide the player"']},{tplName:"playing",requireSound:!0,class:ns+"-playing-jump-link",icon:t.musicNoteList,attrs:['title="Scroll the playlist currently playing sound."']},{tplName:"post",requireSound:!0,icon:t.chatRightQuote,showIf:e=>e.sound.post,attrs:e=>["href="+("#"+n+e.sound.post),'title="Jump to the post for the current sound"']},{tplName:"image",requireSound:!0,icon:t.image,attrs:e=>["href="+e.sound.image,'title="Open the image in a new tab"','target="_blank"']},{tplName:"sound",requireSound:!0,href:e=>e.sound.src,icon:t.soundwave,attrs:e=>["href="+e.sound.src,'title="Open the sound in a new tab"','target="_blank"']},{tplName:"dl-image",requireSound:!0,class:ns+"-download-link",icon:t.fileEarmarkImage,attrs:e=>['title="Download the image with the original filename"',`data-src="${e.sound.image}"`,`data-name="${e.sound.filename}"`]},{tplName:"dl-sound",requireSound:!0,class:ns+"-download-link",icon:t.fileEarmarkMusic,attrs:e=>['title="Download the sound"',`data-src="${e.sound.src}"`,`data-name="${e.sound.name}"`]},{tplName:"filter-image",requireSound:!0,class:ns+"-filter-link",icon:t.filter,showIf:e=>e.sound.imageMD5,attrs:e=>['title="Add the image MD5 to the filters."',`data-filter="${e.sound.imageMD5}"`]},{tplName:"filter-sound",requireSound:!0,class:ns+"-filter-link",icon:t.filter,attrs:e=>['title="Add the sound URL to the filters."',`data-filter="${e.sound.src.replace(/^(https?:)?\/\//,"")}"`]},{tplName:"remove",requireSound:!0,class:ns+"-remove-link",icon:t.trash,attrs:e=>['title="Filter the image."',`data-id="${e.sound.id}"`]},{tplName:"menu",requireSound:!0,class:ns+"-item-menu-button",icon:t.chevronDown,attrs:e=>["data-id="+e.sound.id]},{tplName:"view-menu",class:ns+"-view-menu-button",icon:t.chevronDown,attrs:['href="javascript:;"']}]}).call(this,a(1))},function(e,t){e.exports=(e={})=>`<div id="${ns}-container" data-view-style="${Player.config.viewStyle}" style="top: 30px; left: 0px; width: 360px; height: 360px; display: none;">\n\t<div class="${ns}-header ${ns}-row ${ns}-align-center">\n\t\t${Player.templates.header(e)}\n\t</div>\n\n\t<div class="${ns}-player ${Player.config.hoverImages?"":ns+"-hide-hover-image"}">\n\t\t${Player.templates.player(e)}\n\t</div>\n\t<div class="${ns}-settings ${ns}-panel">\n\t\t${Player.templates.settings(e)}\n\t</div>\n\t<div class="${ns}-threads ${ns}-panel">\n\t\t${Player.templates.threads(e)}\n\t</div>\n\t<div class="${ns}-tools ${ns}-panel">\n\t\t${Player.templates.tools(e)}\n\t</div>\n\n\t<div class="${ns}-footer ${ns}-row ${ns}-align-center">\n\t\t${Player.templates.footer(e)}\n\t</div>\n\t<input class="${ns}-add-local-file-input" type="file" style="display: none" accept="image/*,.webm" multiple>\n</div>`},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-colorpicker dialog" style="top: 0px; left: 0px;">\n\t<div class="${ns}-cp-saturation" style="height: ${e.HEIGHT}px; width: ${e.WIDTH}px;">\n\t\t<div class="position" style="left: ${e.WIDTH-3}px; top: -3px;"></div>\n\t</div>\n\t<div class="${ns}-cp-hue" style="height: ${e.HEIGHT}px">\n\t\t<div class="position"></div>\n\t</div>\n\t<div class="${ns}-output" style="text-align: right;">\n\t\t<a href="#" class="${ns}-close-colorpicker">${t.close}</a>\n\t\t<div class="output-color" style="background: rgb(${e.rgb[0]}, ${e.rgb[1]}, ${e.rgb[2]});"></div>\n\n\t\t<table>\n\t\t\t<tr><td>R:</td><td><input type="text" class="${ns}-rgb-input" data-color="0" value="${e.rgb[0]}"></td></tr>\n\t\t\t<tr><td>G:</td><td><input type="text" class="${ns}-rgb-input" data-color="1" value="${e.rgb[1]}"></td></tr>\n\t\t\t<tr><td>B:</td><td><input type="text" class="${ns}-rgb-input" data-color="2" value="${e.rgb[2]}"></td></tr>\n\t\t\t<tr><td>A:</td><td><input type="text" class="${ns}-rgb-input" data-color="3" value="${e.rgb[3]}"></td></tr>\n\t\t</table>\n\n\t\t<button class="${ns}-apply-colorpicker">Apply</button><br>\n\t</div>\n</div>`}).call(this,a(1))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-col-auto">\n\t<div class="${ns}-media-control ${ns}-previous-button ${ns}-hover-fill" data-hide-id="previous">\n\t\t${t.skipStart} ${t.skipStartFill}\n\t</div>\n\t<div class="${ns}-media-control ${ns}-play-button ${ns}-hover-fill ${!Player.audio||Player.audio.paused?ns+"-play":""}">\n\t\t${t.play} ${t.pause} ${t.playFill} ${t.pauseFill}\n\t</div>\n\t<div class="${ns}-media-control ${ns}-next-button ${ns}-hover-fill" data-hide-id="next">\n\t\t${t.skipEnd} ${t.skipEndFill}\n\t</div>\n</div>\n<div class="${ns}-col" data-hide-id="seek-bar">\n\t<div class="${ns}-seek-bar ${ns}-progress-bar">\n\t\t<div class="${ns}-full-bar">\n\t\t\t<div class="${ns}-loaded-bar"></div>\n\t\t\t<div class="${ns}-current-bar"></div>\n\t\t</div>\n\t</div>\n</div>\n<div class="${ns}-col-auto" data-hide-id="time">\n\t<span>\n\t\t<span class="${ns}-current-time">0:00</span>\n\t\t<span class="${ns}-text-muted" data-hide-id="duration"> / <span class="${ns}-duration">0:00</span></span>\n\t</span>\n</div>\n<div class="${ns}-col-auto" data-hide-id="mute">\n\t<div class="${ns}-media-control ${ns}-volume-button ${ns}-hover-fill up" data-hide-id="volume-button">\n\t\t${t.volumeMute} ${t.volumeMuteFill}\n\t\t${t.volumeUp} ${t.volumeUpFill}\n\t</div>\n\t<div class="${ns}-volume-bar ${ns}-progress-bar" data-hide-id="volume-bar">\n\t\t<div class="${ns}-full-bar">\n\t\t\t<div class="${ns}-current-bar" style="width: ${100*Player.audio.volume}%"></div>\n\t\t</div>\n\t</div>\n</div>\n<div class="${ns}-col-auto" data-hide-id="fullscreen">\n\t<div class="${ns}-media-control ${ns}-fullscreen-button">\n\t\t${t.fullscreen} ${t.fullscreenExit}\n\t</div>\n</div>`}).call(this,a(1))},function(e,t){e.exports=(e={})=>`.${ns}-colorpicker{position:fixed;padding:.25rem;white-space:nowrap;z-index:999}.${ns}-colorpicker .${ns}-cp-saturation{display:inline-block;position:relative}.${ns}-colorpicker .${ns}-cp-saturation .position{width:5px}.${ns}-colorpicker .${ns}-cp-saturation::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;border-radius:inherit;background:#000;-webkit-mask-image:linear-gradient(#0000, #000);mask-image:linear-gradient(#0000, #000)}.${ns}-colorpicker .${ns}-cp-hue{margin-left:.5rem;display:inline-block;position:relative;width:30px;background:linear-gradient(to bottom, #F00, #FF0, #0F0, #0FF, #00F, #F0F, #F00)}.${ns}-colorpicker .${ns}-cp-hue .position{top:-3px;left:-1px;right:-1px}.${ns}-colorpicker .${ns}-cp-saturation .position,.${ns}-colorpicker .${ns}-cp-hue .position{position:absolute;height:5px;border-radius:1rem}.${ns}-colorpicker .${ns}-output{vertical-align:top;margin-left:1rem;display:inline-block}.${ns}-colorpicker .${ns}-output .${ns}-rgb-input{width:2rem}.${ns}-colorpicker .${ns}-output .output-color{height:40px;margin:.25rem 0}.${ns}-cp-preview,.${ns}-cp-saturation .position,.${ns}-cp-hue .position,.${ns}-output .output-color{border:solid 1px #000;box-shadow:inset 0 0 0 1px #eee}.${ns}-cp-preview{height:1em;width:1em;margin-left:.125rem}.${ns}-text-muted{color:#909090}.${ns}-controls{align-items:center;padding:.5rem 0;position:relative;background:${Player.config.colors.controls_background};justify-content:space-between}.${ns}-controls>div{margin:0 .5rem}.${ns}-controls .${ns}-current-time{color:${Player.config.colors.controls_inactive}}.${ns}-controls .${ns}-media-control{width:1.5rem;height:1.5rem;font-size:1rem;color:${Player.config.colors.controls_inactive}}.${ns}-controls .${ns}-media-control:hover{color:${Player.config.colors.controls_active}}.${ns}-media-control{display:flex;justify-content:center;align-items:center;cursor:pointer}.${ns}-media-control.${ns}-hover-fill svg[class$=-fill],.${ns}-media-control.${ns}-hover-fill svg[class*="-fill "]{display:none}.${ns}-media-control.${ns}-hover-fill:hover svg{display:none}.${ns}-media-control.${ns}-hover-fill:hover svg[class$=-fill],.${ns}-media-control.${ns}-hover-fill:hover svg[class*="-fill "]{display:block}.${ns}-media-control.${ns}-play-button:not(.${ns}-play) svg.bi-play-fill,.${ns}-media-control.${ns}-play-button:not(.${ns}-play) svg.bi-play{display:none !important}.${ns}-media-control.${ns}-play-button.${ns}-play svg.bi-pause-fill,.${ns}-media-control.${ns}-play-button.${ns}-play svg.bi-pause{display:none !important}.${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen-exit{display:none}#${ns}-container[data-view-style=fullscreen] .${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen-exit{display:block}#${ns}-container[data-view-style=fullscreen] .${ns}-media-control.${ns}-fullscreen-button svg.bi-fullscreen{display:none}.${ns}-media-control.${ns}-volume-button.mute .bi:not(.bi-volume-mute):not(.bi-volume-mute-fill){display:none}.${ns}-media-control.${ns}-volume-button.up .bi:not(.bi-volume-up):not(.bi-volume-up-fill){display:none}.${ns}-progress-bar{min-width:3.5rem;height:1.5rem;display:flex;align-items:center}.${ns}-progress-bar .${ns}-full-bar{height:.3rem;width:100%;background:${Player.config.colors.controls_empty_bar};border-radius:1rem;position:relative}.${ns}-progress-bar .${ns}-full-bar>div{position:absolute;top:0;bottom:0;border-radius:1rem}.${ns}-progress-bar .${ns}-full-bar .${ns}-loaded-bar{background:${Player.config.colors.controls_loaded_bar}}.${ns}-progress-bar .${ns}-full-bar .${ns}-current-bar{display:flex;justify-content:flex-end;align-items:center}.${ns}-progress-bar .${ns}-full-bar .${ns}-current-bar:after{content:"";background:${Player.config.colors.controls_inactive};height:.8rem;min-width:.8rem;border-radius:1rem;box-shadow:rgba(0,0,0,.76) 0 0 3px 0;margin-right:-0.4rem}.${ns}-progress-bar:hover .${ns}-current-bar:after{background:${Player.config.colors.controls_active}}.${ns}-seek-bar .${ns}-current-bar{background:${Player.config.colors.controls_active}}.${ns}-volume-bar .${ns}-current-bar{background:${Player.config.colors.controls_inactive}}.${ns}-chan-x-controls .${ns}-current-time,.${ns}-chan-x-controls .${ns}-duration{margin:0 .25rem}.${ns}-header,.${ns}-footer{text-align:center;padding:.125rem;max-width:100%}.${ns}-header:hover .${ns}-hover-display,.${ns}-footer:hover .${ns}-hover-display{display:flex}.${ns}-header{cursor:grab;border-bottom:solid 1px ${Player.config.colors.border}}.${ns}-footer{cursor:grab;border-top:solid 1px ${Player.config.colors.border}}.${ns}-footer .${ns}-expander{position:absolute;bottom:0px;right:0px;height:.75rem;width:.75rem;cursor:se-resize;background:linear-gradient(to bottom right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0) 50%, ${Player.config.colors.border} 55%, ${Player.config.colors.border} 100%)}.${ns}-footer .${ns}-expander[data-direction=sw]{left:0px;right:auto;transform:rotate(90deg);cursor:sw-resize}.${ns}-title-marquee{transition:margin-left 1s linear}.${ns}-icon-close{transform:rotate(45deg)}.${ns}-menu svg.bi{margin:0 -0.25rem 0 .25rem}.${ns}-header svg.bi,.${ns}-footer svg.bi{margin:0 .125rem}.muted svg.bi{opacity:.45}svg.bi{overflow:visible}.${ns}-image-link{text-align:center;display:flex;flex-grow:1;justify-content:center;overflow:auto}.${ns}-image-link.${ns}-pip{position:fixed;right:10px;height:${Player.config.maxPIPWidth} !important;max-width:${Player.config.maxPIPWidth};align-items:end}.${ns}-image-link.${ns}-pip .${ns}-image,.${ns}-image-link.${ns}-pip .${ns}-video{max-height:100%;height:initial;width:initial;object-fit:contain}.${ns}-image-link .${ns}-video{display:none}.${ns}-image,.${ns}-video{height:100%;width:100%;object-fit:contain}.${ns}-image-link.${ns}-show-video .${ns}-video{display:block}.${ns}-image-link.${ns}-show-video .${ns}-image{display:none}#${ns}-container{position:fixed;display:flex;flex-direction:column;background:${Player.config.colors.background};color:${Player.config.colors.text};border:1px solid ${Player.config.colors.border};box-sizing:border-box;min-width:7rem}.${ns}-panel{padding:0 .25rem;height:100%;width:calc(100% - .5rem);overflow:auto}.${ns}-heading{font-weight:600;margin:.5rem 0}.${ns}-has-description{cursor:help}.${ns}-heading-action{font-weight:normal;text-decoration:underline;margin-left:.25rem}.${ns}-row{display:flex;flex-wrap:wrap;min-width:100%;box-sizing:border-box}.${ns}-row.nowrap{flex-wrap:nowrap}.${ns}-col-auto{flex:0 0 auto;width:auto;max-width:100%;display:inline-flex}.${ns}-col{flex-basis:0;flex-grow:1;max-width:100%;width:100%;position:relative}.${ns}-align-center{align-items:center;align-content:center;align-self:center}.${ns}-align-start{align-items:start;align-content:start;align-self:start}.${ns}-space-between{justify-content:space-between}html.fourchan-x #${ns}-container .fa{font-size:0;visibility:hidden;margin:0 .15rem}.${ns}-truncate-text{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.${ns}-hover-display{display:none}.${ns}-player{display:flex;flex-direction:column;flex-grow:1;overflow:auto}.${ns}-player .${ns}-hover-image{position:fixed;max-height:125px;max-width:125px}.${ns}-player.${ns}-hide-hover-image .${ns}-hover-image{display:none !important}.${ns}-list-container{flex-grow:1;overflow:auto}.${ns}-list-container .${ns}-list-item{list-style-type:none;padding:.15rem .25rem;white-space:nowrap;text-overflow:ellipsis;cursor:pointer;background:${Player.config.colors.odd_row};overflow:hidden;height:1.3rem}.${ns}-list-container .${ns}-list-item:nth-child(2n){background:${Player.config.colors.even_row}}.${ns}-list-container .${ns}-list-item:nth-child(n).playing{background:${Player.config.colors.playing}}.${ns}-list-container .${ns}-list-item .${ns}-item-menu-button{right:.25rem}.${ns}-list-container .${ns}-list-item:hover .${ns}-hover-display{display:flex}.${ns}-list-container .${ns}-list-item.${ns}-dragging{background:${Player.config.colors.dragging}}.${ns}-settings textarea{border:solid 1px ${Player.config.colors.border};min-width:100%;min-height:4rem;box-sizing:border-box;white-space:pre}.${ns}-settings .${ns}-sub-settings .${ns}-col{min-height:1.55rem;display:flex;align-items:center;align-content:center;white-space:nowrap}.${ns}-settings .${ns}-settings-tabs{justify-content:space-between;flex-direction:row-reverse;margin:0 -0.25rem}.${ns}-settings .${ns}-settings-tab-group{text-align:center;white-space:nowrap;align-items:center}.${ns}-settings .${ns}-settings-tab{margin:.25rem;text-decoration:underline;text-align:center}.${ns}-settings .${ns}-settings-tab.active{font-weight:bold}.${ns}-settings .${ns}-settings-group{display:none}.${ns}-settings .${ns}-settings-group.active{display:block}.${ns}-settings .${ns}-host-input{margin:.5rem 0;border-top:solid 1px ${Player.config.colors.border}}.${ns}-settings .${ns}-host-input.invalid{border:solid 1px red}.${ns}-settings .${ns}-host-input .${ns}-host-controls{align-items:center;justify-content:space-between;margin:.125rem 0}.${ns}-settings .${ns}-host-input input[type=text]{min-width:100%;box-sizing:border-box}.${ns}-threads .${ns}-thread-board-list label{display:inline-block;width:4rem}.${ns}-threads .${ns}-thread-list{margin:.5rem -0.25rem 0;padding:.5rem 1rem;border-top:solid 1px ${Player.config.colors.border}}.${ns}-threads .${ns}-thread-list .boardBanner{margin:1rem 0}.${ns}-threads table{border-top:solid 1px ${Player.config.colors.border};width:100%;margin-top:.5rem;border-collapse:collapse}.${ns}-threads table th{border-bottom:solid 1px ${Player.config.colors.border}}.${ns}-threads table th,.${ns}-threads table td{text-align:left;padding:.25rem}.${ns}-threads table tr{padding:.25rem 0}.${ns}-threads table .${ns}-threads-body tr{background:${Player.config.colors.even_row}}.${ns}-threads table .${ns}-threads-body tr:nth-child(2n){background:${Player.config.colors.odd_row}}.${ns}-create-sound-status{margin-top:.5rem;border:solid 1px ${Player.config.colors.border};border-radius:5px;padding:.25rem}.${ns}-file-input,.${ns}-tools input[type=text]{width:100%;color:#000}.${ns}-file-overlay,.${ns}-tools input[type=text]{box-sizing:border-box;height:1.5rem;border:solid 1px ${Player.config.colors.border};min-width:5rem;display:flex;align-items:center;padding:0 .25rem;margin:0}.${ns}-file-input.placeholder span,.${ns}-create-sound-form input[type=text]::placeholder{color:#aaa;opacity:1}.${ns}-file-input .${ns}-file-overlay{position:relative;background:#fff}.${ns}-file-input .placeholder-text{display:none}.${ns}-file-input.placeholder .placeholder-text{display:inherit}.${ns}-file-input span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.${ns}-file-input input[type=file]{width:100%;box-sizing:border-box;height:100%;position:absolute;left:0;opacity:0}.${ns}-file-input .overfile{z-index:9999}.${ns}-file-input .${ns}-file-list{padding:0 .25rem}.${ns}-file-input .${ns}-file-list:empty{display:none}.${ns}-input-append{position:absolute;display:flex;align-items:center;background:#fff;padding-left:.25rem;right:.125rem}.${ns}-threads,.${ns}-settings,.${ns}-tools,.${ns}-player{display:none}#${ns}-container[data-view-style=settings] .${ns}-settings{display:block}#${ns}-container[data-view-style=threads] .${ns}-threads{display:block}#${ns}-container[data-view-style=tools] .${ns}-tools{display:block}#${ns}-container[data-view-style=image] .${ns}-player,#${ns}-container[data-view-style=playlist] .${ns}-player,#${ns}-container[data-view-style=fullscreen] .${ns}-player{display:flex}#${ns}-container[data-view-style=image] .${ns}-list-container,#${ns}-container[data-view-style=image] .${ns}-playlist-search{display:none}#${ns}-container[data-view-style=image] .${ns}-image-link{height:auto}#${ns}-container[data-view-style=playlist] .${ns}-image-link{height:125px;flex-shrink:0}#${ns}-container[data-view-style=fullscreen] .${ns}-image-link{height:calc(100% - .4rem) !important}#${ns}-container[data-view-style=fullscreen] .${ns}-controls{position:absolute;left:0;right:0;bottom:calc(-2.5rem + .4rem);opacity:.7}#${ns}-container[data-view-style=fullscreen] .${ns}-controls:hover{bottom:0}#${ns}-container[data-view-style=fullscreen] .${ns}-list-container{position:absolute;top:100%;width:100%}`},function(e,t){e.exports=(e={})=>`.dialog{background:${Player.config.colors.background};background:${Player.config.colors.background};border-color:${Player.config.colors.border};border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.15);border-radius:3px;padding-top:1px;padding-bottom:3px}.entry{position:relative;display:block;padding:.125rem .5rem;min-width:70px;white-space:nowrap}.entry.has-submenu::after{content:"";border-left:.5em solid;border-top:.3em solid transparent;border-bottom:.3em solid transparent;display:inline-block;margin:.35em;position:absolute;right:3px}.entry.focused{background:rgba(255,255,255,.33)}.entry.focused>.submenu{display:block}.submenu{position:absolute;display:none}`},function(e,t){e.exports=(e={})=>Player.userTemplate.build({template:Player.config.footerTemplate,location:"footer",sound:Player.playing,defaultName:"4chan Sounds",outerClass:ns+"-col-auto"})},function(e,t){e.exports=(e={})=>Player.userTemplate.build({template:Player.config.headerTemplate,location:"header",sound:Player.playing,defaultName:"4chan Sounds",outerClass:ns+"-col-auto"})},function(e,t){e.exports=(e={})=>{const t=Player.config.uploadHosts[e];return t?`<div class="${ns}-row ${ns}-col ${ns}-host-input ${t.invalid?"invalid":""}" data-host-name="${e}">\n\t\t<div class="${ns}-row ${ns}-host-controls">\n\t\t\t<div class="${ns}-col-auto">\n\t\t\t\t<label>\n\t\t\t\t\t<input type="checkbox" data-property="defaultUploadHost" ${Player.config.defaultUploadHost===e?"checked":""}>\n\t\t\t\t\tDefault\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class="${ns}-col-auto"><a href="#" class="${ns}-heading-action ${ns}-remove-host" data-handler="settings.removeHost" data-property="uploadHosts">Remove</a></div>\n\t\t</div>\n\t\t<div class="${ns}-row">\n\t\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="name" value="${e||""}" placeholder="Name"></div>\n\t\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="url" value="${t.url||""}" placeholder="URL"></div>\n\t\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="responsePath" value="${t.responsePath||""}" placeholder="Response Path"></div>\n\t\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="responseMatch" value="${t.responseMatch||""}" placeholder="Response Match"></div>\n\t\t\t<div class="${ns}-col"><input type="text" data-property="uploadHosts" name="soundUrl" value="${t.soundUrl||""}" placeholder="File URL Format"></div>\n\t\t</div>\n\t\t<div class="${ns}-row">\n\t\t\t<div class="${ns}-col"><textarea data-property="uploadHosts" name="data" placeholder="Data (JSON)">${JSON.stringify(t.data,null,4)}</textarea></div>\n\t\t</div>\n\t\t<div class="${ns}-row">\n\t\t\t<div class="${ns}-col"><textarea data-property="uploadHosts" name="headers" placeholder="Headers (JSON)">${t.headers?JSON.stringify(t.headers,null,4):""}</textarea></div>\n\t\t</div>\n\t</div>`:""}},function(e,t){e.exports=(e={})=>`<div class="${ns}-menu dialog" id="menu" tabindex="0" data-type="post" style="position: fixed;">\n\t<a class="${ns}-remove-link entry focused" href="javascript:;" data-id="${e.sound.id}">Remove</a>\n\t${e.sound.post?`<a class="entry" href="#${e.postIdPrefix+e.sound.post}">Show Post</a>`:""}\n\t<div class="entry has-submenu">\n\t\tOpen\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t<a class="entry" href="${e.sound.image}" target="_blank">Image</a>\n\t\t\t<a class="entry" href="${e.sound.src}" target="_blank">Sound</a>\n\t\t</div>\n\t</div>\n\t<div class="entry has-submenu">\n\t\tDownload\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t<a class="${ns}-download-link entry" href="javascript:;" data-src="${e.sound.image}" data-name="${e.sound.filename}">Image</a>\n\t\t\t<a class="${ns}-download-link entry" href="javascript:;" data-src="${e.sound.src}" data-name="${e.sound.name}">Sound</a>\n\t\t</div>\n\t</div>\n\t<div class="entry has-submenu">\n\t\tFilter\n\t\t<div class="dialog submenu" style="inset: 0px auto auto 100%;">\n\t\t\t${e.sound.imageMD5?`<a class="${ns}-filter-link entry" href="javascript:;" data-filter="${e.sound.imageMD5}">Image</a>`:""}\n\t\t\t<a class="${ns}-filter-link entry" href="javascript:;" data-filter="${e.sound.src.replace(/^(https?\:)?\/\//,"")}">Sound</a>\n\t\t</div>\n\t</div>\n</div>`},function(e,t){e.exports=(e={})=>(e.sounds||Player.sounds).map(e=>`<div class="${ns}-list-item ${ns}-row ${e.playing?"playing":""}" data-id="${e.id}" ${Player.playlist.matchesSearch(e)?"":'style="display: none"'} draggable="true">\n\t\t${Player.userTemplate.build({template:Player.config.rowTemplate,location:"item-"+e.id,sound:e,outerClass:ns+"-col-auto"})}\n\t</div>`).join("")},function(e,t,a){(function(t){e.exports=(e={})=>`<a class="${ns}-image-link" target="_blank">\n\t<img id="fcspImage" class="${ns}-image" src="data:image/svg+xml;base64,${btoa(t.fcSounds)}"></img>\n\t<video class="${ns}-video"></video>\n</a>\n<div class="${ns}-controls ${ns}-row">\n\t${Player.templates.controls(e)}\n</div>\n<input class="${ns}-playlist-search" type="input" placeholder="Search" style="min-width: 100%; box-sizing: border-box; ${Player.config.showPlaylistSearch?"":"display: none;"}">\n<div class="${ns}-list-container">\n\t${Player.templates.list(e)}\n</div>\n<img class="${ns}-hover-image">`}).call(this,a(1))},function(e,t,a){(function(t){e.exports=(e={})=>{const n=a(3).reduce((e,t)=>(t.displayGroup&&(e[t.displayGroup]||(e[t.displayGroup]=[]),e[t.displayGroup].push(t)),e),{});let l=`<div class="${ns}-settings-tabs ${ns}-row">\n\t\t<div class="${ns}-settings-tab-group ${ns}-col-auto">\n\t\t\t<a href="#" class="${ns}-settings-reset-all ${ns}-settings-tab" title="Reset all settings to their default values.">Reset</a>\n\t\t\t| <a href="#" class="${ns}-settings-export ${ns}-settings-tab" title="Shift click to export all settings. Otherwise only modified settings are included in the export.">Export</a>\n\t\t\t| <a href="#" class="${ns}-settings-import ${ns}-settings-tab" title="Settings not included in the import will be left as their current value.">Import</a>\n\t\t\t| <a href="${Player.settings.changelog}" class="${ns}-settings-tab" target="_blank">v3.3.0-6c82932</a>\n\t\t</div>\n\t\t<div class="${ns}-settings-tab-group ${ns}-col-auto">\n\t\t\t${Object.keys(n).map(e=>`<a href="javascript:;" class="${ns}-settings-tab ${Player.settings.view!==e?"":"active"}" data-group="${e}">${e}</a>`).join(" | ")}\n\t\t</div>\n\t</div>`;return Object.keys(n).forEach(e=>{l+=`<div class="${ns}-settings-group ${Player.settings.view!==e?"":"active"}" data-group="${e}">`,n[e].forEach((function e(a){if(null===a.displayMethod)return;const n=a.description;if(l+=`\n\t\t\t<div class="${ns}-row ${ns}-align-${a.isSubSetting?"start":"center"} ${a.isSubSetting?ns+"-sub-settings":""}">\n\t\t\t\t<div class="${ns}-col ${a.isSubSetting?ns+"-space-between":ns+"-heading"} ${n?ns+"-has-description":""}" ${n?`title="${n.replace(/"/g,"&quot;")}"`:""}>\n\t\t\t\t\t${a.title}\n\t\t\t\t\t${a.actions&&a.actions.length?`<div style="display: inline-block; margin-right: .25rem">\n\t\t\t\t\t\t${(a.actions||[]).map(e=>`<a href="#" class="${ns}-heading-action" data-handler="${e.handler}" data-property="${a.property}">${e.title}</a>`).join(" ")}\n\t\t\t\t\t</div>`:""}\n\t\t\t\t</div>`,a.text&&(l+=a.dismissTextId?`<div class="${ns}-col" style="min-width: 100%">`+Player.display.ifNotDismissed(a.dismissTextId,a.dismissRestoreText,`<div data-dismiss-id="${a.dismissTextId}">`+a.text+`<a href="javascript:;" class="${ns}-dismiss-link" data-dismiss="${a.dismissTextId}" style="display:block; margin-top:.25rem">Dismiss</a></div>`)+"</div>":a.text),a.settings)a.settings.forEach(t=>e({...a,actions:null,settings:null,description:null,...t,isSubSetting:!0}));else{let e=t.get(Player.config,a.property,a.default),n=(a.attrs||"")+(a.class?` class="${a.class}"`:"")+` data-property="${a.property}"`,s=a.displayMethod,r="function"==typeof s?s:t.get(Player,s);a.format&&(e=Player.getHandler(a.format)(e));let o=typeof e;a.split?e=e.join(a.split):"object"===o&&(e=JSON.stringify(e,null,4)),l+="function"==typeof r?r(e,n):"boolean"===o?`<div class="${ns}-col"><input type="checkbox" ${n} ${e?"checked":""}></div>`:"textarea"===s||"object"===o?`<div class="${ns}-row ${ns}-col"><textarea ${n}>${e}</textarea></div>`:a.options?`<div class="${ns}-col">\n\t\t\t\t\t\t\t\t<select ${n}>\n\t\t\t\t\t\t\t\t\t${Object.keys(a.options).map(t=>`<option value="${t}" ${e===t?"selected":""}>\n\t\t\t\t\t\t\t\t\t\t${a.options[t]}\n\t\t\t\t\t\t\t\t\t</option>`).join("")}\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>`:`<div class="${ns}-col"><input type="text" ${n} value="${e}"></div>`}l+="</div>"})),l+="</div>"}),l}}).call(this,a(0))},function(e,t){e.exports=(e={})=>`<div class="${ns}-heading ${ns}-has-description" title="Search for threads with a sound OP">\n\tActive Threads\n\t${Player.threads.loading?"":`- <a class="${ns}-fetch-threads-link ${ns}-heading-action" href="#">Update</a>`}\n</div>\n<div style="display: ${Player.threads.loading?"block":"none"}">Loading</div>\n<div style="display: ${Player.threads.loading?"none":"block"}">\n\t<div class="${ns}-heading ${ns}-has-description" title="Only includes threads containing the search.">\n\t\tFilter\n\t</div>\n\t<input type="text" class="${ns}-threads-filter" value="${Player.threads.filterValue||""}"></input>\n\t<div class="${ns}-heading">\n\t\tBoards - <a class="${ns}-all-boards-link ${ns}-heading-action" href="#">${Player.threads.showAllBoards?"Selected Only":"Show All"}</a>\n\t</div>\n\t<div class="${ns}-thread-board-list">\n\t\t${Player.templates.threadBoards(e)}\n\t</div>\n\t${Player.threads.hasParser?`<div class="${ns}-heading" style="text-align: center">\n\t\t\t${"table"!==Player.config.threadsViewStyle?`<a class="${ns}-threads-view-style ${ns}-heading-action" style="margin: 0" data-style="table" href="#">Table</a>`:"<span>Table</span>"}\n\t\t\t|\n\t\t\t${"board"!==Player.config.threadsViewStyle?`<a class="${ns}-threads-view-style ${ns}-heading-action" style="margin: 0" data-style="board" href="#">Board</a>`:"<span>Board</span>"}\n\t\t</div>`:""}\n\t${Player.threads.hasParser&&"table"!==Player.config.threadsViewStyle?`<div class="${ns}-thread-list"></div>`:`<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<th>Thread</th>\n\t\t\t\t\t<th>Subject</th>\n\t\t\t\t\t<th>Replies/Images</th>\n\t\t\t\t\t<th>Started</th>\n\t\t\t\t\t<th>Updated</th>\n\t\t\t\t<tr>\n\t\t\t\t<tbody class="${ns}-threads-body"></tbody>\n\t\t\t</table>`}\n</div>`},function(e,t){e.exports=(e={})=>(Player.threads.boardList||[]).map(e=>{let t=Player.threads.selectedBoards.includes(e.board);return t||Player.threads.showAllBoards?`<label>\n\t\t\t<input type="checkbox" value="${e.board}" ${t?"checked":""}>\n\t\t\t/${e.board}/\n\t\t</label>`:""}).join("")},function(e,t,a){(function(t){e.exports=(e={})=>Object.keys(Player.threads.displayThreads).reduce((e,a)=>e.concat(Player.threads.displayThreads[a].map(e=>`\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<a class="quotelink" href="//boards.${e.ws_board?"4channel":"4chan"}.org/${e.board}/thread/${e.no}#p${e.no}" target="_blank">\n\t\t\t\t\t>>>/${e.board}/${e.no}\n\t\t\t\t</a>\n\t\t\t</td>\n\t\t\t<td>${e.sub||""}</td>\n\t\t\t<td>${e.replies} / ${e.images}</td>\n\t\t\t<td>${t.timeAgo(e.time)}</td>\n\t\t\t<td>${t.timeAgo(e.last_modified)}</td>\n\t\t</tr>\n\t`)),[]).join("")}).call(this,a(0))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-heading">Encode / Decode URL</div>\n<div class="${ns}-row">\n\t<div class="${ns}-col"><input type="text" class="${ns}-decoded-input" placeholder="https://"></div>\n<div class="${ns}-col"><input type="text" class="${ns}-encoded-input" placeholder="https%3A%2F%2F"></div>\n</div>\n\n<div class="${ns}-heading">\n\tCreate Sound Image\n</div>\n<div class="${ns}-create-sound-form">\n\t<div class="${ns}-row" style="margin-bottom: .5rem">\n\t\t${Player.display.ifNotDismissed("createSoundDetails","Show Help",`<div class="${ns}-col" data-dismiss-id="createSoundDetails">\n\t\t\tSelect an image and sound to combine as a sound image.\n\t\t\tThe sound will be uploaded to the selected file host and the url will be added to the image filename.\n\t\t\tIf you have an account for a host that you would like to use then make the required changes in the <a class="${ns}-host-setting-link" href="#">host config</a>.\n\t\t\tThat typically means providing a user token in the data or headers.<br>\n\t\t\t${Player.tools.hasFFmpeg?"Selecting a webm with audio as the image will split it into a video only webm to be posted and ogg audio file to be uploaded.":"For a webm with audio first split the webm into a separate video and audio file and select them both."}\n\t\t\t<br>\n\t\t\tMultiple sound files, or a comma-separated list of sound URLs, can be given for a single image.\n\t\t\tIf you do have multiple sounds the name will also be a considered comma-separated list.<br>\n\t\t\t<a href="javascript:;" class="${ns}-dismiss-link" data-dismiss="createSoundDetails">Dismiss</a>\n\t\t</div>`)}\n\t</div>\n\t<div class="${ns}-row">\n\t\tHost\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col">\n\t\t\t<select class="${ns}-create-sound-host">\n\t\t\t\t${Object.keys(Player.config.uploadHosts).map((e,t)=>Player.config.uploadHosts[e]&&!Player.config.uploadHosts[e].invalid?`<option value="${e}" ${Player.config.defaultUploadHost===e?"selected":""}>${e}</option>`:"").join("")}\n\t\t\t</select>\n\t\t</div>\n\t</div>\n\t<div class="${ns}-row" style="margin-top: .25rem">\n\t\tData\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col">\n\t\t\t<input type="text" class="${ns}-create-sound-name" placeholder="Name/s">\n\t\t</div>\n\t</div>\n\t<div class="${ns}-row">\n\t\t<div class="${ns}-col">\n\t\t\t<div class="${ns}-file-input placeholder">\n\t\t\t\t<div class="${ns}-file-overlay">\n\t\t\t\t<span class="placeholder-text">Select/Drop Image</span>\n\t\t\t\t<span class="text"></span>\n\t\t\t\t<input class="${ns}-create-sound-img" type="file" accept="image/*,.webm">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="${ns}-col">\n\t\t\t<div class="${ns}-file-input placeholder" ${Player.tools.useSoundURL?"display: none;":""}>\n\t\t\t\t<div class="${ns}-file-overlay">\n\t\t\t\t\t<span class="placeholder-text">Select/Drop Sound/s</span>\n\t\t\t\t\t<span class="text"></span>\n\t\t\t\t\t<div class="overfile ${ns}-input-append">\n\t\t\t\t\t\t${Player.tools.hasFFmpeg&&`<label class="${ns}-use-video-label" style="display: none;">Use video<input type="checkbox" class="${ns}-use-video"></label>`||""}\n\t\t\t\t\t\t<a href="#" class="${ns}-toggle-sound-input" data-type="url" title="Enter a URL of a previously uploaded file.">${t.link}</a>\n\t\t\t\t\t</div>\n\t\t\t\t\t<input class="${ns}-create-sound-snd" type="file" accept="audio/*,video/*" multiple>\n\t\t\t\t</div>\n\t\t\t\t<div class="${ns}-file-list"></div>\n\t\t\t</div>\n\t\t\t<div class="${ns}-row ${ns}-align-center" style="position: relative; ${Player.tools.useSoundURL?"":"display: none;"}">\n\t\t\t\t<a href="#" class="${ns}-toggle-sound-input ${ns}-input-append" data-type="file" title="Select a file to upload.">\n\t\t\t\t\t${t.fileEarmarkMusic}\n\t\t\t\t</a>\n\t\t\t\t<input type="text" class="${ns}-create-sound-snd-url" placeholder="Sound URL/s" style="min-width: 100%;">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="${ns}-row" style="margin-top: .5rem">\n\t\t<div class="${ns}-col-auto">\n\t\t\t<button class="${ns}-create-button">Create</button>\n\t\t</div>\n\t</div>\n</div>\n<div class="${ns}-create-sound-status" ${Player.tools.createStatusText?"":'style="display: none"'}>\n\t${Player.tools.createStatusText}\n</div>`}).call(this,a(1))},function(e,t,a){(function(t){e.exports=(e={})=>`<div class="${ns}-menu dialog" id="menu" tabindex="0" data-type="post" style="position: fixed;">\n\t${["playlist","image"].includes(Player.config.viewStyle)?"":`<a class="${ns}-row nowrap ${ns}-align-center ${ns}-player-button entry" href="javascript:;"><div class="${ns}-col">Player</div><div class="${ns}-col-auto">${t.musicNoteList}</div></a>`}\n\t${"settings"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center ${ns}-config-button entry" href="javascript:;"><div class="${ns}-col">Settings</div><div class="${ns}-col-auto">${t.gear}</div></span></a>`}\n\t${"threads"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center ${ns}-threads-button entry" href="javascript:;"><div class="${ns}-col">Threads</div><div class="${ns}-col-auto">${t.search}</div></span></a>`}\n\t${"tools"===Player.config.viewStyle?"":`<a class="${ns}-row nowrap ${ns}-align-center ${ns}-tools-button entry" href="javascript:;"><div class="${ns}-col">Tools</div><div class="${ns}-col-auto">${t.tools}</div></span></a>`}\n</div>`}).call(this,a(1))}]);